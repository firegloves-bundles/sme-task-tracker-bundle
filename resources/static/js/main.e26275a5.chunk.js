(this["webpackJsonptask-build-info-widget"]=this["webpackJsonptask-build-info-widget"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(61),a=n(62),i=n(63),c=n(80),s=n(81),o=n(6),u=n(79),l=n(78),b=n(133),d=n(138),f=n(131),v=n(0),h=n.n(v),k=h.a.createContext(null),m="task.detail",p=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},g=n(39),E=n(58),O=n(54),j={it:n(71),en:n(72)},y=Object.keys(j).reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(g.a)({},t,Object(g.a)({},"translation",j[t])))}),{}),w=(E.a.t,function(e){!function(e,t){E.a.use(O.a).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:y,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),U=n(7),T=n(14),C=n.n(T),x=n(73),N=n.n(x),S=function(e){var t=e.children,n=e.keycloak;return n&&n.initialized&&n.authenticated?t:null},A=n(132),D=n(130),F=n(137),P=n(33),z=Object(v.createContext)([{},function(){}]),I=function(){var e=Object(v.useContext)(z),t=Object(P.a)(e,2),n=t[0],r=t[1];return{info:n.info,error:n.error,clearError:function(){return r((function(e){return Object(o.a)(Object(o.a)({},e),{},{error:null})}))}}},M=n(3),H=n(134),K=n(136),J=n(55),L=n(5),R=n(135),W=n(75),G=n.n(W),V=n(76),q=n.n(V),B=n(74),Q=n.n(B),X=n(77),Y=n.n(X),Z={success:Q.a,error:G.a,info:q.a},$={success:3e3,error:5e3,info:5e3},_=function e(t){var n=t.className,r=t.classes,a=t.status,i=t.message,c=t.onClose,s=t.anchorOrigin,o=a||e.INFO,u=Z[o],l=$[o],b=Object(v.useState)(!1),d=Object(P.a)(b,2),f=d[0],k=d[1],m=h.a.createElement("span",{className:r.message},h.a.createElement(u,{className:Object(M.a)(r.icon,r.iconStatus)}),i);Object(v.useEffect)((function(){i&&k(!0)}),[i]);var p=function(e,t){"clickaway"!==t&&(k(!1),c&&c())};return h.a.createElement(H.a,{open:f,onClose:p,autoHideDuration:l,anchorOrigin:s},h.a.createElement(K.a,{className:Object(M.a)(r[o],n),message:m,action:[h.a.createElement(R.a,{key:"close","aria-label":"close",color:"inherit",onClick:p},h.a.createElement(Y.a,{className:r.icon}))]}))};_.SUCCESS="success",_.ERROR="error",_.defaultProps={message:null,className:"",status:_.INFO="info",onClose:function(){},anchorOrigin:{vertical:"bottom",horizontal:"center"}};var ee=Object(L.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:J.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(_),te=n(129),ne=Object(te.a)((function(e){return{root:{backgroundColor:e.palette.background.paper}}})),re=function(){var e=I(),t=e.info,n=e.error,r=e.clearError,a=ne();return h.a.createElement(A.a,{width:1},h.a.createElement(D.a,{className:a.root},t.map((function(e){return h.a.createElement(F.a,{key:e.name,primary:e.name,secondary:e.version})}))),h.a.createElement(ee,{message:n,onClose:r,status:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}))},ae=n(20),ie=n.n(ae),ce=n(32),se=function(){var e=Object(ce.a)(ie.a.mark((function e(t,n){var r,a,i=arguments;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>2&&void 0!==i[2])||i[2],e.next=3,fetch(t,n);case 3:if(204!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(a.status>=200&&a.status<300)){e.next=10;break}if(!r){e.next=9;break}return e.abrupt("return",a.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(a.statusText||a.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(ce.a)(ie.a.mark((function e(t){var n,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("buildInfo"),r={method:"GET"},e.abrupt("return",se(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){var t=e.children,n=e.keycloak,r=e.serviceUrlTaskTracker,a=e.serviceUrlAttachments,i=e.serviceUrlSigeIntegration,c=e.serviceUrlNotification,s=e.serviceUrlEdoUser,u=e.useMock,l=Object(v.useState)({info:[],error:null}),b=Object(P.a)(l,2),d=b[0],f=b[1],k=Object(O.b)().t;return Object(v.useEffect)((function(){n.initialized&&n.authenticated&&function(){var e=Object(ce.a)(ie.a.mark((function e(){var t,n,l;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!u){e.next=5;break}f((function(e){return Object(o.a)({},e)})),e.next=11;break;case 5:return t=[oe(r),oe(a),oe(i),oe(c),oe(s)],e.next=8,Promise.all(t);case 8:n=e.sent,l=[{name:"Task Tracker",version:n[0].payload},{name:"Attachments",version:n[1].payload},{name:"Sige Integration",version:n[2].payload},{name:"Notification",version:n[3].payload},{name:"Edo User",version:n[4].payload}],f((function(e){return Object(o.a)(Object(o.a)({},e),{},{info:l})}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f({info:[],error:k("message.error")});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()()}),[n.initialized,n.authenticated]),h.a.createElement(z.Provider,{value:[d,f]},t)};ue.defaultProps={keycloak:{initialized:!1,authenticated:!1},useMock:!1};var le=ue,be=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},de={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrlTaskTracker:"service-url-task-tracker",serviceUrlAttachments:"service-url-attachments",serviceUrlSigeIntegration:"service-url-sige-integration",serviceUrlNotification:"service-url-notification",serviceUrlEdoUser:"service-url-edo-user",useMock:"use-mock"},fe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).keycloak=be(),e}return Object(a.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(this.container&&t!==n){if(!Object.values(de).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===de.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.attachShadow({mode:"open"});t.appendChild(this.container),this.jss=Object(U.b)(Object(o.a)(Object(o.a)({},Object(b.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(u.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},l.itIT),this.keycloak=Object(o.a)(Object(o.a)({},be()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=p("keycloak",(function(){e.keycloak=Object(o.a)(Object(o.a)({},be()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=p(m,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),N()(t)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(de.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(de.serviceUrlTaskTracker)||"",t=this.getAttribute(de.serviceUrlAttachments)||"",n=this.getAttribute(de.serviceUrlSigeIntegration)||"",r=this.getAttribute(de.serviceUrlNotification)||"",a=this.getAttribute(de.serviceUrlEdoUser)||"",i=this.getAttribute(de.useMock)||!1;if("true"===this.getAttribute(de.hidden))C.a.render(h.a.createElement(h.a.Fragment,null));else{var c=this.getAttribute(de.locale)||"it";w(c),C.a.render(h.a.createElement(k.Provider,{value:this.keycloak},h.a.createElement(d.b,{jss:this.jss},h.a.createElement(f.a,{theme:this.muiTheme},h.a.createElement(le,{keycloak:this.keycloak,useMock:i,serviceUrlTaskTracker:e,serviceUrlAttachments:t,serviceUrlSigeIntegration:n,serviceUrlNotification:r,serviceUrlEdoUser:a},h.a.createElement(S,{keycloak:this.keycloak},h.a.createElement(re,null)))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(de)}}]),n}(Object(s.a)(HTMLElement));customElements.define("task-info-build",fe)},71:function(e){e.exports=JSON.parse('{"message":{"error":"Errore nel recupero dei dati"}}')},72:function(e){e.exports=JSON.parse("{}")},88:function(e,t,n){e.exports=n(108)}},[[88,1,2]]]);
//# sourceMappingURL=main.e26275a5.chunk.js.map