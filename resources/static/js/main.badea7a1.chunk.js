(this["webpackJsonptask-detail-widget"]=this["webpackJsonptask-detail-widget"]||[]).push([[0],{411:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore durante la connessione al server","adhocTimeout":"Il server @DhOC non risponde","adhocLogin":"Errore durante la connessione al server @DhOC","adhocConnectionNotFound":"Configurazione di connessione al server @DhOC assente per il vertice \\"{vertexId}-{vertexShortName}\\"","adhocSearch":"Errore durante la ricerca dei documenti @DhOC","adhocDownload":"Errore durante il recupero del documento @DhOC","attachment":{"codeAlreadyExists":"E\' gi\xe0 presente un allegato con il codice inserito"}},"message":{"status":"Lo stato \xe8 stato aggiornato","date":"La data \xe8 stata aggiornata","noteCreated":"La Nota e\' stata creata. ID: {{id}}","noteDeleted":"La Nota e\' stata cancellata. ID: {{id}}","attachmentAddedToTask":"","attachmentAdded":"L\'allegato e\' stato aggiunto","attachmentDeleted":"L\'allegato e\' stato eliminato","attachmentUpdated":"L\'allegato \xe8 stato aggiornato"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","delete":"Elimina","confirm":"Conferma","yes":"Si","no":"No","confirmOperationTitle":"Conferma operazione?","confirmOperationMessage":"Attenzione, procedere con l\'operazione?"},"validation":{"required":"{{field}} \xe8 obbligatorio","length":"La lunghezza deve essere di {{length}} caratteri"},"entities":{"detail":{"title":"Dettaglio del Task - {{id}}","progress":"% tempo disponibile","priority":"Priorita\'","low":"Bassa","medium":"Media","high":"Alta","action":"Azione {{from}} di {{to}}","view":"Vista","table":"Tabella","completionPercentage":"% di completamento"},"info":{"id":"ID","task":"TASK","startDate":"INIZIO","endDate":"FINE","description":"DESCRIZIONE","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","empty":"Non assegnato"},"task":{"changeDates":"Confermando l\'operazione verranno riadattate anche le date di tutte le azioni e sottoazioni legate a questo task, procedere?"},"action":{"detail":{"title":"Dettaglio dell\'Azione","goBack":"Vai al Task di questa azione","subactionInfo":"Sottoazione {{from}} di {{to}}","description":"DESCRIZIONE","noAction":"Non sono presenti Azioni","noSubaction":"Non sono presenti Sottoazioni"},"emptyDescription":"Questa azione non ha descrizione","current":"Azione corrente","subActions":"questa azione ha <0>{{count}} sottoazioni</0>","gotoDetail":"Dettaglio","action":"AZIONE","subaction":"SOTTOAZIONE","within":"ENTRO","state":"STATO","noStatus":"Aperto","popper":{"title":"Azione <0>in corso</0>","description":"L\' azione pu\xf2 essere completata solo se le azioni sono state completate","subAction":"Vai al dettaglio dell\'azione per consultare le sottoazioni"},"attachments":"Allegati","attachmentsPresent":"{{count}} Allegati presenti","expand":"Espandi","close":"Chiudi","note":"Note","notePresent":"{{count}} Note presenti","next":"Azione successiva","previous":"Azione precedente"},"attachment":{"folderDepartment":"Link EICloud","folderOffice":"Cartella Ufficio","attachmentDirNotPresent":"{{dir}} non presente","addAttachment":"Aggiungi allegato al Task","addAttachmentAction":"Aggiungi allegato all\' Azione ","files":"FILE ({{count}})","einetAttachments":"EInet ({{count}})","adhocAttachments":"@dhoc ({{count}})","addNote":"Aggiungi nota al Task","addNoteAction":"Aggiungi nota all\' Azione","note":"Nota {{from}} di {{to}}","dhoc":"Aggiungi da <0>@DhOC</0>","elcloud":"Aggiungi da <0>El Cloud</0>","dialog":{"attachment":{"titleDhoc":"Aggiungi un allegato da <0>@DhOC</0>","titleElCloud":"Aggiungi un allegato da <0>El Cloud</0>","protocolDhOc":"PROTOCOLLO","protocolDhOcPlaceholder":"Inserisci il n\xb0 di protocollo...","yearDhOc":"ANNO","yearDhOcPlaceholder":"Inserisci l\'anno di riferimento...","registryDhOc":"REGISTRO","registryDhOcPlaceholder":"Inserisci il registro di riferimento...","searchDhOC":"Cerca allegato","attachment":"Allegato...","notFound":"Allegato non trovato","add":"Aggiungi","cancel":"Annulla","dragAndDrop":"Trascina un file qui dentro","selectedFile":"File Selezionato","linkNextcloud":"Link NextCloud","linkNextcloudPlaceholder":"inserisci il link interno di file/cartella NextCloud..."}}},"table":{"empty":"Non sono presenti azioni","rowSelected":"Righe selezionate","pagination":{"rows":"Righe","rowsPerPage":"Elementi per pagina:","previous":"Precedente","next":"Sucessiva"}},"dialog":{"users":{"title":"Assegna","button":"Assegna ruolo","buttonClose":"Chiudi","search":"Cerca un utente...","assign":"Assegna a me"},"note":{"title":"Nuova Nota del Task","buttonPublish":"Pubblica Nota","placeholder":"Inserisci la nota..."}},"creation":{"taskDefinition":{"endDate":""}}}}')},412:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"validation":{"required":"{{field}} is required"},"entities":{"task":{"deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Tabella vuota"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},419:function(e,t,a){e.exports=a.p+"static/media/user.8a7d2253.jpg"},455:function(e,t,a){e.exports=a(528)},528:function(e,t,a){"use strict";a.r(t);var n=a(407),r=a(408),o=a(409),i=a(442),c=a(443),l=a(4),s=a(143),u=a(161),d=a(447),m=a(180),p=a(570),f=a(0),b=a.n(f),g=b.a.createContext(null),h="task.detail",v=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},E=a(35),O=a(313),y=a(19),x={it:a(411),en:a(412)},j=Object.keys(x).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(E.a)({},t,Object(E.a)({},"translation",x[t])))}),{}),C=(O.a.t,function(e){!function(e,t){O.a.use(y.b).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:j,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),k=a(58),w=a(25),S=a.n(w),A=a(413),T=a.n(A),N=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},D=a(188),I=a(52),R=a(12),P=Object(f.createContext)([{loading:!1},function(){}]),U=function(){var e=Object(f.useContext)(P),t=Object(R.a)(e,2),a=t[0],n=t[1];return{isLoading:a.loading,setLoading:function(e){n({loading:e})}}},F=a(33),z=a(7),B=a.n(z),M=a(11),L=["responsible","accountable","consulted","informed"],W=function e(t){var a=[];return t.forEach((function(t){var n=function(e){return Array.from(L).reduce((function(t,a){return e[a]&&t.push(e[a].toUpperCase()),t}),[])}(t);if(a=[].concat(Object(F.a)(a),Object(F.a)(n)),null===t||void 0===t?void 0:t.subActions){var r=e(t.subActions);a=[].concat(Object(F.a)(a),Object(F.a)(r))}})),Object(F.a)(new Set(a))},V=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},H=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r,o=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!n){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r,o,i=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,fetch(t,a);case 3:if(200!==(r=e.sent).status){e.next=8;break}return o=r.headers.get("Content-Disposition").split("filename=")[1],r.blob().then((function(e){var t=window.URL.createObjectURL(e);if(n&&o.toLowerCase().endsWith(".pdf")){window.open().location.href=t}else{var a=document.createElement("a");a.href=t,a.download=o,a.click()}})),e.abrupt("return",null);case 8:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("users/fiscalCode","/").concat(a),n&&(r+="?loadEdoTree=true"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(r,o));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(M.a)(B.a.mark((function e(t){var a,n,r,o,i,c=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{page:0,pageSize:40},n=c.length>2?c[2]:void 0,r=c.length>3&&void 0!==c[3]&&c[3],o="".concat(t,"/users?informedOrConsulted=").concat(r,"&sortBy=lastname,firstname,id"),a&&(o+="&page=".concat(a.page,"&size=").concat(a.pageSize)),n&&(o+="&globalSearch=".concat(n)),i=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(o,i));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=Object(f.createContext)([{},function(){}]),J=function(){var e=Object(f.useContext)(q),t=Object(R.a)(e,2),a=t[0],n=t[1],r=a.serviceUrl,o=a.usersPresent,i=a.logged,c=Object(y.c)().t,s=function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{users:e})}))},u=function(){var e=Object(M.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.map((function(e){return G(r,e.toUpperCase(),e===t)})),Promise.all(a).then((function(e){var t=e.reduce((function(e,t){var a,n,r=t.payload,o="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[r.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},r),{},{role:o}),e}),{});s(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(M.a)(B.a.mark((function e(t,o,s){var u,d,m,p,f,b,g,h,v,O,y,x;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(r,t,o,s);case 3:u=e.sent,d=u.payload,m=u.totalPages,p=u.totalElements,f=u.numberOfElements,b=u.number,g=u.size,h=u.first,v=u.last,d&&(O=d.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r}),e}),{}),y=a.users[i],x=Object.keys(O).find((function(e){var t;return(null===(t=O[e])||void 0===t?void 0:t.fiscalCode.toUpperCase())===i})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{users:x?O:Object(l.a)(Object(l.a)({},O),{},Object(E.a)({},null===y||void 0===y?void 0:y.fiscalCode.toUpperCase(),y)),pagination:{totalPages:m,totalElements:p,numberOfElements:f,number:b,size:g,first:h,last:v}})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:c("error.dataLoading"),message:null}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{logged:a.logged,vertexId:a.vertexId,vertexShortName:a.vertexShortName,users:a.users,usersPresent:a.usersPresent,loadUsersPresent:a.loadUsersPresent,serviceUrl:a.serviceUrl,setUsers:s,setUsersPresent:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{usersPresent:Object(F.a)(new Set(t.usersPresent.concat(e)))})}))},setLoadUserPresent:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{loadUsersPresent:e})}))},fetchUser:d,fetchUserPresent:u}},Y=Object(f.createContext)([{},function(){}]),Z=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a.id),r=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/actions"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/actions/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/subactions/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/actions/").concat(a.id),r=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/subactions/").concat(a.id),r=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/actions/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/actions/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/notes/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"DELETE"}),e.abrupt("return",H(n,r,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/setCompletion"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/dates"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(f.useContext)(Y),t=Object(R.a)(e,2),a=t[0],n=t[1],r=U().setLoading,o=J().setUsersPresent,i=Object(y.c)().t,c=a.serviceUrl,s=function(){var e=Object(M.a)(B.a.mark((function e(t){var a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,Z(c,t);case 4:a=e.sent,o=a.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:o})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:i("error.dataLoading")})}));case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),o={value:a},e.next=5,se(c,t,o);case 5:e.sent.payload.id&&n((function(e){return Object(l.a)(Object(l.a)({},e),{},{completionPercentage:a,message:i("message.status")})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:i("error.dataLoading")})}));case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(M.a)(B.a.mark((function e(t){var a,s,u,d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,X(c,t);case 4:if(a=e.sent,console.log("updateTask",a),!a.payload){e.next=14;break}return e.next=9,Z(c,t.id);case 9:s=e.sent,u=s.payload,d=s.metadata,m=Object(F.a)(new Set(Array.from(L).reduce((function(e,t){return u[t]&&e.push(u[t]),e}),[]))),o(m),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:u,metadata:d,edoResponsible:u.responsible,usersSelected:L.reduce((function(e,t){return e[t]=u[t],e}),{}),error:null})}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:i("error.dataLoading")})}));case 20:return e.prev=20,r(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,16,20,23]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(M.a)(B.a.mark((function e(t,a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,$(c,t,{status:a});case 4:e.sent.payload.id&&(s(t),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:i("message.status")})}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:i("error.dataLoading")})}));case 12:return e.prev=12,r(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(M.a)(B.a.mark((function e(t,a,o){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,o),e.prev=1,r(!0),e.next=5,ue(c,t,Object(E.a)({},a,o));case 5:e.sent.payload.id&&(s(t),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:i("message.date")})}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:i("error.dataLoading")})}));case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{usersTask:a.usersTask,task:a.task,metadata:a.metadata,edoResponsible:a.edoResponsible,error:a.error,message:a.message,usersSelected:a.usersSelected,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},updateTaskCompletionPercentage:u,updateTask:d,updateTaskStatus:m,updateTaskDates:p,fetchTask:s}},me=Object(f.createContext)([{},function(){}]),pe=function(e){var t=e.children,a=Object(f.useState)({view:"table"}),n=Object(R.a)(a,2),r=n[0],o=n[1];return b.a.createElement(me.Provider,{value:[r,o]},t)},fe=a(316),be=Object(fe.a)({spinner:{zIndex:9999,display:"inline-block",position:"absolute",top:"30%",left:"50%",width:"80px",height:"80px","& div":{transformOrigin:"40px 40px",animation:"$spinner 1.2s linear infinite"},"& div::after":{content:'" "',display:"block",position:"absolute",top:"3px",left:"37px",width:"5px",height:"18px",borderRadius:"20%",background:"currentColor"},"& div:nth-child(1)":{transform:"rotate(0deg)",animationDelay:"-1.1s"},"& div:nth-child(2)":{transform:"rotate(30deg)",animationDelay:" -1s"},"& div:nth-child(3)":{transform:"rotate(60deg)",animationDelay:" -0.9s"},"& div:nth-child(4)":{transform:"rotate(90deg)",animationDelay:" -0.8s"},"& div:nth-child(5)":{transform:"rotate(120deg)",animationDelay:" -0.7s"},"& div:nth-child(6)":{transform:"rotate(150deg)",animationDelay:" -0.6s"},"& div:nth-child(7)":{transform:"rotate(180deg)",animationDelay:" -0.5s"},"& div:nth-child(8)":{transform:"rotate(210deg)",animationDelay:" -0.4s"},"& div:nth-child(9)":{transform:"rotate(240deg)",animationDelay:" -0.3s"},"& div:nth-child(10)":{transform:"rotate(270deg)",animationDelay:" -0.2s"},"& div:nth-child(11)":{transform:"rotate(300deg)",animationDelay:" -0.1s"},"& div:nth-child(12)":{transform:"rotate(330deg)",animationDelay:" 0s"}},"@keyframes spinner":{from:{opacity:0},to:{opacity:1}}}),ge=function(){var e=be();return b.a.createElement("div",{className:e.spinner,"data-testid":"id-spinner"},b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null))},he=a(163),ve=a(293),Ee=a(104),Oe=a(562),ye=a(379),xe=a(131),je=a.n(xe),Ce=a(118),ke=a.n(Ce),we=a(578),Se=a(585),Ae=a(47),Te=Object(f.createContext)([{},function(){}]),Ne=function(){var e,t,a=Object(f.useContext)(Te),n=Object(R.a)(a,2),r=n[0],o=n[1],i=de(),c=i.task,s=i.fetchTask,u=J().setUsersPresent,d=Object(y.c)().t,m=r.serviceUrl,p=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r,i,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"action"!==t){e.next=7;break}return e.next=4,ae(m,a);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,ne(m,a);case 9:n=e.sent;case 10:if(!n.payload.id){e.next=19;break}return e.next=13,Q(m,c.id);case 13:r=e.sent,i=r.payload,s=W(i),u(s),r=i.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:r,message:d("message.status")})}));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("errore",e.t0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"action"!==t){e.next=7;break}return e.next=4,ee(m,a,{status:n});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,te(m,a,{status:n});case 9:r=e.sent;case 10:if(!r.payload.id){e.next=16;break}return s(c.id),e.next=14,Q(m,c.id);case 14:i=e.sent,o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:i.payload,message:d("message.status")})}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(M.a)(B.a.mark((function e(t,a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("action",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(M.a)(B.a.mark((function e(t,a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("subActions",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return{taskId:r.taskId,usersActions:r.usersActions,actions:r.actions,subActions:null!==(e=null===(t=r.actions[null===r||void 0===r?void 0:r.selected])||void 0===t?void 0:t.subActions)&&void 0!==e?e:[],error:r.error,message:r.message,clearError:function(){return o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){o((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},setSelectAction:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{selected:e})}))},actionSelected:r.actions[r.selected],selectedAction:r.selectedAction,updateActionStatus:g,updateSubActionStatus:h,updateAction:p,pagination:r.pagination,loading:r.loading}},De=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",H(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"DELETE"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Re=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(a,"?").concat("referenceType=").concat(n),o=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("adhoc/search"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var r,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("adhoc/download"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null,responseType:"blob"}),e.abrupt("return",K(r,o,n));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(M.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("all/types"),n=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",H(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n,r){var o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"/").concat(a),i=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:JSON.stringify({referenceId:r,code:n})}),e.abrupt("return",H(o,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Be=Object(f.createContext)([{},function(){}]),Me=function(){var e=Object(f.useContext)(Be),t=Object(R.a)(e,2),a=t[0],n=t[1],r=U().setLoading,o=Object(y.c)().t,i=a.serviceUrlAttachments,c=J(),s=c.logged,u=c.vertexId,d=c.vertexShortName,m=function(){var e=Object(M.a)(B.a.mark((function e(t,c){var s,u;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,Re(i,t,c);case 4:s=e.sent,u=s.payload.attachments,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:u})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(M.a)(B.a.mark((function e(t,c,s,u){var d,m,p,f,b;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d="".concat(i,"/").concat(t),m={data:c,referenceId:u,referenceType:s},e.prev=2,r(!0),e.next=6,De(d,m);case 6:if(!e.sent.payload.id){e.next=14;break}return e.next=10,Re(i,u,s);case 10:p=e.sent,f=p.payload.attachments,b=o("message.attachmentAdded")+(a.allReferenceType.TASK===s?" al task":" all' azione"),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:f,message:b})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 19:return e.prev=19,r(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("nextcloud",t,a,n);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("adhoc",{items:t},a,n);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(M.a)(B.a.mark((function e(t,c,s,u){var d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,ze(i,t,c,s);case 4:if(!e.sent.payload){e.next=11;break}return e.next=8,Re(i,s,u);case 8:d=e.sent,m=d.payload.attachments,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:m,message:o("message.attachmentUpdated")})}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"409"===e.t0.message?n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.attachment.codeAlreadyExists"),message:null})):n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 16:return e.prev=16,r(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(M.a)(B.a.mark((function e(t,c,s){var u,d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,Ie(i,t);case 4:if(!e.sent.payload.id){e.next=12;break}return e.next=8,Re(i,s,c);case 8:u=e.sent,d=u.payload.attachments,m=o("message.attachmentDeleted")+(a.allReferenceType.TASK===c?" dal task ":" dall'azione"),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:d,message:m})}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 17:return e.prev=17,r(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(e,t){var r="dataLoading";-1!==e.toString().toLowerCase().indexOf("time-out")?r="adhocTimeout":-1!==e.toString().toLowerCase().indexOf("bad request")?r="adhocLogin":-1!==e.toString().toLowerCase().indexOf("precondition failed")?r="adhocConnectionNotFound":-1!==e.toString().toLowerCase().indexOf("not found")&&(r="adhoc".concat(t));var i=o("error.".concat(r)).replace("{vertexId}",u).replace("{vertexShortName}",d);n(Object(l.a)(Object(l.a)({},a),{},{error:i,message:null}))},O=function(){var e=Object(M.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),a=Object(l.a)(Object(l.a)({},t),{},{cf:s,vertexId:u}),e.next=5,Pe(i,a);case 5:return n=e.sent,e.abrupt("return",n.payload.items);case 9:return e.prev=9,e.t0=e.catch(0),E(e.t0,"Search"),e.abrupt("return",[]);case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(M.a)(B.a.mark((function e(t,a,n){var o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),o={id:t,name:a,cf:s,vertexId:u},e.next=5,Ue(i,o,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E(e.t0,"Download");case 10:return e.prev=10,r(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{attachments:a.attachments,fetchAttachments:m,postNextcloudAttachment:b,postAdhocAttachment:g,searchAdhocAttachment:O,updateAttachmentCode:h,deleteAttachment:v,downloadAdhocAttachment:x,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},allClouds:a.allClouds,allReferenceType:a.allReferenceType,EINET_DIRECTORY:a.EINET_DIRECTORY,previewPdf:a.previewPdf}},Le=Object(f.createContext)([{},function(){}]),We=function(){var e=Object(f.useContext)(Le),t=Object(R.a)(e,2),a=t[0],n=t[1];return{isOpenDialog:a.openDialog,userSelected:a.userSelected,userRole:a.userRole,type:a.type,setAllState:function(e){return n(e)},setType:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{type:e})}))},setUserRole:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{userRole:e})}))},setOpenDialog:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{openDialog:e})}))},setUserSelected:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{userSelected:e})}))}}},Ve=a(565),He=a(567),Ke=a(566),Ge=a(307),_e=a.n(Ge),qe=a(245),Je=a.n(qe),Ye=a(5),Ze=a.n(Ye),Xe=a(235),$e=a(243),Qe=a.n($e),et=a(155),tt=a.n(et),at=a(198),nt=a.n(at),rt=a(373),ot=a(414),it=a.n(ot),ct=a(154),lt=a.n(ct),st=a(242),ut=a.n(st),dt={LENGTH_TASK_ATTACHMENT_CODE:4,ADHOC_MIN_YEAR:2012,ADHOC_DEFAULT_REGISTRY:"REG"},mt=function(e){var t=e.attachmentCode,a=e.referenceId,n=e.onConfirm,r=Object(y.c)().t,o=Object(f.useState)({active:!1,value:t,error:!1}),i=Object(R.a)(o,2),c=i[0],s=i[1];return b.a.createElement(b.a.Fragment,null,c.active?b.a.createElement(b.a.Fragment,null,b.a.createElement(Xe.a,{id:"saveBtn","aria-label":"save",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1})})),n(c.value)},disableRipple:!0,disabled:c.error},b.a.createElement(lt.a,null)),b.a.createElement(Xe.a,{id:"cancelBtn","aria-label":"delete",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1,error:!1,value:t})}))}},b.a.createElement(it.a,null)),b.a.createElement(rt.a,{variant:"outlined",error:c.error,type:"text",id:"code",name:"name",value:c.value,inputProps:{maxLength:dt.LENGTH_TASK_ATTACHMENT_CODE},helperText:c.error?r("validation.length",{length:dt.LENGTH_TASK_ATTACHMENT_CODE}):"",onChange:function(e){e.target.value.toString().trim().length!==dt.LENGTH_TASK_ATTACHMENT_CODE?s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!0,value:e.target.value})})):s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!1,value:e.target.value})}))}})):b.a.createElement(b.a.Fragment,null,b.a.createElement(Xe.a,{id:"editBtn","aria-label":"edit",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!0})}))}},b.a.createElement(ut.a,null)),b.a.createElement("span",null,a,"-",t)))};mt.defaultProps={};var pt=mt,ft=Object(fe.a)((function(e){return{borderBox:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4},icon:{color:"#5a6470",padding:e.spacing(1),border:0,borderStyle:"solid"},iconAction:{display:"flex",alignItems:"baseline",flexWrap:"nowrap",flexDirection:"row"},iconAndTextAction:{display:"flex",alignItems:"center",flexWrap:"nowrap",flexDirection:"row"},attachment:{width:"60%",border:0,borderStyle:"solid"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)",overflow:"hidden",textOverflow:"ellipsis"},marginBox:{marginBottom:"8px"}}})),bt=function(e){var t=e.id,a=e.code,n=e.filename,r=e.signature,o=e.cloudType,i=e.allClouds,c=e.referenceType,l=e.referenceId,s=Me().updateAttachmentCode,u=Me().deleteAttachment,d=de().metadata,m=Me().downloadAdhocAttachment,p=ft(),f=n,g=n;return g.length>60&&(g="".concat(n.substring(0,17),"...").concat(n.substring(n.length-40))),b.a.createElement(ve.a,{className:"".concat(p.borderBox," ").concat(p.marginBox),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ve.a,{p:1,className:p.icon},b.a.createElement(Qe.a,null)),b.a.createElement(ve.a,{className:p.attachment},o===i.NEXTCLOUD?b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary",title:f,noWrap:!0},b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:f,className:p.link},g)):b.a.createElement(b.a.Fragment,null,r?b.a.createElement(Ee.a,{title:g,component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"}},r):null,b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary",title:g,component:"div",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return m(t,null,!0)}},g))),b.a.createElement(ve.a,{className:"".concat(p.icon," ").concat(p.iconAndTextAction)},b.a.createElement(pt,{attachmentId:t,attachmentCode:a,referenceId:l,onConfirm:function(e){return s(t,e,l,c)}})),b.a.createElement(ve.a,{className:"".concat(p.icon," ").concat(p.iconAction)},o===i.NEXTCLOUD?b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:f,className:p.link},b.a.createElement(nt.a,null)):b.a.createElement(nt.a,{style:{cursor:"pointer"},onClick:function(){return m(t,null,!0)}}),d.canRemoveAttachments?b.a.createElement(Xe.a,{"aria-label":"delete",onClick:function(){return u(t,c,l)},disableRipple:!0},b.a.createElement(tt.a,null)):null))};bt.defaultProps={referenceType:null,signature:null};var gt=bt,ht=a(2),vt=a(557),Et=a(539),Ot=a(153),yt=a(6),xt=a(244),jt=a.n(xt),Ct=a(156),kt=a.n(Ct),wt=a(84),St=a.n(wt),At={success:lt.a,error:jt.a,info:kt.a},Tt={success:3e3,error:5e3,info:5e3},Nt=function e(t){var a=t.className,n=t.classes,r=t.status,o=t.message,i=t.onClose,c=t.anchorOrigin,l=r||e.INFO,s=At[l],u=Tt[l],d=Object(f.useState)(!1),m=Object(R.a)(d,2),p=m[0],g=m[1],h=b.a.createElement("span",{className:n.message},b.a.createElement(s,{className:Object(ht.a)(n.icon,n.iconStatus)}),o);Object(f.useEffect)((function(){o&&g(!0)}),[o]);var v=function(e,t){"clickaway"!==t&&(g(!1),i&&i())};return b.a.createElement(vt.a,{open:p,onClose:v,autoHideDuration:u,anchorOrigin:c},b.a.createElement(Et.a,{className:Object(ht.a)(n[l],a),message:h,action:[b.a.createElement(Xe.a,{key:"close","aria-label":"close",color:"inherit",onClick:v},b.a.createElement(St.a,{className:n.icon}))]}))};Nt.SUCCESS="success",Nt.ERROR="error",Nt.defaultProps={message:null,className:"",status:Nt.INFO="info",onClose:function(){},anchorOrigin:{vertical:"bottom",horizontal:"center"}};var Dt=Object(yt.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:Ot.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(Nt),It=a(558),Rt=a(536),Pt=a(541),Ut=a(375),Ft=a(559),zt=a(374),Bt=Object(zt.a)({highlight:{color:"#efb868",fontWeight:600}}),Mt=function(e){var t=e.onClose,a=e.open,n=function(e){t(e)},r=Object(y.c)().t,o=Bt();return b.a.createElement(It.a,{onClose:t,"aria-labelledby":"dialog-choose-attachment",open:a},b.a.createElement(Rt.a,null,b.a.createElement(Pt.a,{button:!0,onClick:function(){return n("dhoc")},key:"dhoc"},b.a.createElement(Ut.a,null,b.a.createElement(y.a,{t:r,i18nKey:"entities.attachment.dhoc"},[b.a.createElement("span",{key:0,className:o.highlight})]))),b.a.createElement(Ft.a,null),b.a.createElement(Pt.a,{button:!0,onClick:function(){return n("elcloud")},key:"elcloud"},b.a.createElement(Ut.a,null,b.a.createElement(y.a,{t:r,i18nKey:"entities.attachment.elcloud"},[b.a.createElement("span",{key:0,className:o.highlight})])))))},Lt=a(560),Wt=a(561),Vt=a(563),Ht=a(402),Kt=a(99),Gt=a.n(Kt),_t=a(262),qt=a(260),Jt=function(e){var t=e.title,a=e.children,n=Object(qt.a)(e,["title","children"]);return b.a.createElement(ve.a,n,b.a.createElement(ve.a,{border:0,textAlign:"left",p:1},b.a.createElement(Ee.a,{variant:"subtitle2",color:"textSecondary"},t)),b.a.createElement(ve.a,{border:0,textAlign:"left"},a))},Yt=a(300),Zt=a(306),Xt=Object(fe.a)((function(e){return{formControl:{backgroundColor:"#ffffff","& div":{height:"56px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.primary},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},highlight:{color:["#efb868","!important"]}}})),$t=function(e){var t=e.name,a=e.options,n=e.emptyOption,r=e.initialValue,o=e.highlightKey,i=e.disabledKey,c=e.onChange,l=e.disabled,s=e.register,u=e.dataTestId,d=Object(f.useState)(null!==r&&void 0!==r?r:""),m=Object(R.a)(d,2),p=m[0],g=m[1];Object(f.useEffect)((function(){r&&g(r)}),[r]);var h=Xt();return b.a.createElement(Yt.a,{variant:"outlined",className:h.formControl,fullWidth:!0},b.a.createElement(Zt.a,{disabled:l,native:!0,inputRef:s,value:p,onChange:function(e){e.target.value&&String(e.target.value)!==String(p)&&(g(e.target.value),c&&c(e.target.value))},name:t,inputProps:{className:p===o?h.highlight:null,"data-testid":u}},n?b.a.createElement("option",{value:"",disabled:!0},n):null,a.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id,disabled:i===e.id,className:e.id===o?h.highlight:null},e.value)}))))};$t.defaultProps={initialValue:"",emptyOption:void 0,highlightKey:"",disabledKey:void 0,onChange:void 0,disabled:!1,register:function(){}};var Qt=$t,ea=a(546),ta=a(302),aa=function(e){var t,a=e.register,n=e.errors,r=e.name,o=e.placeholder,i=e.watch,c=e.debug,l=e.showCountCaracthers,s=e.countCaracthers,u=e.multiline,d=e.rows,m=e.rowsMax,p=e.initialValue,g=e.setValue,h=e.cssClass,v=e.type;return c&&console.log("watch",i(r)),Object(f.useEffect)((function(){p&&g&&g(r,p)}),[p,g,r]),b.a.createElement(Yt.a,{variant:"outlined",fullWidth:!0,error:!Object(Ae.isEmpty)(n[r])},b.a.createElement(ve.a,{position:"relative",width:1},b.a.createElement(ea.a,{type:v,fullWidth:!0,id:"component-".concat(r),placeholder:o,inputRef:a,name:r,multiline:u,rows:d,rowsMax:m,className:h}),l?b.a.createElement(ve.a,{position:"absolute",bottom:0,right:"10px"},b.a.createElement(Ee.a,{variant:"caption",color:"textSecondary"},i(r)?i(r).length:0," / ",s)):null),b.a.createElement(ta.a,{id:"component-".concat(r,"-error-text")},null===(t=n[r])||void 0===t?void 0:t.message))};aa.defaultProps={debug:!1,multiline:!1,showCountCaracthers:!1,countCaracthers:0,rows:2,rowsMax:4,initialValue:"",cssClass:"",type:"text"};var na=aa,ra=a(67),oa=a.n(ra),ia=Object(fe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:450,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:oa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:oa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},adhocItemsFound:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:".5rem",paddingLeft:"1rem",margin:".3rem",color:"#5a6470"},boxAdhocItemsFound:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between","& .Mui-checked":{color:"#b68902"}},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},uppercase:{"& input":{textTransform:"uppercase"}}}})),ca=function(e){return b.a.createElement(Gt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(he.a,e))},la=function(e){var t=e.onClose,a=e.open,n=e.referenceId,r=e.referenceType,o=(new Date).getFullYear(),i=ia(),c=Object(y.c)().t,s=Object(f.useState)(!0),u=Object(R.a)(s,2),d=u[0],m=u[1],p=Me(),g=p.searchAdhocAttachment,h=p.postAdhocAttachment,v=p.downloadAdhocAttachment,E=Object(f.useState)(null),O=Object(R.a)(E,2),x=O[0],j=O[1],C=Object(f.useState)(new Set),k=Object(R.a)(C,2),w=k[0],S=k[1],A=Object(f.useState)(!0),T=Object(R.a)(A,2),N=T[0],D=T[1],I=Object(_t.a)({mode:"all"}),P=I.register,U=I.handleSubmit,F=I.errors,z=I.setValue,L=I.watch,W=I.formState,V=function(){j(null),S(new Set),D(!0),t()},H=function(){var e=Object(M.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Array.from(w).forEach((function(e){return t.push(x[e])})),e.next=4,h(t,r,n);case 4:V();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(M.a)(B.a.mark((function e(t,a){var n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),!W.isSubmitting){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,g(Object(l.a)(Object(l.a)({},t),{},{registry:null===(n=String(t.registry))||void 0===n?void 0:n.toUpperCase()}));case 6:r=e.sent,j(r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){if(!Object(Ae.isEmpty)(L())){var e=Object.keys(L()).filter((function(e){return""===L(e)}));m(0!==e.length)}}),[L]);var G=Object(f.useCallback)((function(){return Array(o-dt.ADHOC_MIN_YEAR+1).fill().map((function(e,t){return dt.ADHOC_MIN_YEAR+t})).map((function(e){return{id:e,value:e}}))}),[o]),_=function(e,t){return b.a.createElement(ve.a,{className:i.adhocItemsFound,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start",key:t+e.name},b.a.createElement(Ee.a,{title:"Scarica ".concat(e.name),component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return v(e.id,e.name,!0)}},e.signature),b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary",title:"Scarica ".concat(e.name),style:{cursor:"pointer"},noWrap:!0,onClick:function(){return v(e.id,e.name,!0)}},e.name),b.a.createElement(ve.a,{className:i.boxAdhocItemsFound},b.a.createElement(nt.a,{style:{marginRight:"1rem",cursor:"pointer"},onClick:function(){return v(e.id,e.name,!0)}}),b.a.createElement(Ht.a,{onChange:function(e){return function(e,t){var a=w;t?a.add(e):a.delete(e),S(a),D(0===a.size)}(t,e.target.checked)}})))};return b.a.createElement(It.a,{fullWidth:!0,maxWidth:"sm",onClose:V,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:ca},b.a.createElement(Lt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:V},b.a.createElement("div",null,b.a.createElement(y.a,{t:c,i18nKey:"entities.attachment.dialog.attachment.titleDhoc"},[b.a.createElement("span",{key:0,className:i.highlight})])),b.a.createElement(Xe.a,{"aria-label":"close",className:i.closeButton,onClick:V},b.a.createElement(St.a,null))),b.a.createElement(Wt.a,null,b.a.createElement("form",{onSubmit:U(K)},b.a.createElement(ve.a,{className:i.boxEditor},b.a.createElement(Oe.a,{container:!0},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Jt,{title:c("entities.attachment.dialog.attachment.protocolDhOc")},b.a.createElement(na,{type:"number",name:"protocol",placeholder:c("entities.attachment.dialog.attachment.protocolDhOcPlaceholder"),register:P({required:{value:!0,message:c("validation.required")}}),watch:L,setValue:z,errors:F}))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Jt,{title:c("entities.attachment.dialog.attachment.yearDhOc")},b.a.createElement(Qt,{register:P({required:{value:!0,message:c("validation.required")}}),name:"year",emptyOption:void 0,initialValue:o,options:G(),errors:F}))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Jt,{title:c("entities.attachment.dialog.attachment.registryDhOc"),className:i.uppercase},b.a.createElement(na,{name:"registry",placeholder:c("entities.attachment.dialog.attachment.registryDhOcPlaceholder"),register:P({required:{value:!0,message:c("validation.required")}}),initialValue:dt.ADHOC_DEFAULT_REGISTRY,watch:L,setValue:z,errors:F}))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{textAlign:"center"},b.a.createElement(ye.a,{type:"submit",variant:"outlined",className:i.buttonSearch,disabled:d},c("entities.attachment.dialog.attachment.searchDhOC"))))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{textAlign:"center"},null===x||void 0===x?b.a.createElement(b.a.Fragment,null):0===x.length?b.a.createElement(ve.a,{className:i.boxAttachment},b.a.createElement(Ee.a,{variant:"h6",component:"div",color:"textSecondary"},c("entities.attachment.dialog.attachment.notFound"))):x.map((function(e,t){return _(e,t)}))))))),b.a.createElement(Vt.a,{className:i.dialogActions},b.a.createElement(ye.a,{disabled:N,onClick:H,className:i.button},c("entities.attachment.dialog.attachment.add"))))};la.defaultProps={referenceType:null,referenceId:null};var sa=la,ua=a(440),da=Object(fe.a)((function(e){return{dropZone:{"& .MuiDropzoneArea-root":{minHeight:160,position:"relative"},"& .MuiDropzoneArea-icon":{color:oa.a[300]}},dropZoneArea:{"&.MuiDropzoneArea-root":{minHeight:160,position:"relative",background:"lightgrey",color:oa.a[300],cursor:"default"},"& .MuiDropzoneArea-icon":{color:oa.a[300]}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:oa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:oa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},previewChip:{minWidth:160,maxWidth:210}}})),ma=function(e){return b.a.createElement(Gt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(he.a,e))},pa=function(e){var t=e.onClose,a=e.open,n=e.referenceId,r=e.referenceType,o=da(),i=Object(y.c)().t,c=Me(),l=c.attachments,s=c.postNextcloudAttachment,u=Object(f.useState)(!0),d=Object(R.a)(u,2),m=d[0],p=d[1],g=Object(_t.a)({mode:"all"}),h=g.register,v=g.errors,E=g.setValue,O=g.watch;Object(f.useEffect)((function(){Object(Ae.isEmpty)(O())||(0===Object.keys(O()).filter((function(e){return""===O(e)})).length?p(!1):p(!0))}),[O]);var x=function(){var e=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object.values(O())[0],r,n);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(It.a,{fullWidth:!0,maxWidth:"sm",onClose:t,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:ma},b.a.createElement(Lt.a,{className:o.dialogTitle,id:"form-dialog-title",onClose:t},b.a.createElement("div",null,b.a.createElement(y.a,{t:i,i18nKey:"entities.attachment.dialog.attachment.titleElCloud"},[b.a.createElement("span",{key:0,className:o.highlight})])),b.a.createElement(Xe.a,{"aria-label":"close",className:o.closeButton,onClick:t},b.a.createElement(St.a,null))),b.a.createElement(Wt.a,null,b.a.createElement(ua.a,{dropzoneClass:o.dropZoneArea,dialogProps:{"aria-labelledby":"dialog-elcloud",disableEnforceFocus:!0,PaperComponent:ma,className:o.dropZoneArea},dropzoneProps:{disabled:!0},maxWidth:"sm",fileObjects:l,cancelButtonText:"",submitButtonText:"",dropzoneText:i("entities.attachment.dialog.attachment.dragAndDrop"),maxFileSize:5e6,filesLimit:1,open:a,onAdd:function(e){t(e)},onClose:t,showPreviews:!1,showFileNamesInPreview:!1,showAlerts:!1,showFileNames:!1,showPreviewsInDropzone:!1}),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Jt,{title:i("entities.attachment.dialog.attachment.linkNextcloud")},b.a.createElement(na,{name:"nextcloudLink",placeholder:i("entities.attachment.dialog.attachment.linkNextcloudPlaceholder"),register:h({required:{value:!0,message:i("validation.required")}}),watch:O,setValue:E,errors:v})))),b.a.createElement(Vt.a,{className:o.dialogActions},b.a.createElement(ye.a,{className:o.button,disabled:m,onClick:x},i("entities.attachment.dialog.attachment.add"))))};pa.defaultProps={referenceType:null,referenceId:null};var fa=pa,ba=Object(fe.a)((function(e){return{boxContainer:{border:0,borderStyle:"solid",borderColor:"red",width:"100%",textAlign:"left"},button:{color:"#586473"},boxButtons:{border:"0px solid red",margin:[[e.spacing(1),0]],display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(1)},buttonLink:{backgroundColor:"#b68902","& span":{color:"#fff",textTransform:"none",padding:e.spacing(1)},"&:hover":{backgroundColor:"#b68902"}}}})),ga=function(e){var t,a,n=e.referenceId,r=e.referenceType,o=e.domain,i=ba(),c=Object(y.c)().t,l=Object(f.useState)(!1),s=Object(R.a)(l,2),u=s[0],d=s[1],m=Object(f.useState)(!1),p=Object(R.a)(m,2),g=p[0],h=p[1],v=Object(f.useState)(!1),E=Object(R.a)(v,2),O=E[0],x=E[1],j=Me(),C=j.fetchAttachments,k=j.attachments,w=j.EINET_DIRECTORY,S=j.allClouds,A=j.error,T=j.message,N=j.clearError,D=j.clearMessage,I=J().users,P=de().edoResponsible;Object(f.useEffect)((function(){n&&r&&C(n,r)}),[n,r]);var U,F,z,B,M,L,W,V,H=null===(t=k.filter((function(e){return e.file.cloudType===S.NEXTCLOUD})))||void 0===t?void 0:t.sort((function(e,t){return e.id>t.id?-1:1})),K=null===(a=k.filter((function(e){return e.file.cloudType===S.ADHOC})))||void 0===a?void 0:a.sort((function(e,t){return e.id>t.id?-1:1}));I&&(U=2===(null===(F=I[P])||void 0===F||null===(z=F.edo)||void 0===z||null===(B=z.parentEdo)||void 0===B?void 0:B.type.id)?null===(M=I[P])||void 0===M||null===(L=M.edo)||void 0===L||null===(W=L.parentEdo)||void 0===W||null===(V=W.edoInfos[0])||void 0===V?void 0:V.value:null);return b.a.createElement(b.a.Fragment,null,null===T&&null===A?null:b.a.createElement(Dt,{message:T||A,onClose:function(){return T?D():N()},status:T?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(ve.a,{className:i.boxContainer},b.a.createElement(ve.a,{textAlign:"center"},b.a.createElement(ye.a,{size:"large",variant:"contained",disableRipple:!0,className:i.button,startIcon:b.a.createElement(Je.a,null),onClick:function(){return d(!0)}},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},c("ACTION"===o?"entities.attachment.addAttachmentAction":"entities.attachment.addAttachment")))),b.a.createElement(ve.a,{className:i.boxButtons},U?b.a.createElement(ye.a,{disableRipple:!0,className:i.buttonLink,href:"".concat(w).concat(U),target:"_blank"},b.a.createElement(Ee.a,{variant:"body2"},c("entities.attachment.folderDepartment"))):b.a.createElement(Ee.a,{variant:"body2",color:"error"},c("entities.attachment.attachmentDirNotPresent",{dir:c("entities.attachment.folderDepartment")}))),b.a.createElement(ve.a,{textAlign:"left",marginTop:2},b.a.createElement(ve.a,{p:1},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},c("entities.attachment.einetAttachments",{count:H.length}))),H.map((function(e){return b.a.createElement(ve.a,{key:e.id},b.a.createElement(gt,{id:e.id,code:e.code,filename:e.file.name,signature:e.file.signature,cloudType:e.file.cloudType,allClouds:S,referenceId:n,referenceType:r}))}))),b.a.createElement(ve.a,{textAlign:"left",marginTop:2},b.a.createElement(ve.a,{p:1},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},c("entities.attachment.adhocAttachments",{count:K.length}))),K.map((function(e){return b.a.createElement(ve.a,{key:e.id},b.a.createElement(gt,{id:e.id,code:e.code,filename:e.file.name,signature:e.file.signature,cloudType:e.file.cloudType,allClouds:S,referenceId:n,referenceType:r}))}))),b.a.createElement(Mt,{onClose:function(e){d(!u),"dhoc"===e?h(!0):"elcloud"===e&&x(!0)},open:u}),b.a.createElement(sa,{onClose:function(){return h(!1)},open:g,referenceId:n,referenceType:r}),b.a.createElement(fa,{onClose:function(){return x(!1)},open:O,referenceId:n,referenceType:r})))};ga.defaultProps={referenceType:null,referenceId:null,domain:Ze.a.string};var ha=ga,va=Object(f.createContext)([{},function(){}]),Ea=function(){var e=Object(f.useContext)(va),t=Object(R.a)(e,2),a=t[0],n=t[1],r=U().setLoading,o=Object(y.c)().t,i=a.serviceUrl,c=function(){var e=Object(M.a)(B.a.mark((function e(t,r){var c,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"TASK"!==r){e.next=7;break}return e.next=4,re(i,t);case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,ie(i,t);case 9:c=e.sent;case 10:s=c.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:s})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(M.a)(B.a.mark((function e(t,c,s){var u,d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),"TASK"!==c){e.next=8;break}return e.next=5,oe(i,t,s.description);case 5:u=e.sent,e.next=11;break;case 8:return e.next=10,ce(i,t,s.description);case 10:u=e.sent;case 11:if(!u.payload.id){e.next=23;break}if("TASK"!==c){e.next=18;break}return e.next=15,re(i,t);case 15:d=e.sent,e.next=21;break;case 18:return e.next=20,ie(i,t);case 20:d=e.sent;case 21:m=d.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:m,message:o("message.noteCreated",{id:u.payload.id})})}));case 23:return e.abrupt("return",u.payload.id);case 26:e.prev=26,e.t0=e.catch(0),console.log("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 30:return e.prev=30,r(!1),e.finish(30);case 33:return e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,null,[[0,26,30,33]])})));return function(t,a,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(M.a)(B.a.mark((function e(t,c,s){var u,d;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,le(i,s);case 4:if("TASK"!==c){e.next=10;break}return e.next=7,re(i,a.taskId);case 7:u=e.sent,e.next=13;break;case 10:return e.next=12,ie(i,t);case 12:u=e.sent;case 13:return d=u.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:d,message:o("message.noteDeleted",{id:s})})})),e.abrupt("return",null);case 18:e.prev=18,e.t0=e.catch(0),console.log("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 22:return e.prev=22,r(!1),e.finish(22);case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[0,18,22,25]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{notes:a.notes,fetchNotes:c,postNote:s,deleteNote:u,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},Oa=a(441),ya=a(439),xa=a(419),ja=a.n(xa),Ca=a(584),ka=a(420),wa=Object(fe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),Sa=function(e){var t=e.content,a=e.name,n=e.dateNote,r=e.avatar,o=wa();return b.a.createElement(ve.a,null,b.a.createElement(ve.a,{className:o.borderBox,textAlign:"left",p:2},b.a.createElement(Ee.a,{variant:"body2",color:"textPrimary",component:"div"},b.a.createElement(ka.a,{content:t}))),b.a.createElement(ve.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ve.a,{p:1,marginRight:2},b.a.createElement(Ca.a,{alt:"",src:r})),b.a.createElement(ve.a,null,b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},n),b.a.createElement(Ee.a,{variant:"body1",color:"textPrimary"},a))))},Aa=a(28),Ta=a(542),Na=a(422),Da=a.n(Na),Ia=Object(fe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:500,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"left",textTransform:"capitalize"},dialogContent:{overflow:"hidden","& .MuiDialogContent-root":{overflow:"hidden"}},boxEditor:{position:"relative",minHeight:400,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{border:"0 solid red",padding:0,position:"relative",top:-90,paddingRight:10},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Ra=function(e){return b.a.createElement(Gt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(he.a,e))},Pa={mode:"classic",defaultTag:"div",height:"auto",minHeight:"100px",maxHeight:"250px",showPathLabel:!1,toolbarContainer:"#custom_toolbar",rtl:!1,charCounter:!0,charCounterType:"char",maxCharCount:"500",imageResizing:!1,imageHeightShow:!1,imageFileInput:!1,imageUrlInput:!1,videoResizing:!1,videoHeightShow:!1,videoFileInput:!1,videoUrlInput:!1,videoRatioShow:!1,audioUrlInput:!1,tabDisable:!1,shortcutsHint:!1,buttonList:[["bold","underline","italic","align","link"]]},Ua=function(e){var t=e.open,a=e.handleClose,n=e.handleAddNote,r=Object(y.c)().t,o=Object(Aa.a)(),i=(Object(Ta.a)(o.breakpoints.down("sm")),Ia()),c=Object(f.useRef)(null),l=Object(f.useState)(""),s=Object(R.a)(l,2),u=s[0],d=s[1];return b.a.createElement(It.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:function(){return a()},PaperComponent:Ra,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:i.dialog},b.a.createElement(Lt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:function(){return a()}},b.a.createElement("div",null,r("entities.dialog.note.title")),b.a.createElement(Xe.a,{"aria-label":"close",className:i.closeButton,onClick:function(){return a()}},b.a.createElement(St.a,null))),b.a.createElement(Wt.a,{className:i.dialogContent},b.a.createElement(ve.a,{className:i.boxEditor},b.a.createElement(Da.a,{height:400,name:"nota",ref:c,placeholder:r("entities.dialog.note.placeholder"),lang:"it",autoFocus:!0,setOptions:Pa,onChange:function(e){d(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}}))),b.a.createElement(Vt.a,{className:i.dialogActions},b.a.createElement(ye.a,{onClick:function(){if(n){var e=u.replaceAll("<p>","<div>").replaceAll("</p>","</div>");n(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}a()},className:i.button},r("entities.dialog.note.buttonPublish"))))},Fa=Object(fe.a)({boxContainer:{border:0,borderStyle:"solid",borderColor:"red",width:"100%",textAlign:"left"},button:{color:"#586473","&.Mui-disabled":{cursor:"not-allowed",pointerEvents:"auto"}}}),za=function(e){var t=e.referenceId,a=e.referenceType,n=e.domain,r=J().users,o=Ea(),i=o.notes,c=o.fetchNotes,l=o.deleteNote,s=o.postNote,u=o.message,d=o.error,m=o.clearMessage,p=o.clearError,g=de().metadata,h=Fa(),v=Object(y.c)().t,E=Object(f.useState)(!1),O=Object(R.a)(E,2),x=O[0],j=O[1],C=function(){j((function(e){return!e}))};return Object(f.useEffect)((function(){t&&a&&c(t,a)}),[t,a]),r?b.a.createElement(b.a.Fragment,null,null===u&&null===d?null:b.a.createElement(Dt,{message:u||d,onClose:function(){return u?m():p()},status:u?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(ve.a,{className:h.boxContainer},b.a.createElement(Ua,{open:x,handleClose:C,handleAddNote:function(e){var n={id:i.length+1,description:e};s(t,a,n)}}),b.a.createElement(ve.a,{textAlign:"center"},b.a.createElement(ye.a,{size:"large",variant:"contained",className:h.button,startIcon:b.a.createElement(Je.a,null),disableRipple:!0,onClick:C},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},v("ACTION"===n?"entities.attachment.addNoteAction":"entities.attachment.addNote")))),i.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,n){var o,c,s;return b.a.createElement(ve.a,{key:e.id,textAlign:"left",marginTop:2},b.a.createElement(ve.a,{p:1,display:"flex",alignItems:"center",justifyContent:"space-between"},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},v("entities.attachment.note",{from:n+1,to:i.length})),g.canRemoveNotes?b.a.createElement(Xe.a,{"aria-label":"delete",onClick:function(){return l(t,a,e.id)},disableRipple:!0},b.a.createElement(tt.a,null)):null),b.a.createElement(Sa,{content:e.description,dateNote:Object(Oa.a)(new Date(null!==(o=null===e||void 0===e?void 0:e.createdDate)&&void 0!==o?o:new Date),"dd MMMM yyyy: kk:mm:ss",{locale:ya.a}),name:r[e.createdBy]?"".concat(null===(c=r[e.createdBy])||void 0===c?void 0:c.firstname," ").concat(null===(s=r[e.createdBy])||void 0===s?void 0:s.lastname):"",avatar:ja.a}))})))):null};za.defaultProps={referenceType:null,referenceId:null,domain:null};var Ba=za,Ma=Object(fe.a)((function(e){return{root:{width:"100%",marginBottom:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},accordion:{border:1,borderStyle:"solid",borderColor:oa.a[400],borderRadius:4},accordionSummary:{padding:0,paddingRight:20}}})),La=function(e){var t=e.referenceId,a=e.referenceType,n=e.referenceTypeNote,r=e.domain,o=Object(f.useState)({panel1:!1,panel2:!1}),i=Object(R.a)(o,2),c=i[0],s=i[1],u=Object(y.c)().t,d=Me().attachments,m=Ea().notes,p=function(e){return function(){s((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},e,!t[e]))}))}},g=Ma();return b.a.createElement("div",{className:g.root},b.a.createElement(Ve.a,{expanded:c.panel1,onChange:p("panel1"),className:g.accordion},b.a.createElement(Ke.a,{expandIcon:b.a.createElement(_e.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",className:g.accordionSummary},b.a.createElement(ve.a,{className:g.root,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ve.a,null,b.a.createElement(Ee.a,{variant:"body1",color:"textPrimary"},u("entities.action.attachments")),b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},u("entities.action.attachmentsPresent",{count:d.length}))),b.a.createElement(ve.a,{p:1,onClick:function(e){e.stopPropagation(),p("panel1")()}},b.a.createElement(Ee.a,{className:g.heading,color:"textSecondary"},c.panel1?u("entities.action.close"):u("entities.action.expand"))))),b.a.createElement(He.a,null,b.a.createElement(ha,{referenceId:t,referenceType:a,attachments:d,domain:r}))),b.a.createElement(Ve.a,{expanded:c.panel2,onChange:p("panel2"),className:g.accordion},b.a.createElement(Ke.a,{expandIcon:b.a.createElement(_e.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",className:g.accordionSummary},b.a.createElement(ve.a,{className:g.root,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ve.a,null,b.a.createElement(Ee.a,{variant:"body1",color:"textPrimary"},u("entities.action.note")),b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},u("entities.action.notePresent",{count:m.length}))),b.a.createElement(ve.a,{p:1,onClick:function(e){e.stopPropagation(),p("panel2")()}},b.a.createElement(Ee.a,{className:g.heading,color:"textSecondary"},c.panel2?u("entities.action.close"):u("entities.action.expand"))))),b.a.createElement(He.a,null,b.a.createElement(Ba,{referenceId:t,referenceType:n,domain:r}))))};La.defaultProps={referenceType:null,referenceId:null,domain:null};var Wa=La,Va=a(568),Ha=[{id:"IN_PROGRESS",value:"In corso"},{id:"COMPLETED",value:"Completata"},{id:"CANCELLED",value:"Annullata"},{id:"CREATED",value:"Creato"}],Ka=[{id:"CREATED",value:"Creato"},{id:"COMPLETED",value:"Completata"}],Ga=Object(fe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),_a=function(e){var t=e.title,a=e.content,n=e.textTransform,r=Ga();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ve.a,{textAlign:"left"},b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary"},t)),b.a.createElement(ve.a,{className:r.borderBox,textAlign:"left",p:2,style:{textTransform:n}},b.a.createElement(Ee.a,{variant:"body2",color:"textPrimary"},a)))};_a.defaultProps={textTransform:"none",content:""};var qa=_a,Ja=a(423),Ya=a.n(Ja),Za=Object(fe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),Xa=function(e){var t=e.avatar,a=e.title,n=e.name,r=e.role,o=e.cta,i=de().metadata,c=Za();return b.a.createElement(b.a.Fragment,null,b.a.createElement(ve.a,{textAlign:"left"},b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary"},a)),b.a.createElement(ve.a,{className:c.borderBox,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ve.a,{display:"flex",flexWrap:"nowrap",alignItems:"center",width:1},b.a.createElement(ve.a,{p:1,marginRight:2},b.a.createElement(Ca.a,{alt:n,src:t})),b.a.createElement(ve.a,null,b.a.createElement(Ee.a,{variant:"body1",color:"textPrimary"},n),b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},r))),i.canChangeTaskRoles?b.a.createElement(ve.a,null,b.a.createElement(Xe.a,{"data-testid":a,"aria-label":"change",onClick:o,disableRipple:!0},b.a.createElement(Ya.a,null))):null))};Xa.defaultProps={cta:function(){}};var $a=Xa,Qa=a(544),en=Object(zt.a)((function(e){return{paper:{width:"180px",padding:e.spacing(1),backgroundColor:"#2d2b1f",textAlign:"left","& .MuiTypography-root":{color:"#fff"}},popper:{zIndex:1,'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.background.paper," transparent transparent transparent")}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}})),tn=function(e){var t=e.title,a=e.children,n=e.contentPopper,r=e.icon,o=Object(qt.a)(e,["title","children","contentPopper","icon"]),i=b.a.useState(!1),c=Object(R.a)(i,2),l=c[0],s=c[1],u=en(),d=Object(f.useRef)(null),m=Object(f.useState)(null),p=Object(R.a)(m,2),g=p[0],h=p[1],v=b.a.createElement(ve.a,{onClick:function(){s((function(e){return!e}))},ref:d,height:"20px",marginLeft:1,marginRight:1},b.a.createElement(kt.a,{fontSize:"small"}));return b.a.createElement(ve.a,o,b.a.createElement(Qa.a,{open:l,anchorEl:d.current,className:u.popper,placement:"top",disablePortal:!0,modifiers:{flip:{enabled:!0},arrow:{enabled:!0,element:g},preventOverflow:{enabled:"true",boundariesElement:"scrollParent"}}},b.a.createElement("span",{className:u.arrow,ref:h}),b.a.createElement(he.a,{className:u.paper},b.a.createElement(Ee.a,{variant:"body1"},n.title),b.a.createElement(Ee.a,{variant:"body2"}," ",n.description))),b.a.createElement(ve.a,{border:0,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start"},"left"===r?v:null,b.a.createElement(ve.a,{marginRight:2},b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary"},t)),"right"===r?v:null),b.a.createElement(ve.a,{border:0,textAlign:"left"},a))};tn.defaultProps={children:null,icon:"right"};var an=tn,nn=Object(fe.a)((function(e){return{gridContainer:{border:0,padding:e.spacing(2),borderStyle:"solid",borderColor:"red"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}},highlight:{color:"#efb868",fontWeight:600}}})),rn=function(e){var t=e.type,a=e.action,n=J().users,r=Ne(),o=r.updateSubActionStatus,i=r.updateActionStatus,c=We(),l=Object(y.c)().t,s=a.id,u=a.title,d=a.endDate,m=a.description,p=a.canComplete,f=a.status,g=nn();return b.a.createElement(Oe.a,{container:!0,spacing:2,className:g.gridContainer},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:"".concat(l("action"===t?"entities.action.action":"entities.action.subaction")," - ").concat(s),content:u})),"action"!==t?b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:l("entities.action.detail.description"),content:m})):null,b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Oe.a,{container:!0,spacing:3},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,null,b.a.createElement(qa,{title:l("entities.action.within"),content:d&&Object(Oa.a)(Object(Va.a)(d),"dd MMMM yyyy",{locale:ya.a}),textTransform:"capitalize"}))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:g.boxState},b.a.createElement(an,{title:l("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:l,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:g.highlight})]),description:l("entities.action.popper.description")}},b.a.createElement(Qt,{name:"status",options:Ha,initialValue:f||"",emptyOption:l("entities.action.noStatus"),highlightKey:Ha[0].id,disabledKey:!1===p?Ha[1].id:null,onChange:function(e){"action"===t?f!==e&&i(s,e):o(s,e)}})))))),"action"===t?b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:l("entities.action.detail.description"),content:m})):null,n?Array.from(L).map((function(e){var r,o;return b.a.createElement(Oe.a,{item:!0,xs:12,key:e},b.a.createElement($a,{title:l("entities.info.".concat(e)),name:n[a[e]]?"".concat(null===(r=n[a[e]])||void 0===r?void 0:r.firstname," ").concat(null===(o=n[a[e]])||void 0===o?void 0:o.lastname):"",role:Object(Ae.get)(n["".concat(a[e])],"role",l("entities.info.empty")),avatar:"".concat(a[e],".jpg"),cta:function(){return r=e,o=n[a[e]],void c.setAllState({type:t,openDialog:!0,userSelected:o,userRole:r});var r,o}}))})):null)},on=a(191),cn=a.n(on),ln=a(159),sn=a.n(ln),un=a(426),dn=a.n(un),mn=a(434),pn=a.n(mn),fn=a(427),bn=a.n(fn),gn=a(433),hn=a.n(gn),vn=a(310),En=a.n(vn),On=a(309),yn=a.n(On),xn=a(428),jn=a.n(xn),Cn=a(430),kn=a.n(Cn),wn=a(431),Sn=a.n(wn),An=a(432),Tn=a.n(An),Nn=a(435),Dn=a.n(Nn),In=a(429),Rn=a.n(In),Pn=a(256),Un=a.n(Pn),Fn=a(436),zn=a.n(Fn),Bn={Add:Object(f.forwardRef)((function(e,t){return b.a.createElement(dn.a,Object.assign({},e,{ref:t}))})),Check:Object(f.forwardRef)((function(e,t){return b.a.createElement(bn.a,Object.assign({},e,{ref:t}))})),Clear:Object(f.forwardRef)((function(e,t){return b.a.createElement(yn.a,Object.assign({},e,{ref:t}))})),Delete:Object(f.forwardRef)((function(e,t){return b.a.createElement(jn.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(f.forwardRef)((function(e,t){return b.a.createElement(En.a,Object.assign({},e,{ref:t}))})),Edit:Object(f.forwardRef)((function(e,t){return b.a.createElement(ut.a,Object.assign({},e,{ref:t}))})),Export:Object(f.forwardRef)((function(e,t){return b.a.createElement(Rn.a,Object.assign({},e,{ref:t}))})),Filter:Object(f.forwardRef)((function(e,t){return b.a.createElement(kn.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(Sn.a,Object.assign({},e,{ref:t}))})),LastPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(Tn.a,Object.assign({},e,{ref:t}))})),NextPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(En.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(hn.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(f.forwardRef)((function(e,t){return b.a.createElement(yn.a,Object.assign({},e,{ref:t}))})),Search:Object(f.forwardRef)((function(e,t){return b.a.createElement(Un.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(f.forwardRef)((function(e,t){return b.a.createElement(pn.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(f.forwardRef)((function(e,t){return b.a.createElement(Dn.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(f.forwardRef)((function(e,t){return b.a.createElement(zn.a,Object.assign({},e,{ref:t}))}))},Mn=a(445),Ln=a(391),Wn=a(582),Vn=a(577),Hn=a(575),Kn=a(576),Gn=a(437),_n={payload:[{id:1,firstname:"Fabrizio",lastname:"Trollo",degree:"Ten. Col.",active:!1,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"aaa1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:2,firstname:"Gabriele",lastname:"Cappio",degree:"Serg. Magg.",active:!0,edo:{id:2,name:"Reparto 1",headUser:1,defaultUser:1,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aaa4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:3,firstname:"Antonio",lastname:"Neri",degree:"Col.",active:!0,edo:{id:3,name:"Ufficio 1",headUser:1,defaultUser:1,type:{id:3,name:"Ufficio"},parentId:2,active:!0},fiscalCode:"bbb1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:4,firstname:"Gianluca",lastname:"Svedesi",degree:"Ten. Col.",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"bbb4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:5,firstname:"Christian",lastname:"Torquato",degree:"Serg. Magg.",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"user",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:7,firstname:"Carlo",lastname:"Bianchi",degree:"Ten. Col.",active:!1,edo:null,fiscalCode:"ddd1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:8,firstname:"Marco",lastname:"Rossi",degree:"Cap.",active:!1,edo:null,fiscalCode:"ddd4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:9,firstname:"Davide",lastname:"Madonna",degree:"Cap.",active:!1,edo:null,fiscalCode:"eee1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:10,firstname:"Pasquale",lastname:"Calogero",degree:"Mar.",active:!0,edo:null,fiscalCode:"eee4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:11,firstname:"Mario",lastname:"Bianchi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"user",entity:null,entityDenomination:null,email:"mario.bianchi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:12,firstname:"Patrizio",lastname:"Rossi",degree:"Maresciallo",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"admin",entity:null,entityDenomination:null,email:"patrizio.rossi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null,defaultEdos:null},{id:13,firstname:"Massimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:14,firstname:"Patrizio",lastname:"Antonucci",degree:"Maresciallo",active:!0,edo:{id:7,name:"Sezione 2",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:6,active:!0},fiscalCode:"pantonucci",entity:null,entityDenomination:null,email:"patrizio.antonucci@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:15,firstname:"Alessandro",lastname:"Iello",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aiello",entity:null,entityDenomination:null,email:"alessandro.aiello@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:16,firstname:"Andrea",lastname:"Melia",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"amelia",entity:null,entityDenomination:null,email:"andrea.amelia@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:17,firstname:"Carmine",lastname:"Armelini",degree:"Ten. Col.",active:!0,edo:{id:10,name:"Nucleo 3",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:7,active:!0},fiscalCode:"carmelini",entity:null,entityDenomination:null,email:"carmine.armelini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:18,firstname:"Carlo",lastname:"Otti",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"cotti",entity:null,entityDenomination:null,email:"carlo.cotti@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:19,firstname:"Paolo Alberto",lastname:"Giorgi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"grgplb66m01h501w",entity:null,entityDenomination:null,email:"paoloalberto.giorgi@esercito.difesa.it",armedForce:null,dateOfBirth:"1985-01-14",phone:"1-183-426-0757",mobilePhone:"1-302-819-5781"},{id:20,firstname:"Francesco",lastname:"Pino",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"pnifnc83l20f158q",entity:null,entityDenomination:null,email:"francesco.pino1@esercito.difesa.it",armedForce:null,dateOfBirth:"1981-01-14",phone:"1-322-644-4695",mobilePhone:"1-900-186-6912"},{id:21,firstname:"Giovanni",lastname:"Biscetti",degree:"1\xb0 Luogotenente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"giovanni.biscetti@esercito.difesa.it",armedForce:null,dateOfBirth:"1983-01-14",phone:"1-844-658-0870",mobilePhone:"1-844-658-0870"},{id:22,firstname:"Salvatore",lastname:"Di Bella",degree:"Sergente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"salvatore.dibella@esercito.difesa.it",armedForce:null,dateOfBirth:"1984-01-14",phone:"1-795-964-4892",mobilePhone:"1-285-703-1251"},{id:23,firstname:"Giuseppe Mario",lastname:"Di Stefano",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstgpp77t06z614k",entity:null,entityDenomination:null,email:"giuseppemario.distefano@esercito.difesa.it",armedForce:null,dateOfBirth:"1990-01-14",phone:"1-798-383-5696",mobilePhone:"1-258-640-7566"},{id:24,firstname:"Domenico",lastname:"Di Stolfo",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstdnc63d08f631b",entity:null,entityDenomination:null,email:"domenico.distolfo@esercito.difesa.it",armedForce:null,dateOfBirth:"1988-01-14",phone:"1-218-782-9720",mobilePhone:"1-140-892-0517"},{id:25,firstname:"Giovanni",lastname:"Pirro",degree:"Sergente Maggiore",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"prrgnn83a20f839l",entity:null,entityDenomination:null,email:"giovanni.pirro@esercito.difesa.it",armedForce:null,dateOfBirth:"1980-01-14",phone:"1-552-798-4714",mobilePhone:"1-374-458-3607"},{id:26,firstname:"Fabio",lastname:"Ubaldi",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"bldfba63b22h501q",entity:null,entityDenomination:null,email:"fabio.ubaldi@esercito.difesa.it",armedForce:null,dateOfBirth:"1986-01-14",phone:"1-839-254-4819",mobilePhone:"1-890-595-8375"}],totalPages:1,totalElements:25,numberOfElements:25,number:0,size:30,first:!0,last:!0},qn=a(192),Jn=a.n(qn),Yn=Object(fe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:Jn.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Zn=function(e){var t=e.handleClick,a=e.search,n=e.usersSelected,r=e.role,o=J(),i=o.logged,c=o.users,s=o.useMock,u=o.serviceUrl,d=o.setUsers,m=o.setError,p=Object(f.useState)([]),g=Object(R.a)(p,2),h=g[0],v=g[1],O=Object(f.useState)([]),x=Object(R.a)(O,2),j=x[0],C=x[1],k=Object(f.useRef)(),w=Object(y.c)().t,S=Yn(),A=Object(Gn.a)({fetchSize:40,scroller:k,limit:1e5}),T=A.start,N=A.end,D=A.setIsFetching,I=A.forceDonefetching,P=function(){var e=Object(M.a)(B.a.mark((function e(t,n){var o,c,d,p,f,b,g;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=n/(o=n-t)-1,!s){e.next=9;break}return e.next=6,new Promise((function(e){return setTimeout((function(){return e(_n)}),100)}));case 6:d=e.sent,e.next=12;break;case 9:return e.next=11,_(u,{page:c,pageSize:o},a,"consulted"===r||"informed"===r);case 11:d=e.sent;case 12:return f=(p=d).payload,b=p.totalPages,g=p.number,b<g&&I(),e.abrupt("return",f.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r,hidden:t.fiscalCode.toUpperCase()===i}),e}),{}));case 17:e.prev=17,e.t0=e.catch(0),m(w("error.dataLoading"));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){return function(){d(Object(E.a)({},i,c[i]))}}),[]),Object(f.useEffect)((function(){T!==N&&(D(!0),P(T,N).then((function(e){d(Object(l.a)(Object(l.a)({},c),e)),D(!1)})))}),[T,N]),Object(f.useEffect)((function(){var e=Object.keys(c).reduce((function(e,t){return"undefined"!==t&&e.push(Object(l.a)({id:t},c[t])),e}),[]);v(function(e){var t=new Set;return e.filter((function(e){return"undefined"!==e.id})).filter((function(e){return!e.hidden})).filter((function(e){var a=e.lastname.charAt(0).toUpperCase(),n=t.has(a);return t.add(a),!n})).map((function(e){return e.lastname.charAt(0).toUpperCase()}))}(e)),C(e)}),[c]),b.a.createElement(Rt.a,{className:S.list,subheader:b.a.createElement("li",null),ref:k},h.map((function(e,a){return b.a.createElement("li",{key:"section-".concat(e),className:S.listSection},b.a.createElement("ul",{className:"".concat(S.ul," ").concat(0===a?"first":"")},b.a.createElement(Vn.a,{classes:{root:S.subHeader}},e),j.filter((function(e){return!e.hidden})).filter((function(t){return t.lastname.charAt(0).toUpperCase()===e})).map((function(e){var a;return b.a.createElement(Pt.a,{key:Object(Ae.uniqueId)("list-item"),disabled:e.selected},b.a.createElement(Hn.a,null,b.a.createElement(Ca.a,null)),b.a.createElement(Ut.a,{primary:"".concat(e.firstname," ").concat(e.lastname),secondary:e.role}),b.a.createElement(Kn.a,null,b.a.createElement(Wn.a,{className:S.radio,checked:n&&(null===(a=n[r])||void 0===a?void 0:a.fiscalCode.toUpperCase())===e.fiscalCode.toUpperCase(),onClick:t,value:e.fiscalCode.toUpperCase(),name:"radio-button-".concat(e.id),inputProps:{"aria-label":e.id},disabled:!!Object.keys(n).filter((function(e){return n[e]})).map((function(e){return n[e].fiscalCode.toUpperCase()})).find((function(t){return t===e.fiscalCode.toUpperCase()}))})))}))))})))};Zn.defaultProps={role:""};var Xn=Zn,$n=function(e){return b.a.createElement(Gt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(he.a,e))},Qn=function(e){var t,a=e.open,n=e.handleClose,r=e.handleUserSelected,o=e.role,i=e.usersSelected,c=Object(y.c)().t,s=Object(f.useState)(null),u=Object(R.a)(s,2),d=u[0],m=u[1],p=Object(f.useState)({}),g=Object(R.a)(p,2),h=g[0],v=g[1],O=Object(f.useState)(""),x=Object(R.a)(O,2),j=x[0],C=x[1],k=Object(Aa.a)(),w=J(),S=w.logged,A=w.users,T=w.fetchUser,N=(Object(Ta.a)(k.breakpoints.down("sm")),Yn()),D=function(e){var t=Object(f.useRef)();return Object(f.useEffect)((function(){t.current=e})),t.current}(j),I=function(e){var t=e.target.value;m(t.toUpperCase())},P=function(){m(null),C(""),n()},U=function(e){T(null,e,"consulted"===o||"informed"===o)};Object(f.useEffect)((function(){if(d){var e=Object(l.a)(Object(l.a)({},h),{},Object(E.a)({},o,A[d]));v(e)}}),[d]),Object(f.useEffect)((function(){var e=Object.keys(i).reduce((function(e,t){return e[t]=A[i[t]],e}),{});v(e)}),[i,A]);var F=function(){return Object.keys(i).length>0&&!!Object.keys(h).map((function(e){var t;return null===(t=h[e])||void 0===t?void 0:t.fiscalCode.toUpperCase()})).find((function(e){return e===S.toUpperCase()}))};return b.a.createElement(It.a,{"data-testid":"dialog-user",fullWidth:!0,maxWidth:"sm",open:a,onClose:function(){return P()},PaperComponent:$n,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:N.dialog},b.a.createElement(Lt.a,{className:N.dialogTitle,id:"form-dialog-title",onClose:P},b.a.createElement("div",null,c("entities.dialog.users.title")," ",b.a.createElement("span",{className:N.role},o)),b.a.createElement(Xe.a,{"aria-label":"close",className:N.closeButton,onClick:P},b.a.createElement(St.a,null))),b.a.createElement(Wt.a,null,b.a.createElement(Oe.a,{container:!0,spacing:2},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:N.boxTools},b.a.createElement(ve.a,{className:N.boxInput},b.a.createElement(Mn.a,{id:"search",className:N.input,name:"search",value:j,placeholder:c("entities.dialog.users.search"),inputProps:{"aria-label":c("entities.dialog.users.search")},onKeyUp:function(e){var t=e.key,a=e.target.value;C(""),C(a),"Enter"===t&&U(a)}}),b.a.createElement(Xe.a,{className:"".concat(N.iconButton," ").concat(j!==D?"active":""),"aria-label":"search",disabled:""===j,onClick:function(){return U(j)}},b.a.createElement(Un.a,null))),b.a.createElement(ve.a,{className:N.boxAssign},b.a.createElement(Ln.a,{value:"start",disabled:F(),style:{pointerEvents:"".concat(F()?"none":"auto")},control:b.a.createElement(Wn.a,{className:N.radio,disabled:F(),checked:h&&(null===(t=h[o])||void 0===t?void 0:t.fiscalCode.toUpperCase())===S}),label:c("entities.dialog.users.assign"),labelPlacement:"start",onClick:function(){return I({target:{value:S}})}}))),b.a.createElement(ve.a,null,Object.keys(null!==A&&void 0!==A?A:{}).length>0?b.a.createElement(Xn,{selectedValue:d,handleClick:I,search:j,usersSelected:h,role:o}):null)))),b.a.createElement(Vt.a,{className:N.dialogActions},b.a.createElement(ye.a,{onClick:P,className:N.buttonClose,"data-testid":"dialog-user-close-button"},c("entities.dialog.users.buttonClose")),b.a.createElement(ye.a,{onClick:function(){r&&d&&r(A[d],o),m(null),C(""),n()},className:N.button,disabled:null===d,"data-testid":"dialog-user-assign-button"},c("entities.dialog.users.button"))))};Qn.defaultProps={open:!1,role:"",usersSelected:void 0};var er=Qn,tr=cn()({palette:{secondary:{main:"#b39f69"}}},u.itIT),ar={draggable:!1,showTitle:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,paging:!1,pageSize:5,pageSizeOptions:[5,10,20],toolbar:!1},nr=function(){var e=Object(f.useRef)(null),t=Ne(),a=t.subActions,n=t.loading,r=t.updateSubActionStatus,o=t.updateAction,i=J().users,c=Object(y.c)().t,s=We(),u=Object(f.useState)({}),d=Object(R.a)(u,2),m=d[0],g=d[1],h=Object(f.useState)({}),v=Object(R.a)(h,2),O=v[0],x=v[1],j={toolbar:{nRowsSelected:"{0} ".concat(c("entities.table.rowSelected"))},body:{emptyDataSourceMessage:c("entities.table.empty")},pagination:{labelRowsSelect:c("entities.table.pagination.rows"),labelRowsPerPage:c("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}},C=Object(f.useMemo)((function(){return[{title:"ID",width:"20%",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return b.a.createElement(Ee.a,{variant:"subtitle2",component:"div"},e.id)}},{title:"SOTTOAZIONE",align:"justify",render:function(e){return b.a.createElement(Ee.a,{variant:"body2",component:"div"},e.title)}},{title:"STATO",filtering:!0,align:"center",render:function(e){return b.a.createElement(Qt,{name:"status",options:Ha,initialValue:e.status||"",emptyOption:c("entities.action.noStatus"),highlightKey:Ha[0].id,disabledKey:!1===e.canComplete?Ha[1].id:null,onChange:function(t){var a,n;e.status!==t&&(a=t,n=e.id,r(n,a))}})}},{title:"FINE",filtering:!0,type:"date",align:"center",render:function(e){return b.a.createElement(Ee.a,{variant:"body2",component:"div"},e.endDate?Object(Oa.a)(Object(Va.a)(e.endDate),"dd/MM/yyyy"):"-")}}]})),k=function(e){var t=a.find((function(t){return t.id===e}));return Array.from(["responsible","accountable","consulted","informed"]).map((function(e){var a,n;return b.a.createElement(Oe.a,{item:!0,xs:12,key:e},b.a.createElement($a,{title:c("entities.info.".concat(e)),name:i[t[e]]?"".concat(null===(a=i[t[e]])||void 0===a?void 0:a.firstname," ").concat(null===(n=i[t[e]])||void 0===n?void 0:n.lastname):"",role:Object(Ae.get)(i["".concat(t[e])],"role",c("entities.info.empty")),avatar:"".concat(t[e],".jpg"),cta:function(){return a=e,n=i[t[e]],x(t),void s.setAllState({type:"subActions",openDialog:!0,userSelected:n,userRole:a});var a,n}}))}))};return Object(f.useEffect)((function(){g(Array.from(L).reduce((function(e,t){return i[O[t]]&&(e[t]=i[O[t]].fiscalCode.toUpperCase()),e}),{}))}),[O]),b.a.createElement(b.a.Fragment,null,b.a.createElement(er,{open:s.isOpenDialog,handleClose:function(){s.setOpenDialog(!1)},handleUserSelected:function(e,t){var a=Object(l.a)(Object(l.a)({},O),{},Object(E.a)({},t,e.fiscalCode.toUpperCase()));delete a.tableData,delete a.index,o("subActions",a)},usersSelected:m,role:s.userRole}),b.a.createElement(p.a,{theme:tr},b.a.createElement(sn.a,{tableRef:e,style:{position:"relative"},isLoading:n,icons:Bn,columns:C,data:a,options:ar,title:"",localization:j,detailPanel:function(e){return b.a.createElement(ve.a,{p:1},b.a.createElement(Oe.a,{container:!0,spacing:2},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:c("entities.action.detail.description"),content:e.description})),k(e.id)))}})))},rr=Object(fe.a)((function(e){return{root:{flexGrow:1},box:{height:70,padding:e.spacing(1)},boxStatus:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",color:e.palette.text.secondary},boxBackAction:{padding:e.spacing(2),display:"flex",alignItems:"center",backgroundColor:"#f7f6f0",color:"#86660b","&:hover":{cursor:"pointer"}},paperAction:{textAlign:"left",color:e.palette.text.primary},containerInfo:{height:"90vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"80%",overflowY:"scroll",paddingRight:e.spacing(2),paddingTop:e.spacing(2),boxSizing:"content-box"},containerInfoView:{height:"99%",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:5},containerInfoScrollView:{border:0,borderColor:"blue",borderStyle:"solid",height:"99%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxButtons:{display:"flex",alignItems:"center",flexWrap:"nowrap"},button:{backgroundColor:"transparent"},divider:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:oa.a[400],margin:[[0,e.spacing(1)]]}}})),or=Object(fe.a)({root:{"&.Mui-selected":{color:"#fff",backgroundColor:"#b68902"}}}),ir=function(){var e=Object(f.useState)(0),t=Object(R.a)(e,2),a=t[0],n=t[1],r=Object(f.useState)("view"),o=Object(R.a)(r,2),i=o[0],c=o[1],s=Ne(),u=s.actionSelected,d=s.error,m=s.message,p=s.clearError,g=s.clearMessage,h=s.updateAction,v=Me().allReferenceType,O=Object(y.c)().t,x=Object(I.f)(),j=rr(),C=or(),k=u&&u.subActions||[],w=Object(Ae.omit)(u,"subActions"),S=function(e){e>=0&&e<=k.length&&n(e)},A=We(),T=J().users,N=Object(f.useState)({}),D=Object(R.a)(N,2),P=D[0],U=D[1];return Object(f.useEffect)((function(){if("action"===A.type)U(Array.from(L).reduce((function(e,t){return T[w[t]]&&(e[t]=T[w[t]].fiscalCode.toUpperCase()),e}),{}));else if("subAction"===A.type){var e=k[a];U(Array.from(L).reduce((function(t,a){return T[e[a]]&&(t[a]=T[e[a]].fiscalCode.toUpperCase()),t}),{}))}}),[A.type]),Object(Ae.isEmpty)(u)?null:b.a.createElement(he.a,{elevation:5},null===m&&null===d?null:b.a.createElement(Dt,{message:m||d,onClose:function(){return m?g():p()},status:m?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(er,{open:A.isOpenDialog,handleClose:function(){A.setOpenDialog(!1)},handleUserSelected:function(e,t){var n;delete(n="action"===A.type?Object(l.a)(Object(l.a)({},w),{},Object(E.a)({},t,e.fiscalCode.toUpperCase())):Object(l.a)(Object(l.a)({},k[a]),{},Object(E.a)({},t,e.fiscalCode.toUpperCase()))).tableData,delete n.index,h(A.type,n)},usersSelected:P,role:A.userRole}),b.a.createElement(ve.a,{p:2},b.a.createElement(Ee.a,{variant:"h5"},O("entities.action.detail.title"))),b.a.createElement("div",{className:j.root},b.a.createElement(Oe.a,{container:!0,spacing:0},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:j.boxBackAction,onClick:function(){return x.push("/")}},b.a.createElement(je.a,null),b.a.createElement(Ee.a,{variant:"h6"},O("entities.action.detail.goBack")))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:"".concat(j.box," ").concat(j.boxStatus),justifyContent:"center"},b.a.createElement(Se.a,{size:"medium",value:i,exclusive:!0,onChange:function(e,t){c(t)}},b.a.createElement(we.a,{classes:C,value:"view"},O("entities.detail.view")),b.a.createElement(we.a,{classes:C,value:"table"},O("entities.detail.table"))))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(rn,{type:"action",action:w})),b.a.createElement(Oe.a,{item:!0,xs:6},"view"===i?b.a.createElement(ve.a,{className:"".concat(j.paper," ").concat(j.paperAction)},b.a.createElement(Oe.a,{container:!0,spacing:1},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:j.boxButtons},b.a.createElement(ye.a,{className:j.button,startIcon:b.a.createElement(je.a,null),disabled:a<0,onClick:function(){return S(a-1)}}),b.a.createElement(Ee.a,{variant:"h5"},O("entities.action.detail.subactionInfo",{from:k.length>0?a+1:0,to:k.length})),b.a.createElement(ye.a,{className:j.button,endIcon:b.a.createElement(ke.a,null),disabled:parseInt(a+1,10)>=k.length,onClick:function(){return S(a+1)}}))))):null,b.a.createElement(Oe.a,{container:!0,spacing:2},b.a.createElement(Oe.a,{item:!0,xs:12},"view"===i?b.a.createElement(ve.a,{p:1},u.subActions.length?b.a.createElement(rn,{type:"subAction",action:k[a]}):b.a.createElement(Ee.a,{variant:"h4"},O("entities.action.detail.noSubaction"))):b.a.createElement(ve.a,{p:1},b.a.createElement(nr,null))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:j.divider})),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{paddingLeft:1,paddingRight:1},b.a.createElement(Wa,{referenceId:null===u||void 0===u?void 0:u.id,referenceType:v.ACTION,referenceTypeNote:"ACTION",domain:"ACTION"}))))))))},cr=a(573),lr=function(){var e=Object(f.useContext)(me),t=Object(R.a)(e,2),a=t[0],n=t[1];return{view:a.view,setView:function(e){return n({view:e})}}},sr=Object(fe.a)((function(e){return{gridContainer:{border:0,borderStyle:"solid",borderColor:"red",height:"100%"},subActions:{fontWeight:600,color:"#000"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}},boxInfoSubAction:{backgroundColor:"#f6f7f9",padding:e.spacing(2),"& .MuiSvgIcon-root":{backgroundColor:"#fff",borderRadius:50,color:"#aeb6c2 "}},button:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}},highlight:{color:"#efb868",fontWeight:600}}})),ur=(Object(fe.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},accordion:{border:0,borderStyle:"solid",borderColor:"red"},accordionSummary:{padding:0,paddingRight:"20px",border:"1px solid",borderColor:e.palette.action.disabled}}})),function(e){var t=e.action,a=sr(),n=Object(y.c)().t,r=Ne(),o=r.taskId,i=r.updateActionStatus,c=Me().allReferenceType,l=t.title,s=t.endDate,u=t.subActions,d=t.canComplete,m=t.status,p=(null===u||void 0===u?void 0:u.length)||0,f=b.a.createElement(y.a,{t:n,i18nKey:"entities.action.subActions",count:p},[b.a.createElement("span",{key:p,className:a.subActions},{countSubActions:p})]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(Oe.a,{container:!0,spacing:2,className:a.gridContainer},b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:n("entities.action.action"),content:l})),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Oe.a,{container:!0,spacing:3},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,null,b.a.createElement(qa,{title:n("entities.action.within"),content:s&&Object(Oa.a)(Object(Va.a)(s),"dd MMMM yyyy",{locale:ya.a}),textTransform:"capitalize"}))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:a.boxState},b.a.createElement(an,{title:n("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:n,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:a.highlight})]),description:n("entities.action.popper.description")}},b.a.createElement(Qt,{name:"status",options:Ha,initialValue:null!==m&&void 0!==m?m:"",emptyOption:n("entities.action.noStatus"),highlightKey:Ha[0].id,disabledKey:!1===d?Ha[1].id:null,onChange:function(e){var a=t.id;i(a,e)}})))))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:a.boxInfoSubAction},b.a.createElement(an,{title:f,contentPopper:{title:"",description:n("entities.action.popper.subAction")},icon:"left"}))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Wa,{referenceId:o,referenceType:c.TASK,referenceTypeNote:"TASK"}))))}),dr=a(580),mr=Object(fe.a)((function(e){return{priority:{border:0,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),maxWidth:70},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600},buttonDetail:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}}}})),pr=(Object(fe.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:5,backgroundColor:"#25b736"}}),Object(fe.a)({green:{"& div":{backgroundColor:"#25b736"}},orange:{"& div":{backgroundColor:"#fbad37"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}}}),Object(fe.a)((function(e){return{td:{display:"block",border:"0 solid"},pagination:{border:"0px solid red","& button.Mui-selected":{border:0,color:"#ffffff",backgroundColor:"#86660d"}},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:"#b68902",color:"#b68902"},"& select":{paddingRight:[24,"!important"]},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},rowsPerPage:{width:"60px"},button:{textTransform:"capitalize",color:"#5c636d","& span":{color:"#5c636d"}}}}))),fr=cn()({palette:{secondary:{main:"#b39f69"}}},u.itIT),br={draggable:!1,showTitle:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,paging:!1,pageSize:5,pageSizeOptions:[5,10,20],toolbar:!1},gr=function(e){var t=e.count,a=e.rowsPerPage,n=e.rowsPerPageOptions,r=e.onChangeRowsPerPage,o=e.onChangePage,i=e.page,c=Math.ceil(t/a),l=function(e,t){o(e,t<0?0:t)},s=b.a.useMemo((function(){return n.map((function(e){return b.a.createElement("option",{key:e,value:e},e)}))})),u=Object(y.c)().t,d=pr();return b.a.createElement("td",{className:d.td},b.a.createElement(ve.a,{textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start",position:"absolute",top:0,right:"5%"},b.a.createElement(ve.a,{marginRight:"20px"},b.a.createElement(Ee.a,{variant:"body1",color:"textSecondary"},u("entities.table.pagination.rowsPerPage"))),b.a.createElement(ve.a,{className:d.rowsPerPage},b.a.createElement(Yt.a,{variant:"outlined",className:d.formControl,fullWidth:!0},b.a.createElement(Zt.a,{native:!0,value:a,onChange:function(e){var t={target:{value:parseInt(e.target.value,10)}};r(t)}},s)))),b.a.createElement(ve.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(ye.a,{onClick:function(e){return l(e,i-1)},disabled:i<=0,size:"large",variant:"outlined",className:d.button,startIcon:b.a.createElement(je.a,null)},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},u("entities.table.pagination.previous"))),b.a.createElement(dr.a,{className:d.pagination,size:"large",count:c,page:i+1,variant:"outlined",shape:"rounded",hideNextButton:!0,hidePrevButton:!0,onChange:function(e,t){o(e,t-1)}}),b.a.createElement(ye.a,{onClick:function(e){return l(e,i+1)},disabled:parseInt(i+1*a,10)>=parseInt(t,10),size:"large",variant:"outlined",className:d.button,endIcon:b.a.createElement(ke.a,null)},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},u("entities.table.pagination.next")))))},hr=function(){var e=Object(f.useRef)(null),t=Object(y.c)().t,a=Ne(),n=a.actions,r=a.setSelectAction,o=a.pagination,i=a.loading,c=a.updateActionStatus,l=de().metadata,s=mr(),u=Object(I.f)(),d=o.number,m=o.totalElements,g=Object(f.useMemo)((function(){return[{title:"ID",field:"id",width:"20%",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return b.a.createElement(Ee.a,{variant:"subtitle2",component:"div"},e.id)}},{title:"AZIONE",field:"title",filtering:!0,align:"justify",render:function(e){return b.a.createElement(Ee.a,{variant:"body2",component:"div"},e.title)}},{title:"STAT0",field:"status",filtering:!0,align:"center",render:function(e){var a;return b.a.createElement(Qt,{name:"status",options:Ha,initialValue:null!==(a=e.status)&&void 0!==a?a:"",emptyOption:t("entities.action.noStatus"),highlightKey:Ha[0].id,disabledKey:!1===e.canComplete?Ha[1].id:null,onChange:function(t){var a,n;e.status!==t&&(a=t,n=e.id,c(n,a))},disabled:!(null===l||void 0===l?void 0:l.canChangeCompletionStatus)})}},{title:"FINE",field:"endDate",filtering:!0,type:"date",align:"center",render:function(e){return b.a.createElement(Ee.a,{variant:"body2",component:"div"},e.endDate?Object(Oa.a)(Object(Va.a)(e.endDate),"dd/MM/yyyy"):"-")}},{title:"AZIONE",align:"center",field:null,render:function(e){return b.a.createElement(ye.a,{"data-testid":"action-detail-".concat(e.id),variant:"contained",size:"large",className:s.buttonDetail,onClick:function(){r(e.index),u.push("/dettaglio-azione")},endIcon:b.a.createElement(ke.a,null)},t("entities.action.gotoDetail"))}}]})),h={toolbar:{nRowsSelected:"{0} ".concat(t("entities.table.rowSelected"))},body:{emptyDataSourceMessage:t("entities.table.empty")},pagination:{labelRowsSelect:t("entities.table.pagination.rows"),labelRowsPerPage:t("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}};return b.a.createElement(p.a,{theme:fr},b.a.createElement(sn.a,{tableRef:e,style:{position:"relative"},isLoading:i,icons:Bn,columns:g,data:n,options:br,title:"",localization:h,components:{Pagination:function(e){return b.a.createElement(gr,Object.assign({},e,{count:m,page:d}))},Row:function(e){return b.a.createElement(ln.MTableBodyRow,Object.assign({},e,{className:"task-list-row"}))}}}))},vr=a(395),Er=a(587),Or=Object(fe.a)((function(e){return{priority:{border:1,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),width:70},boxPercent:{border:1,display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center","& .MuiInputBase-formControl":{height:40}},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600}}})),yr=Object(fe.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:5,backgroundColor:"#25b736"}}),xr=Object(fe.a)({green:{"& div":{backgroundColor:"#25b736"}},yellow:{"& div":{backgroundColor:"#ffff00"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}},perc0:{"& div":{backgroundColor:"#FF0000"}},perc5:{"& div":{backgroundColor:"#FF1A00"}},perc10:{"& div":{backgroundColor:"#FF3300"}},perc15:{"& div":{backgroundColor:"#FF4D00"}},perc20:{"& div":{backgroundColor:"#FF6600"}},perc25:{"& div":{backgroundColor:"#FF8000"}},perc30:{"& div":{backgroundColor:"#FF9900"}},perc35:{"& div":{backgroundColor:"#FFB300"}},perc40:{"& div":{backgroundColor:"#FFCC00"}},perc45:{"& div":{backgroundColor:"#FFE600"}},perc50:{"& div":{backgroundColor:"#FFFF00"}},perc55:{"& div":{backgroundColor:"#E6FF00"}},perc60:{"& div":{backgroundColor:"#CCFF00"}},perc65:{"& div":{backgroundColor:"#B3FF00"}},perc70:{"& div":{backgroundColor:"#99FF00"}},perc75:{"& div":{backgroundColor:"#80FF00"}},perc80:{"& div":{backgroundColor:"#66FF00"}},perc85:{"& div":{backgroundColor:"#4DFF00"}},perc90:{"& div":{backgroundColor:"#33FF00"}},perc95:{"& div":{backgroundColor:"#1AFF00"}},perc100:{"& div":{backgroundColor:"#00FF00"}},percNegative:{"& div":{backgroundColor:"#ab40ff"}}}),jr=function(e){var t,a,n,r=e.priority,o=Object(y.c)().t,i=Or(),c=yr(),l=de(),s=l.task,u=l.updateTaskCompletionPercentage,d=l.metadata,m=xr(),p=function(){var e=Object(M.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.id,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t;if(e>=15)t=100;else{if(0===e)return 0;if(e<0)return e;if(e<-999)return-999;t=Math.round(100*e/15)}return 5*Math.ceil(t/5)}(Object(Er.a)(new Date(s.endDate),new Date));return b.a.createElement(Oe.a,{container:!0,spacing:1,alignItems:"center"},b.a.createElement(Oe.a,{item:!0,xs:9},b.a.createElement(ve.a,{alignItems:"center"},b.a.createElement(ve.a,{minWidth:35},b.a.createElement(ve.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between"},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},o("entities.detail.progress")),b.a.createElement(Ee.a,{variant:"subtitle2",color:"textSecondary"},"".concat(Math.round(f||0),"%")))),b.a.createElement(ve.a,{width:"100%",mr:1},b.a.createElement(vr.a,{classes:c,className:"".concat(f>=0?m["perc".concat(f)]:m.percNegative),variant:"determinate",valueBuffer:100,value:(n=f,n<0?100:0===n?2:n)})))),b.a.createElement(Oe.a,{item:!0,xs:3},b.a.createElement(ve.a,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"nowrap",justifyContent:"space-between",marginLeft:1},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},o("entities.detail.priority")),b.a.createElement("div",{className:"".concat(i.priority," ").concat(i[r])},o("entities.detail.".concat(r))))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:i.boxPercent},b.a.createElement(ve.a,{width:"50%",display:"flex",alignItems:"center",border:0},b.a.createElement(Ee.a,{variant:"body2",color:"textSecondary"},o("entities.detail.completionPercentage")),b.a.createElement(ve.a,{border:0,marginLeft:2},(null===d||void 0===d?void 0:d.canChangeCompletionStatus)?b.a.createElement(Qt,{dataTestId:"select-completionPercentage",name:"completionPercentage",options:Array.from(Array(101).keys()).map((function(e){return{id:e,value:e}})),initialValue:null!==(a=s.completionPercentage)&&void 0!==a?a:0,onChange:p,disabled:!(null===d||void 0===d?void 0:d.canChangeCompletionStatus)}):b.a.createElement(Ee.a,{variant:"h6",color:"textSecondary"},null!==(t=s.completionPercentage)&&void 0!==t?t:0))))))},Cr=a(574),kr=Object(fe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:Jn.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),wr=function(e){return b.a.createElement(Gt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(he.a,e))},Sr=function(e){var t=e.open,a=e.title,n=e.message,r=e.buttonCancelLabel,o=e.buttonConfirmLabel,i=e.onCancel,c=e.onConfirm,l=Object(y.c)().t,s=Object(Aa.a)(),u=(Object(Ta.a)(s.breakpoints.down("sm")),kr());return b.a.createElement(It.a,{"data-testid":"dialog-confirm",fullWidth:!0,maxWidth:"sm",open:t,onClose:i,PaperComponent:wr,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:u.dialog},b.a.createElement(Lt.a,{className:u.dialogTitle,id:"form-dialog-title",onClose:i},b.a.createElement("div",null,a||l("common.confirmOperationTitle"))),b.a.createElement(Wt.a,null,b.a.createElement(Cr.a,null,n||l("common.confirmOperationMessage"))),b.a.createElement(Vt.a,{className:u.dialogActions},b.a.createElement(ye.a,{onClick:i,className:u.buttonClose,"data-testid":"dialog-confirm-close-button"},r||l("common.cancel")),b.a.createElement(ye.a,{onClick:c,className:u.button,"data-testid":"dialog-user-confirm-button"},o||l("common.confirm"))))};Sr.defaultProps={open:!1,title:"",message:"",buttonCancelLabel:"",buttonConfirmLabel:""};var Ar=Sr,Tr=a(438),Nr=a(68),Dr=a(579),Ir=Object(fe.a)({datePicker:{border:"0 solid red",marginTop:0,"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiInputBase-input":{textTransform:"capitalize"},"& .MuiInputAdornment-positionEnd":{marginLeft:"-5px"}}}),Rr=function(e){var t=e.name,a=e.errors,n=e.format,r=e.initialValue,o=e.minDate,i=e.maxDate,c=e.invalidDateMessage,l=e.onChange,s=Object(f.useState)(),u=Object(R.a)(s,2),d=u[0],m=u[1],p=Ir();Object(f.useEffect)((function(){r&&m(r)}),[r]);return b.a.createElement(Yt.a,{variant:"outlined",fullWidth:!0,error:!Object(Ae.isEmpty)(a[t])},b.a.createElement(Nr.a,{utils:Tr.a,locale:ya.a},b.a.createElement(Dr.a,{onChange:function(e){l&&l(e)},className:p.datePicker,value:d,inputVariant:"outlined",autoOk:!0,disableToolbar:!0,invalidDateMessage:c,variant:"inline",format:n,margin:"normal",id:"date-picker-inline",label:"",KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0,minDate:o,maxDate:i})))};Rr.defaultProps={control:{},errors:{},rules:{},onChange:function(){},format:"dd/MM/yyyy",initialValue:void 0,minDate:void 0,maxDate:void 0,invalidDateMessage:"Invalid Date Format"};var Pr=Rr,Ur=Object(fe.a)({gridContainer:{border:0,borderStyle:"solid",borderColor:"red",height:"100%"},borderBox:{border:"1px solid",borderColor:"#e0e3e8"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}}}),Fr=function(){var e=de(),t=e.task,a=e.updateTaskStatus,n=e.updateTaskDates,r=We().setAllState,o=J().users,i=Object(y.c)().t,c=Ur(),l=t.status,s=t.canComplete,u=t.id,d=Object(f.useState)(!1),m=Object(R.a)(d,2),p=m[0],g=m[1],h=Object(f.useState)({field:"",value:null}),v=Object(R.a)(h,2),E=v[0],O=v[1],x=function(e,a){"startDate"===e&&a!==t.startDate&&(g(!0),O({field:"startDate",value:a})),"endDate"===e&&a!==t.endDate&&(O({field:"endDate",value:a}),g(!0))};return b.a.createElement(b.a.Fragment,null,p?b.a.createElement(Ar,{open:p,message:i("entities.task.changeDates"),onCancel:function(){O({field:"",value:null}),g(!1)},onConfirm:function(){n(u,E.field,E.value),g(!1)}}):null,b.a.createElement(Oe.a,{container:!0,spacing:2,className:c.gridContainer},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(qa,{title:i("entities.info.id"),content:t.id})),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:c.boxState},b.a.createElement(an,{title:i("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:i,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:c.highlight})]),description:i("entities.action.popper.description")}},b.a.createElement(Qt,{name:"status",options:Ka,initialValue:l||"",emptyOption:i("entities.action.noStatus"),disabled:!1===s,onChange:function(e){l!==e&&a(u,e)}})))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:i("entities.info.task"),content:t.title})),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(Oe.a,{container:!0,spacing:3},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,null,b.a.createElement(Jt,{title:i("entities.info.startDate")},b.a.createElement(ve.a,{border:0},b.a.createElement(Pr,{name:"startDate",format:"dd MMMM yyyy",rules:{required:{value:!0,message:i("validation.required")}},initialValue:t.startDate,onChange:function(e){return x("startDate",e)},maxDate:t.endDate}))))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,null,b.a.createElement(Jt,{title:i("entities.info.endDate")},b.a.createElement(ve.a,{border:0},b.a.createElement(Pr,{name:"endDate",format:"dd MMMM yyyy",rules:{required:{value:!0,message:i("validation.required")}},initialValue:t.endDate,onChange:function(e){return x("endDate",e)},minDate:t.startDate}))))))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(qa,{title:i("entities.info.description"),content:t.description})),o?Array.from(L).map((function(e){var a,n;return b.a.createElement(Oe.a,{item:!0,xs:12,key:e},b.a.createElement($a,{title:i("entities.info.".concat(e)),name:o[t[e]]?"".concat(null===(a=o[t[e]])||void 0===a?void 0:a.firstname," ").concat(null===(n=o[t[e]])||void 0===n?void 0:n.lastname):"",role:Object(Ae.get)(o["".concat(t[e])],"role",i("entities.info.empty")),avatar:"".concat(t[e],".jpg"),cta:function(){return a=e,n=o[t[e]],void r({type:"task",openDialog:!0,userSelected:n,userRole:a});var a,n}}))})):null))},zr=Object(fe.a)((function(e){return{root:{flexGrow:1},box:{height:70,padding:e.spacing(1)},boxStatus:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",color:e.palette.text.secondary},boxAction:{textAlign:"left",color:e.palette.text.primary},containerInfo:{height:"80vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"90%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},containerInfoView:{height:"80vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScrollView:{border:0,borderColor:"blue",borderStyle:"solid",height:"90%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},containerInfoTable:{height:"100%",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScrollTable:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxButtons:{display:"flex",alignItems:"center",flexWrap:"nowrap"},button:{backgroundColor:"transparent"},buttonDetail:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}},divider:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:oa.a[400]}}})),Br=Object(fe.a)({root:{"&.Mui-selected":{color:"#fff",backgroundColor:"#b68902"}}}),Mr=function(){var e,t=Object(y.c)().t,a=Object(f.useState)(0),n=Object(R.a)(a,2),r=n[0],o=n[1],i=Object(f.useState)({}),c=Object(R.a)(i,2),s=c[0],u=c[1],d=zr(),m=Br(),p=J().users,g=de(),h=g.task,v=g.updateTask,O=g.usersSelected,x=Ne(),j=x.actions,C=x.setSelectAction,k=Object(I.f)(),w=lr(),S=w.view,A=w.setView,T=We(),N=T.isOpenDialog,D=T.setOpenDialog,P=T.userRole,U=T.type,F=Me().allReferenceType,z=function(e){e>=0&&e<=j.length&&(o(e),u(j[e]),C(e))};Object(f.useEffect)((function(){Object(Ae.isEmpty)(j)||u(j[r])}),[j]);var B,M,L,W;null!==g.message?(B=g.message,M=g.clearMessage):null!==x.message&&(B=x.message,M=x.clearMessage),null!==g.error?(B=g.error,W=g.clearError):null!==x.error&&(L=x.error,W=x.clearError);var V=b.a.createElement(ve.a,{border:0,className:"".concat(d.box," ").concat(d.boxAction)},b.a.createElement(ve.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},b.a.createElement(ve.a,{className:d.boxButtons},b.a.createElement(ye.a,{className:d.button,startIcon:b.a.createElement(je.a,null),disabled:r<0,onClick:function(){return z(r-1)}}),b.a.createElement(Ee.a,{variant:"h5"},t("entities.detail.action",{from:j.length>0?r+1:0,to:j.length})),b.a.createElement(ye.a,{className:d.button,endIcon:b.a.createElement(ke.a,null),disabled:parseInt(r+1,10)>=j.length,onClick:function(){return z(r+1)}})),b.a.createElement(ye.a,{variant:"contained",size:"large",className:d.buttonDetail,onClick:function(){return k.push("/dettaglio-azione")},endIcon:b.a.createElement(ke.a,null)},t("entities.action.gotoDetail"))));return b.a.createElement(b.a.Fragment,null,b.a.createElement(Dt,{message:B,onClose:M,status:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(Dt,{message:L,onClose:W,status:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(he.a,{elevation:5},p&&N?b.a.createElement(er,{open:N,handleClose:function(){D(!1)},handleUserSelected:function(e,t){"task"===U&&v(Object(l.a)(Object(l.a)({},h),{},Object(E.a)({},t,e.fiscalCode.toUpperCase())))},usersSelected:O,role:P}):null,b.a.createElement(ve.a,{p:2},b.a.createElement(Ee.a,{variant:"h5"},t("entities.detail.title",{id:h.id}))),b.a.createElement("div",{className:d.root},b.a.createElement(Oe.a,{container:!0},b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:"".concat(d.box," ").concat(d.boxStatus)},b.a.createElement(jr,{priority:null!==(e=h.priority)&&void 0!==e?e:"0"}))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(ve.a,{className:"".concat(d.box," ").concat(d.boxStatus),justifyContent:"center"},b.a.createElement(Se.a,{size:"medium",value:S,exclusive:!0,onChange:function(e,t){A(t)}},b.a.createElement(we.a,{classes:m,value:"view"},t("entities.detail.view")),b.a.createElement(we.a,{classes:m,value:"table"},t("entities.detail.table"))))),b.a.createElement(Oe.a,{item:!0,xs:6},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfo},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScroll},b.a.createElement(ve.a,{p:1},b.a.createElement(Fr,null))))),b.a.createElement(Oe.a,{item:!0,xs:6},"view"===S&&j.length?V:null,"view"===S?b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoView},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollView},b.a.createElement(ve.a,{p:1},j.length?b.a.createElement(ur,{action:s}):b.a.createElement(Ee.a,{variant:"h4"},t("entities.action.detail.noAction"))))):b.a.createElement(Oe.a,{container:!0,spacing:2},b.a.createElement(Oe.a,{item:!0,xs:12,style:{maxHeight:"50vh"}},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoTable},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollTable},b.a.createElement(ve.a,{p:1},b.a.createElement(hr,null))))),b.a.createElement(Oe.a,{item:!0,xs:12},b.a.createElement(ve.a,{className:d.divider})),b.a.createElement(Oe.a,{item:!0,xs:12,style:{maxHeight:"50vh"}},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoTable},b.a.createElement(cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollTable},b.a.createElement(ve.a,{p:1},b.a.createElement(Wa,{referenceId:h.id,referenceType:F.TASK,referenceTypeNote:"TASK"})))))))))))},Lr=function(){var e=J(),t=e.fetchUserPresent,a=e.usersPresent,n=de().edoResponsible,r=U().isLoading;return Object(f.useEffect)((function(){(a||n)&&t(n)}),[a,n]),b.a.createElement(pe,null,r?b.a.createElement(ge,null):null,b.a.createElement(D.a,{hashType:"noslash"},b.a.createElement(I.c,null,b.a.createElement(I.a,{exact:!0,path:"/dettaglio-azione*"},b.a.createElement(ir,null)),b.a.createElement(I.a,null,b.a.createElement(Mr,null)))))},Wr=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=Object(f.useState)({taskId:r,actions:[],pagination:{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0},error:null,message:null,loading:!1,keycloak:a,serviceUrl:n}),i=Object(R.a)(o,2),c=i[0],s=i[1],u=J().logged,d=J().setUsersPresent;return Object(f.useEffect)((function(){var e=function(){var e=Object(M.a)(B.a.mark((function e(){var t,a,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(Ae.isEmpty)(u)||null===r){e.next=11;break}return s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),e.next=5,Q(n,r);case 5:t=e.sent,a=t.payload,o=W(a),d(o),t=a.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:t,selected:0})}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("errore",e.t0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{actions:[],error:e.t0.toString()})}));case 17:return e.prev=17,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1})})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,u,r]),b.a.createElement(Te.Provider,{value:[c,s]}," ",t," ")};Wr.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var Vr=Wr,Hr=function(e){var t=e.children,a=Object(f.useState)({type:null,openDialog:!1,userSelected:null,userRole:null}),n=Object(R.a)(a,2),r=n[0],o=n[1];return b.a.createElement(Le.Provider,{value:[r,o]},t)},Kr=function(e){var t=e.children,a=Object(f.useState)({loading:!1}),n=Object(R.a)(a,2),r=n[0],o=n[1];return b.a.createElement(P.Provider,{value:[r,o]},t)},Gr=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=Object(f.useState)({taskId:r,notes:[],error:null,message:null,keycloak:a,serviceUrl:n}),i=Object(R.a)(o,2),c=i[0],s=i[1],u=J(),d=u.setUsersPresent,m=u.setLoadUserPresent;return Object(f.useEffect)((function(){var e=function(){var e=Object(M.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===r){e.next=10;break}return e.next=4,re(n,r);case 4:t=(t=e.sent).payload,a=Object(F.a)(new Set(t.map((function(e){return e.createdBy})))),m(!1),d(a),m(!0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{notes:[],error:e.t0.toString()})}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(va.Provider,{value:[c,s]},t," ")};Gr.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var _r=Gr,qr=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=Object(f.useState)({task:{id:r},metadata:{},message:null,error:null,serviceUrl:n,edoResponsible:null,usersSelected:{}}),i=Object(R.a)(o,2),c=i[0],s=i[1],u=J().setUsersPresent,d=U().setLoading,m=Object(y.c)().t;return Object(f.useEffect)((function(){var e=function(){var e=Object(M.a)(B.a.mark((function e(){var t,a,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,Z(n,r);case 4:t=e.sent,a=t.payload,o=t.metadata,i=Object(F.a)(new Set(Array.from(L).reduce((function(e,t){return a[t]&&e.push(a[t]),e}),[]))),u(i),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:a,metadata:o,edoResponsible:a.responsible,usersSelected:L.reduce((function(e,t){return e[t]=a[t],e}),{}),error:null})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:m("error.dataLoading")})}));case 14:return e.prev=14,d(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&null!==r&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(Y.Provider,{value:[c,s]}," ",t," ")};qr.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var Jr=qr,Yr=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=Object(f.useState)({logged:null,vertexId:null,vertexShortName:null,users:null,usersPresent:[],loadUsersPresent:!1,serviceUrl:n}),o=Object(R.a)(r,2),i=o[0],c=o[1],s=function e(t){return t&&t.type&&1===t.type.id?{vertexId:t.id,vertexShortName:t.shortName}:e(t.parentEdo)};return Object(f.useEffect)((function(){var e=a.initialized,t=a.authenticated;e&&t&&function(){var e=Object(M.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Promise.resolve(a.loadUserInfo()).then(function(){var e=Object(M.a)(B.a.mark((function e(t){var r,o,i,u,d,m,p;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,!t.success){e.next=5;break}a.loadUserInfo().success(function(){var e=Object(M.a)(B.a.mark((function e(t){var a,o,i,u,d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.preferred_username,e.next=3,G(n,a.toUpperCase(),r);case 3:o=e.sent,i=o.payload,u=s(i.edo),d=u.vertexId,m=u.vertexShortName,c((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:a.toUpperCase(),vertexId:d,vertexShortName:m})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12;break;case 5:return o=t.preferred_username,e.next=8,G(n,o.toUpperCase(),r);case 8:i=e.sent,u=i.payload,d=s(u.edo),m=d.vertexId,p=d.vertexShortName,c((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:o.toUpperCase(),vertexId:m,vertexShortName:p})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){console.error("error",t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a.initialized,a.authenticated]),b.a.createElement(q.Provider,{value:[i,c]},t)};Yr.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var Zr=Yr,Xr=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrlAttachments,r=e.taskId,o=Object(f.useState)({attachments:[],taskId:r,error:null,message:null,keycloak:a,serviceUrlAttachments:n,allClouds:{},allReferenceType:{TASK:null,ACTION:null},EINET_DIRECTORY:"https://eicloud.comc4ei.esercito.difesa.it/index.php/apps/files/?dir="}),i=Object(R.a)(o,2),c=i[0],s=i[1],u=U().setLoading;return Object(f.useEffect)((function(){var e=function(){var e=Object(M.a)(B.a.mark((function e(){var t,a,o,i,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u(!0),null===r){e.next=13;break}return e.next=5,Fe(n);case 5:return t=e.sent,a=t.payload.clouds,o=t.payload.references,e.next=10,Re(n,r,o.TASK);case 10:i=e.sent,c=i.payload.attachments,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{taskId:r,attachments:c,allClouds:a,allReferenceType:o})}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("errore",e.t0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{attachments:[],error:e.t0.toString()})}));case 19:return e.prev=19,u(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(Be.Provider,{value:[c,s]},t," ")};Xr.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var $r=Xr,Qr=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},eo={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",serviceUrlUser:"service-url-user",serviceUrlAttachments:"service-url-attachments",taskId:"task-id",cssUrl:"css-url"},to=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keycloak=Qr(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(eo).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===eo.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.getAttribute(eo.cssUrl),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href","".concat(t,"/suneditor.min.css"));var n=this.attachShadow({mode:"open"});n.appendChild(a),n.appendChild(this.container),this.jss=Object(k.c)(Object(l.a)(Object(l.a)({},Object(d.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},u.itIT),this.keycloak=Object(l.a)(Object(l.a)({},Qr()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=v("keycloak",(function(){e.keycloak=Object(l.a)(Object(l.a)({},Qr()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=v(h,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),T()(n)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(eo.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(eo.serviceUrl)||"",t=this.getAttribute(eo.serviceUrlUser)||"",a=this.getAttribute(eo.serviceUrlAttachments)||"",n="true"===this.getAttribute(eo.hidden),r=this.getAttribute(eo.taskId);if(n)S.a.render(b.a.createElement(b.a.Fragment,null));else{var o=this.getAttribute(eo.locale)||"it";C(o),S.a.render(b.a.createElement(g.Provider,{value:this.keycloak},b.a.createElement(Kr,null,b.a.createElement(Zr,{keycloak:this.keycloak,serviceUrl:t},b.a.createElement(Jr,{keycloak:this.keycloak,serviceUrl:e,taskId:r},b.a.createElement(Vr,{keycloak:this.keycloak,serviceUrl:e,taskId:r},b.a.createElement(_r,{keycloak:this.keycloak,serviceUrl:e,taskId:r},b.a.createElement($r,{keycloak:this.keycloak,serviceUrlAttachments:a,taskId:r},b.a.createElement(Hr,null,b.a.createElement(m.b,{jss:this.jss},b.a.createElement(p.a,{theme:this.muiTheme},b.a.createElement(N,{keycloak:this.keycloak},b.a.createElement(Lr,null)))))))))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(eo)}}]),a}(Object(c.a)(HTMLElement));customElements.define("task-detail",to)}},[[455,1,2]]]);
//# sourceMappingURL=main.badea7a1.chunk.js.map