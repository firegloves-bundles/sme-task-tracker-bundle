(this["webpackJsonptask-list-widget"]=this["webpackJsonptask-list-widget"]||[]).push([[0],{355:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore durante la connessione al server"},"message":{"monitorEmptyUser":"Nessun utente presente nel tuo cono di visibilita\'","pendingActions":"Commenti o ack mancanti","pendingActionsAlt":"Azione Richiesta"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","delete":"Elimina","yes":"Si","no":"No"},"validation":{"required":"{{field}} \xe8 obbligatorio"},"entities":{"task":{"deleteDialog":{"title":"Elimina task","description":"Sei sicuro/a?"},"notFound":"Task non trovato/a","deleted":"Task eliminato/a","id":"ID","name":"entit\xe0.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"La Tabella e\' vuota","rowSelected":"Righe selezionate","pagination":{"rows":"Righe","rowsPerPage":"Elementi per pagina:","previous":"Precedente","next":"Sucessiva"}},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},356:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"message":{"monitorEmptyUser":"No users on visibility","pendingActions":"missing acks or comments","pendingActionsAlt":"Action Required"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"validation":{"required":"{{field}} is required"},"entities":{"task":{"deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Tabella vuota"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},389:function(e,t,a){e.exports=a(457)},457:function(e,t,a){"use strict";a.r(t);var n=a(188),r=a(189),o=a(190),i=a(215),c=a(379),l=a(13),s=a(113),u=a(125),d=a(383),b=a(144),f=a(486),p=a(0),g=a.n(p),m=g.a.createContext(null),v="task.detail",h="sme-tasktracker-bundle.tt_task_list_widget.onMouseOverRole",k="sme-tasktracker-bundle.tt_task_list_widget.onMouseOutRole",E=function(e,t){var a=new CustomEvent(e,{detail:{payload:t}});window.dispatchEvent(a)},O=a(157),y=a(259),C=a(55),j={it:a(355),en:a(356)},w=Object.keys(j).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(O.a)({},t,Object(O.a)({},"translation",j[t])))}),{}),x=(y.a.t,function(e){!function(e,t){y.a.use(C.a).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:w,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"en")}),F=a(34),P=a(17),S=a.n(P),R=a(357),T=a.n(R),N=a(60),D=a(216),A=a(244),z=a(494),M=a(160),I=a(491),U=a(497),L=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},B=a(4),W=a.n(B);W.a.oneOfType([W.a.func,W.a.shape({current:W.a.elementType}),W.a.shape(null)]);var V=a(492),H=a(39),K=a.n(H),_=a(69),Z=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},Q=function(){var e=Object(_.a)(K.a.mark((function e(t,a){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",n.status>=200&&n.status<300?n.json():Promise.reject(new Error(n.statusText||n.status)));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(_.a)(K.a.mark((function e(t,a){var n,r,o,i,c,s,u=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{page:0,pageSize:10},r=u.length>3&&void 0!==u[3]?u[3]:{sortBy:"id",sortDirection:"ASC"},o=u.length>4&&void 0!==u[4]?u[4]:null,i=u.length>5&&void 0!==u[5]&&u[5],c="".concat(t,"/").concat("tasks","?role=").concat(a,"&page=").concat(n.page,"&size=").concat(n.pageSize,"&sortBy=").concat(r.sortBy,"&sortDirection=").concat(r.sortDirection),i&&(c+="&onlyCompleted=true"),o&&(c+="&globalSearch=".concat(o)),s=Object(l.a)(Object(l.a)({},Z()),{},{method:"GET"}),e.abrupt("return",Q(c,s));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(_.a)(K.a.mark((function e(t,a){var n,r,o,i,c,s=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{page:0,pageSize:10},r=s.length>3&&void 0!==s[3]?s[3]:{sortBy:"id",sortDirection:"ASC"},o=s.length>4&&void 0!==s[4]?s[4]:null,i="".concat(t,"/").concat("tasks","/subordinates?page=").concat(n.page,"&size=").concat(n.pageSize,"&sortBy=").concat(r.sortBy,"&sortDirection=").concat(r.sortDirection),a&&(i+="&subordinate=".concat(a)),o&&(i+="&globalSearch=".concat(o)),c=Object(l.a)(Object(l.a)({},Z()),{},{method:"GET"}),e.abrupt("return",Q(i,c));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(_.a)(K.a.mark((function e(t){var a,n,r,o=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],n="".concat(t,"/").concat("tasks","/count"),a&&(n+="?onlyCompleted=true"),r=Object(l.a)(Object(l.a)({},Z()),{},{method:"GET"}),e.abrupt("return",Q(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e,t){var a=t.payload;switch(t.type){case"set-user":return Object(l.a)(Object(l.a)({},e),{},{user:a.user});case"set-task":return Object(l.a)(Object(l.a)({},e),{},{tasks:a.tasks,pagination:a.pagination});case"set-subordinates":return Object(l.a)(Object(l.a)({},e),{},{pagination:a.subordinates});case"set-pagination":return Object(l.a)(Object(l.a)({},e),{},{pagination:a.pagination});case"set-search":return Object(l.a)(Object(l.a)({},e),{},{search:a.search});case"set-error":return Object(l.a)(Object(l.a)({},e),{},{error:a.error});case"fetch-task-count":return Object(l.a)(Object(l.a)({},e),{},{count:a.count});default:return e}},Y=Object(p.createContext)([{},function(){}]),$=Y.Provider,ee={user:null,tasks:[],pagination:{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0,pageSize:10},sorting:{sortBy:"id",sortDirection:"ASC"},subordinates:{},error:null,count:{},search:void 0},te=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=Object(p.useReducer)(X,Object(l.a)(Object(l.a)({},ee),{},{serviceUrl:n})),o=Object(N.a)(r,2),i=o[0],c=o[1];return Object(p.useEffect)((function(){if(a.initialized&&a.authenticated)try{Promise.resolve(a.loadUserInfo()).then((function(e){if(e.success)a.loadUserInfo().success((function(e){var t=e.preferred_username;c({type:"set-user",payload:{user:t.toUpperCase()}})}));else{var t=e.preferred_username;c({type:"set-user",payload:{user:t.toUpperCase()}})}}))}catch(e){console.error(e)}}),[a.initialized,a.authenticated]),g.a.createElement($,{value:{state:i,dispatch:c}},t)};te.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var ae=function(e,t){return{type:e,payload:t}},ne=function(){var e=Object(p.useContext)(Y),t=e.state,a=e.dispatch,n=Object(C.b)().t,r=t.serviceUrl,o=function(e){return a(ae("set-error",{error:e}))},i=function(){var e=Object(_.a)(K.a.mark((function e(t){var i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(r,t);case 3:i=e.sent,a(ae("fetch-task-count",{count:i.payload})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),o(n("error.dataLoading"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),c=t.user,l=t.tasks,s=t.subordinates,u=t.search,d=t.pagination;return{user:c,tasks:l,taskCount:t.count,pagination:d,search:u,subordinates:s,error:t.error,setTasks:function(e,t){return a(ae("set-task",{tasks:e,pagination:t}))},fetchTaskCount:i,setSearch:function(e){return a(ae("set-search",{search:e}))},setSubordinates:function(e){return a(ae("set-subordinates",{subordinates:e}))},setPagination:function(e){return a(ae("set-pagination",{pagination:e}))},setError:o}},re=a(2),oe=a(483),ie=a(460),ce=a(116),le=a(5),se=a(247),ue=a(359),de=a.n(ue),be=a(360),fe=a.n(be),pe=a(358),ge=a.n(pe),me=a(361),ve=a.n(me),he={success:ge.a,error:de.a,info:fe.a},ke={success:3e3,error:5e3,info:5e3},Ee=function e(t){var a=t.className,n=t.classes,r=t.status,o=t.message,i=t.onClose,c=t.anchorOrigin,l=!!o,s=r||e.INFO,u=he[s],d=ke[s],b=g.a.createElement("span",{className:n.message},g.a.createElement(u,{className:Object(re.a)(n.icon,n.iconStatus)}),o);return g.a.createElement(oe.a,{open:l,onClose:i,autoHideDuration:d,anchorOrigin:c},g.a.createElement(ie.a,{className:Object(re.a)(n[s],a),message:b,action:[g.a.createElement(se.a,{key:"close","aria-label":"close",color:"inherit",onClick:i},g.a.createElement(ve.a,{className:n.icon}))]}))};Ee.SUCCESS="success",Ee.ERROR="error",Ee.defaultProps={message:null,className:"",status:Ee.INFO="info",onClose:function(){},anchorOrigin:{vertical:"bottom",horizontal:"center"}};var Oe=Object(le.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:ce.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(Ee),ye=a(96),Ce=a(342),je=a(251),we=a(255),xe=a(337),Fe=a(155),Pe=a.n(Fe),Se=a(212),Re=a.n(Se),Te=a(213),Ne=a.n(Te),De=a(496),Ae=a(495),ze=a(254),Me=a(420),Ie=a(106),Ue=a.n(Ie),Le=a(498),Be=a(493),We=function(e){var t=e.children,a=t.props.role.substr(0,1).toUpperCase();return g.a.createElement("div",{className:"event-dispatcher",onMouseOver:function(e){return E(h,{x:e.clientX,y:e.clientY,role:a})},onFocus:function(){},onMouseOut:function(){return E(k)},onBlur:function(){}},t)},Ve={Regex:{CF:/^(?:[A-Z][AEIOU][AEIOUX]|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}(?:[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[15MR][\dLMNP-V]|[26NS][0-8LMNP-U])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM]|[AC-EHLMPR-T][26NS][9V])|(?:[02468LNQSU][048LQU]|[13579MPRTV][26NS])B[26NS][9V])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$/i}},He=a(262),Ke=Object(He.a)((function(e){return{root:{textAlign:"center","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(7),height:e.spacing(7)}}})),_e=Object(He.a)({}),Ze=Object(He.a)({root:{width:30,height:30,border:"2px solid #ffffff"},responsible:{backgroundColor:"#86660d"},creator:{backgroundColor:"#61ba78"},accountable:{backgroundColor:"#b39f69"},consulted:{backgroundColor:"#b39f69"},informed:{backgroundColor:"#b39f69"}}),Qe=function(e){var t=e.role,a=Ze();return g.a.createElement(Le.a,{className:"".concat(a.root," ").concat(a[t])},t.substr(0,1).toUpperCase())},Je=function(e){var t,a,n=e.user,r=e.image,o=e.role,i=Ke(),c=_e(),l="";return l=(a=n)&&Ve.Regex.CF.test(a)?(t=n)?"".concat(t.charAt(3)).concat(t.charAt(0)):"":n?n.substr(0,2):"",g.a.createElement("div",{className:i.root},g.a.createElement(Be.a,{classes:c,overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:g.a.createElement(We,null,g.a.createElement(Qe,{role:o}))},g.a.createElement(Le.a,{alt:"Avatar",className:i.large,src:r},l.toUpperCase())))};Je.defaultProps={};var qe=Je,Ge=Object(He.a)((function(e){return{priority:{border:0,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),maxWidth:70},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600}}})),Xe=Object(He.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:15,backgroundColor:"#fff"}}),Ye=Object(He.a)({green:{"& div":{backgroundColor:"#25b736"}},yellow:{"& div":{backgroundColor:"#ffff00"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}},perc0:{"& div":{backgroundColor:"#FF0000"}},perc5:{"& div":{backgroundColor:"#FF1A00"}},perc10:{"& div":{backgroundColor:"#FF3300"}},perc15:{"& div":{backgroundColor:"#FF4D00"}},perc20:{"& div":{backgroundColor:"#FF6600"}},perc25:{"& div":{backgroundColor:"#FF8000"}},perc30:{"& div":{backgroundColor:"#FF9900"}},perc35:{"& div":{backgroundColor:"#FFB300"}},perc40:{"& div":{backgroundColor:"#FFCC00"}},perc45:{"& div":{backgroundColor:"#FFE600"}},perc50:{"& div":{backgroundColor:"#FFFF00"}},perc55:{"& div":{backgroundColor:"#E6FF00"}},perc60:{"& div":{backgroundColor:"#CCFF00"}},perc65:{"& div":{backgroundColor:"#B3FF00"}},perc70:{"& div":{backgroundColor:"#99FF00"}},perc75:{"& div":{backgroundColor:"#80FF00"}},perc80:{"& div":{backgroundColor:"#66FF00"}},perc85:{"& div":{backgroundColor:"#4DFF00"}},perc90:{"& div":{backgroundColor:"#33FF00"}},perc95:{"& div":{backgroundColor:"#1AFF00"}},perc100:{"& div":{backgroundColor:"#00FF00"}},percNegative:{"& div":{backgroundColor:"#ab40ff"}}}),$e=Object(He.a)((function(e){return{td:{display:"block",border:"0 solid"},pagination:{border:"0px solid red","& button.Mui-selected":{border:0,color:"#ffffff",backgroundColor:"#86660d"}},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:"#b68902",color:"#b68902"},"& select":{paddingRight:[24,"!important"]},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},rowsPerPage:{width:"60px"},button:{textTransform:"capitalize",color:"#5c636d","& span":{color:"#5c636d"}}}})),et=(Object(He.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),a(365)),tt=a.n(et),at=a(374),nt=a.n(at),rt=a(366),ot=a.n(rt),it=a(373),ct=a.n(it),lt=a(258),st=a.n(lt),ut=a(257),dt=a.n(ut),bt=a(367),ft=a.n(bt),pt=a(368),gt=a.n(pt),mt=a(370),vt=a.n(mt),ht=a(371),kt=a.n(ht),Et=a(372),Ot=a.n(Et),yt=a(375),Ct=a.n(yt),jt=a(369),wt=a.n(jt),xt=a(211),Ft=a.n(xt),Pt=a(376),St=a.n(Pt),Rt={Add:Object(p.forwardRef)((function(e,t){return g.a.createElement(tt.a,Object.assign({},e,{ref:t}))})),Check:Object(p.forwardRef)((function(e,t){return g.a.createElement(ot.a,Object.assign({},e,{ref:t}))})),Clear:Object(p.forwardRef)((function(e,t){return g.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),Delete:Object(p.forwardRef)((function(e,t){return g.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(p.forwardRef)((function(e,t){return g.a.createElement(st.a,Object.assign({},e,{ref:t}))})),Edit:Object(p.forwardRef)((function(e,t){return g.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),Export:Object(p.forwardRef)((function(e,t){return g.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(p.forwardRef)((function(e,t){return g.a.createElement(vt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(p.forwardRef)((function(e,t){return g.a.createElement(kt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(p.forwardRef)((function(e,t){return g.a.createElement(Ot.a,Object.assign({},e,{ref:t}))})),NextPage:Object(p.forwardRef)((function(e,t){return g.a.createElement(st.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(p.forwardRef)((function(e,t){return g.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(p.forwardRef)((function(e,t){return g.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),Search:Object(p.forwardRef)((function(e,t){return g.a.createElement(Ft.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(p.forwardRef)((function(e,t){return g.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(p.forwardRef)((function(e,t){return g.a.createElement(Ct.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(p.forwardRef)((function(e,t){return g.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},Tt=a(377),Nt=a(378),Dt=a.n(Nt);function At(e){var t=Object(C.b)().t,a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return g.a.createElement("span",null,g.a.createElement(Dt.a,{alt:"",style:{color:"red"},"data-tip":!0,"data-for":a}),g.a.createElement(Tt.a,{id:a,type:"error",effect:"solid",place:e.positionPlacement},g.a.createElement("span",null,t(e.popupTextKey))))}At.defaultProps={positionPlacement:"bottom",popupTextKey:"message.pendingActions"};var zt=At,Mt=Pe()({palette:{secondary:{main:"#b39f69"}}},u.itIT);var It={draggable:!1,showTitle:!1,toolbar:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,pageSizeOptions:[5,10,20]},Ut=function(e){var t,a=e.onRowClick,n=e.serviceUrl,r=e.userSelected,o=Object(p.useRef)(null),i=Object(C.b)().t,c=Ge(),s=Xe(),u=Ye(),d=ne(),b=d.user,m=d.pagination,v=d.setTasks,h=d.search,k=d.setSearch,E=d.setSubordinates,O=d.subordinates,y=d.setError,j=Object(p.useState)(!1),w=Object(N.a)(j,2),x=w[0],F=w[1],P={toolbar:{nRowsSelected:"{0} ".concat(i("entities.table.rowSelected"))},body:{emptyDataSourceMessage:0===Object.keys(null!==O&&void 0!==O?O:{}).length?i("message.monitorEmptyUser"):i("entities.table.empty")},pagination:{labelRowsSelect:i("entities.table.pagination.rows"),labelRowsPerPage:i("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}},S=Object(p.useMemo)((function(){return[{title:"ID",field:"id",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return!0===e.subtreePendingAck||!0===e.subtreePendingComment?g.a.createElement("span",null,e.id," ",g.a.createElement(zt,null)," "):g.a.createElement("span",null,e.id," ")}},{title:"TASK",field:"title",filtering:!0,align:"center"},{title:"UTENTE/RUOLO",field:"responsible",filtering:!0,align:"center",render:function(e){if(b){var t=Object.keys(e).find((function(t){var a;return(null===(a=String(e[t]))||void 0===a?void 0:a.toUpperCase())===(null===b||void 0===b?void 0:b.toUpperCase())}));return t?g.a.createElement(qe,{image:"/entando-de-app/cmsresources/sme-tasktracker-bundle/static/img/user.jpg",role:t}):g.a.createElement("div",null)}return null}},{title:"INIZIO",field:"startDate",filtering:!0,type:"date",align:"center",render:function(e){return e.startDate?g.a.createElement("span",null,Object(ze.default)(Object(Me.default)(e.startDate),"dd/MM/yyyy")):g.a.createElement("span",null,"-")}},{title:"FINE",field:"endDate",filtering:!0,type:"date",align:"center",render:function(e){return e.endDate?g.a.createElement("span",null,Object(ze.default)(Object(Me.default)(e.endDate),"dd/MM/yyyy")):g.a.createElement("span",null,"-")}},{title:"PRIORITA'",field:"priority",filtering:!1,align:"center",render:function(e){return e.priority?g.a.createElement("div",{className:"".concat(c.priority," ").concat(c[e.priority])},i("entities.priority.".concat(e.priority))):g.a.createElement("span",null,"-")}},{title:"% TEMPO RIMANENTE",width:"25%",field:"progress",filtering:!0,sorting:!1,type:"numeric",align:"center",render:function(e){var t,a=function(e,t){var a=Object(Ae.a)(new Date(t),new Date(e)),n=Object(Ae.a)(new Date(t),new Date);return n<=0?0:100*n/a}(e.startDate,e.endDate),n=(t=a,5*Math.ceil(t/5));return g.a.createElement(A.a,{display:"flex",alignItems:"center",minWidth:"25%"},g.a.createElement(A.a,{minWidth:40},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(a),"%"))),g.a.createElement(A.a,{width:"100%",mr:1},g.a.createElement(Ce.a,{classes:s,className:"".concat(a>0?u["perc".concat(n)]:u.percNegative),variant:"determinate",valueBuffer:100,value:a||0})))}}]}));return Object(p.useEffect)((function(){o.current&&o.current.onQueryChange()}),[h]),Object(p.useEffect)((function(){return function(){v([],{number:0,numberOfElements:10,size:5,totalElements:0,totalePages:0,pageSize:10}),k("")}}),[]),g.a.createElement(f.a,{theme:Mt},g.a.createElement(A.a,null,g.a.createElement(Ue.a,{tableRef:o,style:{position:"static"},isLoading:x,icons:Rt,columns:S,data:function(){var e=Object(_.a)(K.a.mark((function e(t){var a,o,c,s,u,d,b,f,p,g,k;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,q(n,r,{page:null!==(a=null===m||void 0===m?void 0:m.number)&&void 0!==a?a:0,pageSize:null!==(o=null===t||void 0===t?void 0:t.pageSize)&&void 0!==o?o:10},{sortBy:t.orderBy?t.orderBy.field:"id",sortDirection:t.orderDirection},h,!0);case 4:return s=e.sent,u=s.payload,d=s.number,b=s.numberOfElements,f=s.totalElements,p=s.totalPages,g=s.size,k=u.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{progress:e.completionPercentage})})),v(k,{number:d,numberOfElements:b,size:g,totalElements:f,totalPages:p}),E(null!==(c=null===s||void 0===s?void 0:s.subordinates)&&void 0!==c?c:{}),e.abrupt("return",{data:k,page:d,totalCount:f});case 12:return e.prev=12,e.t0=e.catch(0),e.t0.message&&"404"===e.t0.message?y(i("message.monitorEmptyUser")):y(i("error.dataLoading")),v([],{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0}),e.abrupt("return",{data:[],page:0,totalCount:0});case 17:return e.prev=17,F(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,12,17,20]])})));return function(t){return e.apply(this,arguments)}}(),options:Object(l.a)(Object(l.a)({},It),{},{pageSize:null!==(t=null===m||void 0===m?void 0:m.size)&&void 0!==t?t:5}),title:"",localization:P,onRowClick:function(e,t){return a(t)},components:{Pagination:function(e){var t,a;return g.a.createElement(Lt,Object.assign({serviceUrl:n},e,{count:null!==(t=null===m||void 0===m?void 0:m.totalElements)&&void 0!==t?t:0,page:null!==(a=null===m||void 0===m?void 0:m.number)&&void 0!==a?a:0,ref:o}))},Row:function(e){return g.a.createElement(Ie.MTableBodyRow,Object.assign({},e,{className:"task-list-row"}))}}})))},Lt=g.a.forwardRef((function(e,t){var a=e.count,n=e.rowsPerPage,r=e.rowsPerPageOptions,o=e.onChangeRowsPerPage,i=e.onChangePage,c=e.page,s=ne(),u=s.pagination,d=s.setPagination,b=Math.ceil(a/n),f=function(e,t){d(Object(l.a)(Object(l.a)({},u),{},{number:t})),i(e,t<0?0:t)},p=r.map((function(e){return g.a.createElement("option",{key:e,value:e},e)})),m=Object(C.b)().t,v=$e();return g.a.createElement("td",{className:v.td},g.a.createElement(A.a,{textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start",position:"absolute",top:20,right:"5%"},g.a.createElement(A.a,{marginRight:"20px"},g.a.createElement(ye.a,{variant:"body1",color:"textSecondary"},m("entities.table.pagination.rowsPerPage"))),g.a.createElement(A.a,{className:v.rowsPerPage},g.a.createElement(je.a,{variant:"outlined",className:v.formControl,fullWidth:!0},g.a.createElement(we.a,{native:!0,value:null===u||void 0===u?void 0:u.size,onChange:function(e){var t={target:{value:parseInt(e.target.value,10)}};d(Object(l.a)(Object(l.a)({},u),{},{size:parseInt(e.target.value,10)})),o(t)}},p)))),g.a.createElement(A.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},g.a.createElement(xe.a,{onClick:function(e){return f(e,c-1)},disabled:c<=0,size:"large",variant:"outlined",className:v.button,startIcon:g.a.createElement(Re.a,null)},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},m("entities.table.pagination.previous"))),g.a.createElement(De.a,{className:v.pagination,size:"large",count:b,page:c+1,variant:"outlined",shape:"rounded",hideNextButton:!0,hidePrevButton:!0,onChange:function(e,t){d(Object(l.a)(Object(l.a)({},u),{},{number:t-1})),i(e,t-1)}}),g.a.createElement(xe.a,{onClick:function(e){return f(e,c+1)},disabled:u.number+1>=u.totalPages,size:"large",variant:"outlined",className:v.button,endIcon:g.a.createElement(Ne.a,null)},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},m("entities.table.pagination.next")))))}));Ut.defaultProps={userSelected:void 0};var Bt=Ut,Wt=a(381),Vt=Object(He.a)((function(e){return{priority:{border:0,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),maxWidth:70},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600}}})),Ht=Object(He.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:15,backgroundColor:"#fff"}}),Kt=Object(He.a)({green:{"& div":{backgroundColor:"#25b736"}},yellow:{"& div":{backgroundColor:"#ffff00"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}},perc0:{"& div":{backgroundColor:"#FF0000"}},perc5:{"& div":{backgroundColor:"#FF1A00"}},perc10:{"& div":{backgroundColor:"#FF3300"}},perc15:{"& div":{backgroundColor:"#FF4D00"}},perc20:{"& div":{backgroundColor:"#FF6600"}},perc25:{"& div":{backgroundColor:"#FF8000"}},perc30:{"& div":{backgroundColor:"#FF9900"}},perc35:{"& div":{backgroundColor:"#FFB300"}},perc40:{"& div":{backgroundColor:"#FFCC00"}},perc45:{"& div":{backgroundColor:"#FFE600"}},perc50:{"& div":{backgroundColor:"#FFFF00"}},perc55:{"& div":{backgroundColor:"#E6FF00"}},perc60:{"& div":{backgroundColor:"#CCFF00"}},perc65:{"& div":{backgroundColor:"#B3FF00"}},perc70:{"& div":{backgroundColor:"#99FF00"}},perc75:{"& div":{backgroundColor:"#80FF00"}},perc80:{"& div":{backgroundColor:"#66FF00"}},perc85:{"& div":{backgroundColor:"#4DFF00"}},perc90:{"& div":{backgroundColor:"#33FF00"}},perc95:{"& div":{backgroundColor:"#1AFF00"}},perc100:{"& div":{backgroundColor:"#00FF00"}},percNegative:{"& div":{backgroundColor:"#ab40ff"}}}),_t=Object(He.a)((function(e){return{td:{display:"block",border:"0 solid"},pagination:{border:"0px solid red","& button.Mui-selected":{border:0,color:"#ffffff",backgroundColor:"#86660d"}},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:"#b68902",color:"#b68902"},"& select":{paddingRight:[24,"!important"]},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},rowsPerPage:{width:"60px"},button:{textTransform:"capitalize",color:"#5c636d","& span":{color:"#5c636d"}}}})),Zt=Object(He.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),Qt=g.a.forwardRef((function(e,t){var a=Zt(),n=Object(p.useState)(""),r=Object(N.a)(n,2),o=r[0],i=r[1],c=ne().setSearch;return g.a.createElement(A.a,{p:1},g.a.createElement(M.a,{className:a.root},g.a.createElement(Wt.a,{className:a.input,placeholder:"Ricerca...",inputProps:{"aria-label":"ricerca"},value:o,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){e.preventDefault(),"Enter"===e.key&&c(e.target.value)}}),g.a.createElement(se.a,{className:a.iconButton,"aria-label":"search",onClick:function(){c(o)}},g.a.createElement(Ft.a,null))))})),Jt=function(e){var t=e.onRowClick,a=e.userSelected,n=e.serviceUrl,r=ne(),o=r.error,i=r.setError;return g.a.createElement(g.a.Fragment,null,g.a.createElement(A.a,{p:2,border:0},g.a.createElement(V.a,{container:!0,direction:"row",justify:"space-between"},g.a.createElement(A.a,{border:0,width:"70%"}),g.a.createElement(A.a,{border:0,width:"29%"},g.a.createElement(Qt,null)))),g.a.createElement(A.a,{className:"owner-task-table"},g.a.createElement(Bt,{onRowClick:t,serviceUrl:n,userSelected:a}),o?g.a.createElement(Oe,{status:"error",message:o,onClose:function(){return i(null)},anchorOrigin:{vertical:"top",horizontal:"center"}}):null))};Jt.defaultProps={userSelected:void 0};var qt=Jt,Gt=Object(He.a)((function(e){return{root:{border:0,borderStyle:"solid",display:"flex",padding:e.spacing(1),flexShrink:0,flexWrap:"wrap"}}})),Xt=function(e){var t=e.children,a=Gt();return g.a.createElement("div",{className:a.root},t)},Yt=Object(He.a)((function(e){return{root:{border:1,borderStyle:"solid",backgroundColor:"transparent",borderRadius:4,padding:e.spacing(1),margin:"4px 4px",minWidth:120,textAlign:"center","&:hover":{cursor:"pointer"},"&:focus":{outlineStyle:"none"}}}})),$t=function(e){var t=e.label,a=e.onClick,n=e.bgColor,r=e.disabled,o=e.selected,i=Object(p.useState)(!!o),c=Object(N.a)(i,2),l=c[0],s=c[1],u=Yt(),d=function(){s(!0),a()};return Object(p.useEffect)((function(){s(o)}),[o]),g.a.createElement("div",{className:u.root,onClick:d,onKeyDown:d,role:"button",tabIndex:0,style:{backgroundColor:"".concat(l?n:"transparent"),color:"".concat(l?"#ffffff":n),opacity:"".concat(r?.4:1),pointerEvents:"".concat(r?"none":null)}},g.a.createElement(ye.a,null,t))};$t.defaultProps={onClick:function(){},bgColor:"#2196f3",disabled:!1,selected:!1};var ea=$t,ta=Pe()({palette:{secondary:{main:"#b39f69"}}},u.itIT);var aa={draggable:!1,showTitle:!1,toolbar:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,pageSizeOptions:[5,10,20]},na=g.a.forwardRef((function(e,t){var a=e.count,n=e.rowsPerPage,r=e.rowsPerPageOptions,o=e.onChangeRowsPerPage,i=e.onChangePage,c=e.page,s=ne(),u=s.pagination,d=s.setPagination,b=Math.ceil(a/n),f=function(e,t){d(Object(l.a)(Object(l.a)({},u),{},{number:t})),i(e,t<0?0:t)},p=r.map((function(e){return g.a.createElement("option",{key:e,value:e},e)})),m=Object(C.b)().t,v=_t();return g.a.createElement("td",{className:v.td},g.a.createElement(A.a,{textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start",position:"absolute",top:20,right:"5%"},g.a.createElement(A.a,{marginRight:"20px"},g.a.createElement(ye.a,{variant:"body1",color:"textSecondary"},m("entities.table.pagination.rowsPerPage"))),g.a.createElement(A.a,{className:v.rowsPerPage},g.a.createElement(je.a,{variant:"outlined",className:v.formControl,fullWidth:!0},g.a.createElement(we.a,{native:!0,value:u.size,onChange:function(e){var t={target:{value:parseInt(e.target.value,10)}};d(Object(l.a)(Object(l.a)({},u),{},{size:parseInt(e.target.value,10)})),o(t)}},p)))),g.a.createElement(A.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},g.a.createElement(xe.a,{onClick:function(e){return f(e,c-1)},disabled:c<=0,size:"large",variant:"outlined",className:v.button,startIcon:g.a.createElement(Re.a,null)},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},m("entities.table.pagination.previous"))),g.a.createElement(De.a,{className:v.pagination,size:"large",count:b,page:c+1,variant:"outlined",shape:"rounded",hideNextButton:!0,hidePrevButton:!0,onChange:function(e,t){d(Object(l.a)(Object(l.a)({},u),{},{number:t-1})),i(e,t-1)}}),g.a.createElement(xe.a,{onClick:function(e){return f(e,c+1)},disabled:u.number+1>=u.totalPages,size:"large",variant:"outlined",className:v.button,endIcon:g.a.createElement(Ne.a,null)},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},m("entities.table.pagination.next")))))})),ra=function(e){var t,a=e.onRowClick,n=e.serviceUrl,r=e.selectedFilter,o=e.completedTask,i=Object(p.useRef)(null),c=Object(C.b)().t,s=Vt(),u=Ht(),d=Kt(),b=ne(),m=b.user,v=b.pagination,h=b.setTasks,k=b.setPagination,E=b.search,O=b.setError,y=b.setSearch,j=Object(p.useState)(!1),w=Object(N.a)(j,2),x=w[0],F=w[1],P={toolbar:{nRowsSelected:"{0} ".concat(c("entities.table.rowSelected"))},body:{emptyDataSourceMessage:c("entities.table.empty")},pagination:{labelRowsSelect:c("entities.table.pagination.rows"),labelRowsPerPage:c("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}},S=Object(p.useMemo)((function(){return[{title:"ID",field:"id",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return!0===e.subtreePendingAck||!0===e.subtreePendingComment?g.a.createElement("span",null,e.id," ",g.a.createElement(zt,null)," "):g.a.createElement("span",null,e.id," ")}},{title:"TASK",field:"title",filtering:!0,align:"center"},{title:"UTENTE/RUOLO",field:"responsible",filtering:!0,align:"center",render:function(e){var t;return m&&(t=Object.keys(e).find((function(t){var a;return(null===(a=String(e[t]))||void 0===a?void 0:a.toUpperCase())===(null===m||void 0===m?void 0:m.toUpperCase())}))),g.a.createElement(qe,{image:"/entando-de-app/cmsresources/sme-tasktracker-bundle/static/img/user.jpg",user:e.responsible||"",role:t||""})}},{title:"INIZIO",field:"startDate",filtering:!0,type:"date",align:"center",render:function(e){return e.startDate?g.a.createElement("span",null,Object(ze.default)(Object(Me.default)(e.startDate),"dd/MM/yyyy")):g.a.createElement("span",null,"-")}},{title:"FINE",field:"endDate",filtering:!0,type:"date",align:"center",render:function(e){return e.endDate?g.a.createElement("span",null,Object(ze.default)(Object(Me.default)(e.endDate),"dd/MM/yyyy")):g.a.createElement("span",null,"-")}},{title:"PRIORITA'",field:"priority",filtering:!1,align:"center",render:function(e){return e.priority?g.a.createElement("div",{className:"".concat(s.priority," ").concat(s[e.priority])},c("entities.priority.".concat(e.priority))):g.a.createElement("span",null,"-")}},{title:"% TEMPO RIMANENTE",width:"25%",field:"progress",filtering:!0,sorting:!1,type:"numeric",align:"center",render:function(e){var t,a=function(e,t){var a=Object(Ae.a)(new Date(t),new Date(e)),n=Object(Ae.a)(new Date(t),new Date);return n<=0?0:100*n/a}(e.startDate,e.endDate),n=(t=a,5*Math.ceil(t/5));return g.a.createElement(A.a,{display:"flex",alignItems:"center",minWidth:"25%"},g.a.createElement(A.a,{minWidth:40},g.a.createElement(ye.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(a),"%"))),g.a.createElement(A.a,{width:"100%",mr:1},g.a.createElement(Ce.a,{classes:u,className:"".concat(a>0?d["perc".concat(n)]:d.percNegative),variant:"determinate",valueBuffer:100,value:a||0})))}}]})),R=function(){var e=Object(_.a)(K.a.mark((function e(t){var a,i,s,u,d,b,f,p;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,J(n,r,{page:v.number,pageSize:0===t.pageSize?5:t.pageSize},{sortBy:t.orderBy?t.orderBy.field:"id",sortDirection:t.orderDirection},E,o);case 4:return a=e.sent,i=a.payload,s=a.number,u=a.numberOfElements,d=a.totalElements,b=a.totalPages,f=a.size,p=i.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{progress:e.completionPercentage})})),h(p,{number:s,numberOfElements:u,size:f,totalElements:d,totalPages:b}),e.abrupt("return",{data:p,page:s,totalCount:d});case 11:return e.prev=11,e.t0=e.catch(0),O(c("error.dataLoading")),h([],{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0}),e.abrupt("return",{data:[],page:0,totalCount:0});case 16:return e.prev=16,F(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,11,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){k({number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0,pageSize:10}),i.current&&i.current.onQueryChange()}),[r]),Object(p.useEffect)((function(){i.current&&i.current.onQueryChange()}),[E]),Object(p.useEffect)((function(){return function(){h([],{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0,pageSize:10}),y("")}}),[]),g.a.createElement(f.a,{theme:ta},g.a.createElement(A.a,{className:"div__task-tracker-table-container"},g.a.createElement(Ue.a,{tableRef:i,style:{position:"static"},isLoading:x,icons:Rt,columns:S,data:R,options:Object(l.a)(Object(l.a)({},aa),{},{pageSize:null!==(t=null===v||void 0===v?void 0:v.size)&&void 0!==t?t:5}),title:"",localization:P,onRowClick:function(e,t){return a(t)},components:{Pagination:function(e){var t,a;return g.a.createElement(na,Object.assign({serviceUrl:n},e,{count:null!==(t=null===v||void 0===v?void 0:v.totalElements)&&void 0!==t?t:0,page:null!==(a=null===v||void 0===v?void 0:v.number)&&void 0!==a?a:0,ref:i}))},Row:function(e){return g.a.createElement(Ie.MTableBodyRow,Object.assign({},e,{"data-testid":e.data.id,className:"task-list-row"}))}}})))},oa=function(e){var t=e.onRowClick,a=e.serviceUrl,n=e.completedTask,r=Object(C.b)().t,o=Object(p.useState)("all"),i=Object(N.a)(o,2),c=i[0],l=i[1],s=ne(),u=s.error,d=s.taskCount,b=s.fetchTaskCount,f=s.setError;Object(p.useEffect)((function(){b(n)}),[n]);var m={all:null===d||void 0===d?void 0:d.all,creator:null===d||void 0===d?void 0:d.creator,responsible:null===d||void 0===d?void 0:d.responsible,accountable:null===d||void 0===d?void 0:d.accountable,consulted:null===d||void 0===d?void 0:d.consulted,informed:null===d||void 0===d?void 0:d.informed};return g.a.createElement(g.a.Fragment,null,g.a.createElement(A.a,{py:2,border:0},g.a.createElement(V.a,{container:!0,direction:"row",justify:"space-between"},g.a.createElement(A.a,{border:0,width:"70%"},g.a.createElement(Xt,null,g.a.createElement(ea,{label:r("entities.filter.all",{count:m.all}),onClick:function(){return l("all")},bgColor:"#86660d",selected:"all"===c}),g.a.createElement(ea,{label:r("entities.filter.creator",{count:m.creator}),onClick:function(){return l("creator")},bgColor:"#61ba78",selected:"creator"===c}),g.a.createElement(ea,{label:r("entities.filter.responsible",{count:m.responsible}),onClick:function(){return l("responsible")},bgColor:"#b39f69",selected:"responsible"===c}),g.a.createElement(ea,{label:r("entities.filter.accountable",{count:m.accountable}),onClick:function(){return l("accountable")},bgColor:"#b39f69",selected:"accountable"===c}),g.a.createElement(ea,{label:r("entities.filter.consulted",{count:m.consulted}),onClick:function(){return l("consulted")},bgColor:"#b39f69",selected:"consulted"===c}),g.a.createElement(ea,{label:r("entities.filter.informed",{count:m.informed}),onClick:function(){return l("informed")},bgColor:"#b39f69",selected:"informed"===c}))),g.a.createElement(A.a,{border:0,width:"29%"},g.a.createElement(Qt,null)))),g.a.createElement(A.a,{className:"owner-task-table"},g.a.createElement(ra,{onRowClick:t,serviceUrl:a,selectedFilter:c,completedTask:n}),u?g.a.createElement(Oe,{status:"error",message:u,onClose:function(){return f(null)},anchorOrigin:{vertical:"top",horizontal:"center"}}):null))};oa.defaultProps={completedTask:!1};var ia=oa,ca=Object(He.a)({container:{border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:4,padding:"16px 0"}}),la=Object(He.a)({root:{position:"relative",maxWidth:"50%"},indicator:{backgroundColor:"#86660d"}}),sa=Object(He.a)((function(e){return{root:{textTransform:"none",minWidth:"auto",marginRight:e.spacing(1),marginBottom:e.spacing(2),"&:hover":{color:"#1b1d22",opacity:1},"&$selected":{color:"#1b1d22"},"&:focus":{color:"#1b1d22"}}}})),ua=function(e){return{id:"tab-".concat(e),"data-testid":"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}},da=function(e){var t=e.children,a=e.value,n=e.index,r=Object(D.a)(e,["children","value","index"]);return g.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"tabpanel-".concat(n),"data-testid":"tabpanel-".concat(n),"aria-labelledby":"tab-".concat(n)},r),a===n&&g.a.createElement(A.a,{p:0},t))},ba=function(e){var t=e.keycloak,a=e.serviceUrl,n=e.callback,r=e.tabActive,o=e.userSelected,i=Object(p.useState)(parseInt(r,10)),c=Object(N.a)(i,2),l=c[0],s=c[1],u=Object(C.b)().t,d=ca(),b=sa(),f=la();Object(p.useEffect)((function(){s(parseInt(null!==r&&void 0!==r?r:0,10))}),[r]);var m=function(e){E(v,{task:e}),n&&n(e)};return g.a.createElement(g.a.Fragment,null,g.a.createElement(L,{keycloak:t},g.a.createElement(M.a,{elevation:5},g.a.createElement(z.a,{maxWidth:"xl",disableGutters:!0,className:d.container},g.a.createElement(U.a,{value:l,onChange:function(e,t){s(t)},variant:"fullWidth","aria-label":"tabs-task-tracker",classes:f},g.a.createElement(I.a,Object.assign({label:u("entities.task.tabs.0")},ua(0),{classes:b})),g.a.createElement(I.a,Object.assign({label:u("entities.task.tabs.1")},ua(1),{classes:b})),g.a.createElement(I.a,Object.assign({label:u("entities.task.tabs.2")},ua(2),{classes:b}))),g.a.createElement(da,{value:l,index:0},g.a.createElement(ia,{onRowClick:function(e){return m(e)},serviceUrl:a})),g.a.createElement(da,{value:l,index:1},g.a.createElement(qt,{userSelected:o,serviceUrl:a,onRowClick:function(e){return m(e)}})),g.a.createElement(da,{value:l,index:2},g.a.createElement(ia,{onRowClick:function(e){return m(e)},serviceUrl:a,completedTask:!0}))))))};ba.defaultProps={keycloak:{},useMock:!1,callback:function(){},tabActive:0,userSelected:null};var fa=function(e){var t=function(t){Object(o.a)(c,t);var a=Object(i.a)(c);function c(){var t;Object(n.a)(this,c);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=a.call.apply(a,[this].concat(o))).renderWrappedComponent=function(a){var n=t.props,r=n.forwardedRef,o=Object(D.a)(n,["forwardedRef"]);return g.a.createElement(e,Object.assign({},o,{ref:r,keycloak:a}))},t}return Object(r.a)(c,[{key:"render",value:function(){return g.a.createElement(m.Consumer,null,this.renderWrappedComponent)}}]),c}(p.Component);return t.defaultProps={forwardedRef:function(){}},Object(p.forwardRef)((function(e,a){return g.a.createElement(t,Object.assign({},e,{forwardedRef:a}))}))}(ba),pa=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ga={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",refresh:"refresh"},ma=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keycloak=pa(),e.tabActive="0",e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(ga).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===ga.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t,a,n=this.attachShadow({mode:"open"});n.appendChild(this.container),this.jss=Object(F.c)(Object(l.a)(Object(l.a)({},Object(d.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},u.itIT),this.keycloak=Object(l.a)(Object(l.a)({},pa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=(t="keycloak",a=function(){e.keycloak=Object(l.a)(Object(l.a)({},pa()),{},{initialized:!0}),e.render()},window.addEventListener(t,a),function(){window.removeEventListener(t,a)}),this.onToggleDisableDefaultEvent(),this.render(),T()(n)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(ga.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(ga.serviceUrl)||"";if("true"===this.getAttribute(ga.hidden))S.a.render(g.a.createElement(g.a.Fragment,null));else{var t=this.getAttribute(ga.locale)||"it";x(t),S.a.render(g.a.createElement(m.Provider,{value:this.keycloak},g.a.createElement(b.b,{jss:this.jss},g.a.createElement(f.a,{theme:this.muiTheme},g.a.createElement(te,{keycloak:this.keycloak,serviceUrl:e},g.a.createElement(fa,{serviceUrl:e,callback:this.callback,tabActive:this.tabActive,userSelected:this.userSelected}))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(ga)}}]),a}(Object(c.a)(HTMLElement));customElements.define("task-list",ma)}},[[389,1,2]]]);
//# sourceMappingURL=main.097851dd.chunk.js.map