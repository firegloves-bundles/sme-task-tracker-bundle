(this["webpackJsonptask-detail-widget"]=this["webpackJsonptask-detail-widget"]||[]).push([[0],{190:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore si e\' verificato un errore","adhocTimeout":"Il server @DhOC non risponde","adhocLogin":"Errore durante la connessione al server @DhOC","adhocConnectionNotFound":"Configurazione di connessione al server @DhOC assente per il vertice \\"{vertexId}-{vertexShortName}\\"","adhocSearch":"Errore durante la ricerca dei documenti @DhOC","adhocDownload":"Errore durante il recupero del documento @DhOC","invalidDateMessage":"Formato della data non valido"},"message":{"taskCreated":"Il Task e\' stato creato. ID: {{id}}","noteCreated":"La Nota e\' stata creata. ID: {{id}}","noteDeleted":"La Nota e\' stata cancellata. ID: {{id}}","actionCreated":"L\'Azione e\' stata creata","attachmentAdded":"L\'allegato e\' stato aggiunto","attachmentDeleted":"L\'allegato e\' stato eliminato"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","select":"Seleziona","delete":"Elimina","yes":"Si","no":"No"},"validation":{"required":"Il campo \xe8 obbligatorio","maxLength":"La lunghezza massima \xe8 di {{maxLength}}","maxLenght":"","minimum":"Il valore minimo \xe8 di {{minimum}}","maximum":"Il valore massimo \xe8 di {{maximum}}"},"entities":{"creation":{"tabs":["Setup","Definizione Task","Azioni","Allegati","Note"],"setup":{"title":"Scegli il Process Model del Task","processModel":"PROCESS MODEL","processModelPlaceholder":"Seleziona un process Model..."},"taskDefinition":{"task":"TASK","taskPlaceholder":"Dai un nome al Task...","startDate":"INIZIO","endDate":"FINE","priority":"PRIORITA\'","priorityPlaceholder":"Imposta il livello di priorita\' del Task...","description":"DESCRIZIONE","descriptionPlaceholder":"Inserisci una descrizione ...","low":"Bassa","medium":"Media","high":"Alta","assignRole":"Assegna il Ruolo","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","completionPercentage":"% di completamento","completionPercentagePlaceholder":"Imposta la percentuale di completamento"},"actions":{"add":"Aggiungi Azione","addSubaction":"Aggiungi Sottoazione","addTaskAction":"Aggiungi Azioni al Task","addTaskActionDescription":"Se non vuoi dettagliare ora le Azioni del Task \\n fai click su <0>Avanti</0> potrati occupartente\\n  in un secondo momento","action":"Azione","actionPlaceholder":"Dai un nome all\'azione...","subAction":"Sottoazione","subActionPlaceholder":"Dai un nome alla sottoazione...","description":"Descrizione","descriptionPlaceholder":"Inserisci una descrizione ...","end":"Entro","automatic":"Automatico","yes":"Si","no":"No","completion":"Completamento","assignRole":"Assegna il Ruolo","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","popper":{"title":"Completamento","description":"Se automatico e\' settato su \'Si\'\\n l\'azione principale si completa non\\n appena le sottoazioni vengono completate."}},"attachment":{"addAttachment":"Aggiungi allegati da @DhOC o El Cloud","addAttachmentDescription":"Se non vuoi aggiungere allegati al Task\\n fai click su <0>Avanti</0> potrai occupartene\\n in un secondo momento.","addButton":"Aggiungi Allegato al Task","dhoc":"Aggiungi da <0>@DhOC</0>","elcloud":"Aggiungi da <0>El Cloud</0>","einetAttachments":"EInet ({{count}})","adhocAttachments":"@dhoc ({{count}})"},"note":{"addNote":"Aggiungi note al Task","addNoteDescription":"Se non vuoi aggiungere note al Task\\n fai click su <0>Pubblica Task</0> potrai occupartene\\n in un secondo momento.","addButton":"Aggiungi Nota al Task","info":"NOTA {{index}} DI  {{size}}","now":"Adesso"},"buttons":{"next":"Avanti","previous":"Indietro","publish":"Pubblica Task"},"dialog":{"users":{"title":"Assegna","button":"Assegna ruolo","buttonClose":"Chiudi","search":"Cerca un utente...","assign":"Assegna a me"},"attachment":{"titleDhoc":"Aggiungi un allegato da <0>@DhOC</0>","titleElCloud":"Aggiungi un allegato da <0>El Cloud</0>","protocolDhOc":"PROTOCOLLO","protocolDhOcPlaceholder":"Inserisci il n\xb0 di protocollo...","yearDhOc":"ANNO","yearDhOcPlaceholder":"Inserisci l\'anno di riferimento...","registryDhOc":"REGISTRO","registryDhOcPlaceholder":"Inserisci il registro di riferimento...","searchDhOC":"Cerca allegato","attachment":"Allegato...","notFound":"Allegato non trovato","add":"Aggiungi","cancel":"Annulla","dragAndDrop":"Trascina un file qui dentro","selectedFile":"File Selezionato","linkNextcloud":"Link NextCloud","linkNextcloudPlaceholder":"inserisci il link interno di file/cartella NextCloud..."},"note":{"title":"Nuova Nota del Task","buttonPublish":"Pubblica Nota","placeholder":"Inserisci la nota..."}}},"detail":{"progress":"","priority":""}}}')},191:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"validation":{"required":"{{field}} is required"},"entities":{"task":{"deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Tabella vuota"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},258:function(e,t,a){e.exports=a(718)},718:function(e,t,a){"use strict";a.r(t);var n=a(183),r=a(184),o=a(185),i=a(234),c=a(235),l=a(2),s=a(232),d=a(231),u=a(780),m=a(790),b=a(776),p=a(0),f=a.n(p),g=f.a.createContext(null),h="task.detail",v=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},E=a(28),x=a(157),O=a(17),y={it:a(190),en:a(191)},k=Object.keys(y).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(E.a)({},t,Object(E.a)({},"translation",y[t])))}),{}),C=(x.a.t,function(e){!function(e,t){x.a.use(O.b).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:k,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),j=a(42),w=a(24),S=a.n(w),A=a(192),N=a.n(A),D=a(99),T=a(7),I=a.n(T),R=a(14),M=a(9),P=a(750),B=a(722),U=a(773),z=a(781),L=a(775),F=a(779),H=a(23),V=a(100),W=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},q=Object(p.createContext)([{},function(){}]),G=function(){var e=Object(p.useContext)(q),t=Object(M.a)(e,2),a=t[0],n=t[1];return{error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},setError:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:e})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},setMessage:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e})}))}}},_=Object(p.createContext)([{},function(){}]),K=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},Y=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r,o=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!n){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r,o,i=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,fetch(t,a);case 3:if(200!==(r=e.sent).status){e.next=8;break}return o=r.headers.get("Content-Disposition").split("filename=")[1],r.blob().then((function(e){var t=window.URL.createObjectURL(e);if(console.log("requestBlob filename",o),n&&o.toLowerCase().endsWith(".pdf")){window.open().location.href=t}else{var a=document.createElement("a");a.href=t,a.download=o,a.click()}})),e.abrupt("return",null);case 8:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(Object(l.a)({},K()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",Y(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=Object(l.a)(Object(l.a)({},K()),{},{method:"DELETE"}),e.abrupt("return",Y(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(R.a)(I.a.mark((function e(t,a,n){var r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(a,"?").concat("referenceType=").concat(n),o=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("adhoc/search"),r=Object(l.a)(Object(l.a)({},K()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",Y(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(R.a)(I.a.mark((function e(t,a,n){var r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("adhoc/download"),o=Object(l.a)(Object(l.a)({},K()),{},{method:"POST",body:a?JSON.stringify(a):null,responseType:"blob"}),e.abrupt("return",J(r,o,n));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(R.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("all/types"),n=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.serviceUrlAttachments,o=e.useMock,i=Object(p.useState)({keycloak:a,serviceUrl:n,serviceUrlAttachments:r,attachments:[],error:null,message:null,useMock:o,allClouds:{},allReferenceType:{}}),c=Object(M.a)(i,2),s=c[0],d=c[1],u=Object(O.c)().t,m=G().setError;return Object(p.useEffect)((function(){var e=function(){var e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(r);case 3:t=e.sent,d((function(e){return Object(l.a)(Object(l.a)({},e),{},{allClouds:t.payload.clouds,allReferenceType:t.payload.references})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d(Object(l.a)(Object(l.a)({},s),{},{error:u("error.dataLoading"),message:null})),m(u("error.dataLoading"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&(d((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:a})})),e())}),[a]),f.a.createElement(_.Provider,{value:[s,d]},t)},ne=Object(p.createContext)([{loading:!1},function(){}]),re=function(){var e=Object(p.useContext)(ne),t=Object(M.a)(e,2),a=t[0],n=t[1];return{isLoading:a.loading,setLoading:function(e){n({loading:e})}}},oe=Object(p.createContext)([{},function(){}]),ie=function(e){var t=e.children,a=e.taskId,n=e.keycloak,r=e.serviceUrl,o=e.useMock,i=Object(p.useState)({taskId:a,notes:[],error:null,message:null,keycloak:n,serviceUrl:r,useMock:o}),c=Object(M.a)(i,2),s=c[0],d=c[1];return Object(p.useEffect)((function(){n.initialized&&n.authenticated&&d((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:n})}))}),[n]),f.a.createElement(oe.Provider,{value:[s,d]},t," ")};ie.defaultProps={taskId:null};var ce=ie,le=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks"),r=Object(l.a)(Object(l.a)({},K()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",Y(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=Object(p.createContext)([{},function(){}]),ue=function(){var e=Object(p.useContext)(de),t=Object(M.a)(e,2),a=t[0],n=t[1],r=re().setLoading,o=Object(O.c)().t,i=a.serviceUrl,c=a.useMock,s=G(),d=s.setError,u=s.setMessage,m=function(){var e=Object(R.a)(I.a.mark((function e(t){var s,m,b;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=8;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(t)}))}),500);case 5:return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:{id:"33"},message:o("message.taskCreated",{id:33})})})),u(o("message.taskCreated",{id:33})),e.abrupt("return",33);case 8:return e.next=10,se(i,t);case 10:if(!(s=e.sent).payload.id){e.next=18;break}return e.next=14,le(i,s.payload.id);case 14:m=e.sent,b=Object(l.a)(Object(l.a)({},m.payload),{},{processDefinitionId:t.processDefinitionId}),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:b,message:o("message.taskCreated",{id:s.payload.id})})})),u(o("message.taskCreated",{id:s.payload.id}));case 18:return e.abrupt("return",s.payload.id);case 21:e.prev=21,e.t0=e.catch(0),console.error("error",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),d(o("error.dataLoading"));case 26:return e.prev=26,r(!1),e.finish(26);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[0,21,26,29]])})));return function(t){return e.apply(this,arguments)}}();return{contextActions:a.actions,actions:a.actions,task:a.task,updateTask:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{task:Object(l.a)(Object(l.a)({},t.task),e)})}))},createTask:m,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},me=a(721),be=a(56),pe=a.n(be),fe=function(e){var t=e.message,a=e.callback,n=e.status,r=e.autoHideDuration,o=Object(V.b)(),i=o.enqueueSnackbar,c=o.closeSnackbar,l={variant:n,autoHideDuration:r,action:function(e){return f.a.createElement(me.a,{onClick:function(){a(),c(e)}},f.a.createElement(pe.a,null))},onClose:function(){return a()},preventDuplicate:!0};return Object(p.useEffect)((function(){t&&i(t,l)}),[t]),f.a.createElement(f.a.Fragment,null)};fe.defaultProps={message:void 0,callback:function(){},autoHideDuration:3e3};var ge=fe,he=a(725),ve=Object(he.a)({spinner:{zIndex:99999,display:"inline-block",position:"absolute",top:"30%",left:"50%",width:"80px",height:"80px","& div":{transformOrigin:"40px 40px",animation:"$spinner 1.2s linear infinite"},"& div::after":{content:'" "',display:"block",position:"absolute",top:"3px",left:"37px",width:"5px",height:"18px",borderRadius:"20%",background:"currentColor"},"& div:nth-child(1)":{transform:"rotate(0deg)",animationDelay:"-1.1s"},"& div:nth-child(2)":{transform:"rotate(30deg)",animationDelay:" -1s"},"& div:nth-child(3)":{transform:"rotate(60deg)",animationDelay:" -0.9s"},"& div:nth-child(4)":{transform:"rotate(90deg)",animationDelay:" -0.8s"},"& div:nth-child(5)":{transform:"rotate(120deg)",animationDelay:" -0.7s"},"& div:nth-child(6)":{transform:"rotate(150deg)",animationDelay:" -0.6s"},"& div:nth-child(7)":{transform:"rotate(180deg)",animationDelay:" -0.5s"},"& div:nth-child(8)":{transform:"rotate(210deg)",animationDelay:" -0.4s"},"& div:nth-child(9)":{transform:"rotate(240deg)",animationDelay:" -0.3s"},"& div:nth-child(10)":{transform:"rotate(270deg)",animationDelay:" -0.2s"},"& div:nth-child(11)":{transform:"rotate(300deg)",animationDelay:" -0.1s"},"& div:nth-child(12)":{transform:"rotate(330deg)",animationDelay:" 0s"}},"@keyframes spinner":{from:{opacity:0},to:{opacity:1}}}),Ee=function(){var e=ve();return f.a.createElement("div",{className:e.spinner},f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null))},xe=Object(he.a)({container:{border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:4,padding:"16px 0"}}),Oe=Object(he.a)({root:{position:"relative",borderBottom:"1px solid #e8e8e8"},indicator:{backgroundColor:"#86660d"}}),ye=Object(he.a)((function(e){return{root:{textTransform:"none",marginRight:e.spacing(1),marginBottom:e.spacing(2),"&:hover":{color:"#1b1d22",opacity:1},"&$selected":{color:"#1b1d22"},"&:focus":{color:"#1b1d22"}}}})),ke=a(80),Ce=a(754),je=a(755),we=a(103),Se=a(57),Ae=a.n(Se),Ne=a(82),De=a.n(Ne),Te=a(83),Ie=a.n(Te),Re=a(219),Me=a.n(Re),Pe=a(44),Be=a(786),Ue=a(107),ze=a.n(Ue),Le=a(60),Fe=a(212),He=a.n(Fe),Ve=a(211),We=a.n(Ve),qe=a(156),Ge=a.n(qe),_e=Object(he.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{height:"726px"},border:{border:1,borderTop:0,borderRight:0,borderStyle:"solid",borderColor:e.palette.action.disabled},borderButton:{border:1,borderRight:0,borderLeft:0,borderTop:0,borderStyle:"solid",borderColor:e.palette.action.disabled},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},gridContainer:{border:"0px solid red"},inputInfo:{border:"0 solid red"},borderBox:{borderBottom:0,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,minHeight:"50px",textAlign:"center",padding:e.spacing(2)},borderBoxInfo:{paddingRight:e.spacing(1)},boxActions:{border:"0 solid red",padding:e.spacing(0)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},buttonAddAction:{borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"100%",minHeight:"60px"},boxButtons:{border:"0 solid black",margin:0,bottom:0},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},highlight:{color:"#efb868",fontWeight:600}}})),Ke=Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled},boxCircle:{border:"0 solid red",minHeight:"60px",position:"relative"},circle:{width:"10px",height:"10px",borderRadius:"50%",border:1,borderStyle:"solid",margin:0,position:"absolute",top:"50%",left:0,transform:"translate(0, -50%)",color:"#b2b6b9"},boxAction:{width:"100%",backgroundColor:"#f4f4ec",color:"#86660b",minHeight:"60px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",marginBottom:e.spacing(2)},iconAction:{border:"0 solid red"},boxIconSubAction:{backgroundColor:"#ffffff",color:e.palette.action.disabled,marginRight:e.spacing(2),paddingLeft:e.spacing(1),minHeight:"60px","& .MuiSvgIcon-root":{paddingTop:"15px"}},boxTextAction:{border:"0 solid blue",width:"100%",textAlign:"left"},boxAddSubAction:{border:"0 solid blue",height:"50px",marginBottom:e.spacing(2)},buttonAddSubAction:{height:"100%",width:"100%",textTransform:"none"}}})),Ye=function(e){var t=e.actions,a=e.handleClickAction,n=e.disabledButton,r=Ke(),o=Object(O.c)().t;return t.map((function(e,t){return f.a.createElement(F.a,{key:Object(H.uniqueId)("action-info_")},f.a.createElement(Ce.a,{container:!0},f.a.createElement(Ce.a,{item:!0,xs:1,classes:{item:r.item}},f.a.createElement(F.a,{className:r.boxCircle},f.a.createElement(F.a,{className:r.circle}))),f.a.createElement(Ce.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(F.a,{className:r.boxAction},f.a.createElement(F.a,{marginLeft:2,marginRight:2,className:r.iconAction},f.a.createElement(Ge.a,{fontSize:"small"})),f.a.createElement(F.a,{className:r.boxTextAction},f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},"".concat(e.title||"Azione"," "))))),e.subActions.map((function(e){return f.a.createElement(f.a.Fragment,{key:Object(H.uniqueId)("sub-action_")},f.a.createElement(Ce.a,{key:Object(H.uniqueId)("sub-action_"),item:!0,xs:1,classes:{item:r.item}}),f.a.createElement(Ce.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(F.a,{className:r.boxAction},f.a.createElement(F.a,{className:r.boxIconSubAction},f.a.createElement(We.a,{fontSize:"small"})),f.a.createElement(F.a,{marginRight:2,className:r.iconAction},f.a.createElement(Ge.a,{fontSize:"small"})),f.a.createElement(F.a,{className:r.boxTextAction},f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},"".concat(e.title))),f.a.createElement(F.a,{marginRight:2,className:r.iconAction},f.a.createElement(He.a,{fontSize:"small"})))))})),f.a.createElement(Ce.a,{item:!0,xs:1,classes:{item:r.item}}),f.a.createElement(Ce.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(F.a,{className:r.boxAddSubAction},f.a.createElement(je.a,{variant:"outlined",type:"button",className:r.buttonAddSubAction,startIcon:f.a.createElement(Ae.a,null),onMouseDown:function(){return function(e){a("subAction",e)}(t)},disabled:n},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},o("entities.creation.actions.addSubaction")))))))}))},Je=a(788),Ze=a(133),Xe=a.n(Ze),$e=a(69),Qe=a.n($e),et=a(785),tt=a(763),at=a(764),nt=a(238),rt=a(765),ot=a(783),it=a(766),ct=a(47),lt=a(762),st=a(215),dt=a.n(st),ut=a(81),mt=a.n(ut),bt=function(){var e=Object(R.a)(I.a.mark((function e(t){var a,n,r,o,i,c=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{page:0,pageSize:10},n=c.length>2?c[2]:void 0,r=c.length>3&&void 0!==c[3]&&c[3],o="".concat(t,"/").concat("users","?informedOrConsulted=").concat(r,"&sortBy=lastname,firstname,id"),a&&(o+="&page=".concat(a.page,"&size=").concat(a.pageSize)),n&&(o+="&globalSearch=".concat(n)),i=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(o,i));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(R.a)(I.a.mark((function e(t,a,n){var r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("users","/fiscalCode/").concat(a),n&&(r+="?loadEdoTree=true"),o=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(r,o));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ft={payload:[{id:13,firstname:"Massimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"AAAA",parent:{id:13,firstname:"BBBBBMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"BBB",parent:{id:13,firstname:"CCCCMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"CCC",parent:{id:13,firstname:"ESERCITOMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"ESERCITO",active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:14,firstname:"Patrizio",lastname:"Antonucci",degree:"Maresciallo",active:!0,edo:{id:7,name:"Sezione 2",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:6,active:!0},fiscalCode:"pantonucci",entity:null,entityDenomination:null,email:"patrizio.antonucci@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:17,firstname:"Carmine",lastname:"Armelini",degree:"Ten. Col.",active:!0,edo:{id:10,name:"Nucleo 3",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:7,active:!0},fiscalCode:"carmelini",entity:null,entityDenomination:null,email:"carmine.armelini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:11,firstname:"Mario",lastname:"Bianchi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"user",entity:null,entityDenomination:null,email:"mario.bianchi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:7,firstname:"Carlo",lastname:"Bianchi",degree:"Ten. Col.",active:!1,edo:null,fiscalCode:"ddd1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:21,firstname:"Giovanni",lastname:"Biscetti",degree:"1\xb0 Luogotenente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"giovanni.biscetti@esercito.difesa.it",armedForce:null,dateOfBirth:"1983-01-14",phone:"1-844-658-0870",mobilePhone:"1-844-658-0870"},{id:10,firstname:"Pasquale",lastname:"Calogero",degree:"Mar.",active:!0,edo:null,fiscalCode:"eee4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:2,firstname:"Gabriele",lastname:"Cappio",degree:"Serg. Magg.",active:!0,edo:{id:2,name:"Reparto 1",headUser:1,defaultUser:1,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aaa4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:22,firstname:"Salvatore",lastname:"Di Bella",degree:"Sergente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"salvatore.dibella@esercito.difesa.it",armedForce:null,dateOfBirth:"1984-01-14",phone:"1-795-964-4892",mobilePhone:"1-285-703-1251"},{id:23,firstname:"Giuseppe Mario",lastname:"Di Stefano",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstgpp77t06z614k",entity:null,entityDenomination:null,email:"giuseppemario.distefano@esercito.difesa.it",armedForce:null,dateOfBirth:"1990-01-14",phone:"1-798-383-5696",mobilePhone:"1-258-640-7566"}],totalPages:15,totalElements:148,numberOfElements:10,number:0,size:10,first:!0,last:!1},gt=[{id:"SME_TaskTrackerCase.TaskTracker",value:"SME_TaskTrackerCase.TaskTracker"}],ht=Object(p.createContext)([{},function(){}]),vt=function(){var e=Object(p.useContext)(ht),t=Object(M.a)(e,2),a=t[0],n=t[1],r=Object(O.c)().t,o=a.serviceUrl,i=a.useMock,c=a.logged,s=G(),d=function(){var e=Object(R.a)(I.a.mark((function e(t,d,u){var m,b,p,f,g,h,v,x,O,y,k,C,j;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=7;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e(ft)}))}),100);case 4:m=e.sent,e.next=10;break;case 7:return e.next=9,bt(o,t,d,u);case 9:m=e.sent;case 10:p=(b=m).payload,f=b.totalPages,g=b.totalElements,h=b.numberOfElements,v=b.number,x=b.size,O=b.first,y=b.last,p&&(k=p.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r}),e}),{}),C=a.users[c],j=Object.keys(k).find((function(e){var t;return(null===(t=k[e])||void 0===t?void 0:t.fiscalCode.toUpperCase())===c})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{users:j?k:Object(l.a)(Object(l.a)({},k),{},Object(E.a)({},null===C||void 0===C?void 0:C.fiscalCode.toUpperCase(),C)),pagination:{totalPages:f,totalElements:g,numberOfElements:h,number:v,size:x,first:O,last:y}})}))),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:r("error.dataLoading"),message:null})),s.setError(r("error.dataLoading"));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{logged:a.logged,vertexId:a.vertexId,vertexShortName:a.vertexShortName,users:a.users,serviceUrl:a.serviceUrl,useMock:a.useMock,setUsers:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{users:e})}))},setPagination:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{pagination:e}))},fetchUser:d,setError:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:e})}))},clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},setMessage:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},Et=a(756),xt=a(757),Ot=a(758),yt=a(759),kt=a(760),Ct=a(761),jt=a(213),wt=a(214),St=a.n(wt),At=Object(he.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:St.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Nt=function(e){var t=e.handleClick,a=e.search,n=e.usersSelected,r=e.role,o=vt(),i=o.logged,c=o.users,s=o.useMock,d=o.serviceUrl,u=o.setUsers,m=o.setError,b=Object(p.useState)([]),g=Object(M.a)(b,2),h=g[0],v=g[1],x=Object(p.useState)([]),y=Object(M.a)(x,2),k=y[0],C=y[1],j=Object(p.useRef)(),w=Object(O.c)().t,S=At(),A=Object(jt.a)({fetchSize:40,scroller:j,limit:1e5}),N=A.start,D=A.end,T=A.setIsFetching,P=A.forceDonefetching,B=function(){var e=Object(R.a)(I.a.mark((function e(t,n){var o,c,u,b,p,f,g;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=n/(o=n-t)-1,!s){e.next=9;break}return e.next=6,new Promise((function(e){return setTimeout((function(){return e(ft)}),500)}));case 6:u=e.sent,e.next=12;break;case 9:return e.next=11,bt(d,{page:c,pageSize:o},a,"consulted"===r||"informed"===r);case 11:u=e.sent;case 12:return p=(b=u).payload,f=b.totalPages,g=b.number,f<g&&P(),e.abrupt("return",p.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r,hidden:t.fiscalCode.toUpperCase()===i}),e}),{}));case 17:e.prev=17,e.t0=e.catch(0),m(w("error.dataLoading"));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){return C([]),function(){u(Object(E.a)({},i,c[i]))}}),[]),Object(p.useEffect)((function(){N!==D&&(T(!0),B(N,D).then((function(e){u(Object(l.a)(Object(l.a)({},c),e)),T(!1)})))}),[N,D]),Object(p.useEffect)((function(){var e=Object.keys(c).reduce((function(e,t){return"undefined"!==t&&e.push(Object(l.a)({id:t},c[t])),e}),[]);v(function(e){var t=new Set;return e.filter((function(e){return"undefined"!==e.id})).filter((function(e){return!e.hidden})).filter((function(e){var a=e.lastname.charAt(0).toUpperCase(),n=t.has(a);return t.add(a),!n})).map((function(e){return e.lastname.charAt(0).toUpperCase()}))}(e)),C(e)}),[c]),f.a.createElement(Et.a,{className:S.list,subheader:f.a.createElement("li",null),ref:j},h.map((function(e,a){return f.a.createElement("li",{key:"section-".concat(e),className:S.listSection},f.a.createElement("ul",{className:"".concat(S.ul," ").concat(0===a?"first":"")},f.a.createElement(xt.a,{classes:{root:S.subHeader}},e),k.filter((function(e){return!e.hidden})).filter((function(t){return t.lastname.charAt(0).toUpperCase()===e})).map((function(e){var a;return f.a.createElement(Ot.a,{key:Object(H.uniqueId)("list-item"),disabled:e.selected},f.a.createElement(yt.a,null,f.a.createElement(Je.a,null)),f.a.createElement(kt.a,{primary:"".concat(e.firstname," ").concat(e.lastname),secondary:e.role}),f.a.createElement(Ct.a,null,f.a.createElement(ot.a,{className:S.radio,checked:n&&(null===(a=n[r])||void 0===a?void 0:a.fiscalCode.toUpperCase())===e.fiscalCode.toUpperCase(),onClick:t,value:e.fiscalCode.toUpperCase(),name:"radio-button-".concat(e.id),inputProps:{"aria-label":e.id},disabled:!!Object.keys(n).map((function(e){return n[e].fiscalCode.toUpperCase()})).find((function(t){return t===e.fiscalCode.toUpperCase()}))})))}))))})))};Nt.defaultProps={role:""};var Dt=Nt,Tt=function(e){return f.a.createElement(mt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(B.a,e))},It=function(e){var t,a=e.open,n=e.handleClose,r=e.usersSelected,o=e.handleUserSelected,i=e.role,c=Object(O.c)().t,l=Object(p.useState)(null),s=Object(M.a)(l,2),d=s[0],u=s[1],m=Object(p.useState)(""),b=Object(M.a)(m,2),g=b[0],h=b[1],v=Object(ct.a)(),E=vt(),x=E.logged,y=E.users,k=E.fetchUser,C=(Object(lt.a)(v.breakpoints.down("sm")),At()),j=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current}(g),w=function(e){var t=e.target.value;u(t.toUpperCase()),o&&o(y[t.toUpperCase()])},S=function(e){k(null,e,"consulted"===i||"informed"===i)},A=function(){return Object.keys(r).length>0&&!!Object.keys(r).map((function(e){return r[e].fiscalCode.toUpperCase()})).find((function(e){return e===x.toUpperCase()}))};return f.a.createElement(et.a,{fullWidth:!0,maxWidth:"sm",open:a,onClose:function(){return n()},PaperComponent:Tt,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:C.dialog},f.a.createElement(tt.a,{className:C.dialogTitle,id:"form-dialog-title",onClose:function(){return n()}},f.a.createElement("div",null,c("entities.creation.dialog.users.title")," ",f.a.createElement("span",{className:C.role},i)),f.a.createElement(me.a,{"aria-label":"close",className:C.closeButton,onClick:function(){return n()}},f.a.createElement(pe.a,null))),f.a.createElement(at.a,null,f.a.createElement(Ce.a,{container:!0,spacing:2},f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(F.a,{className:C.boxTools},f.a.createElement(F.a,{className:C.boxInput},f.a.createElement(nt.a,{id:"search",className:C.input,name:"search",value:g,placeholder:c("entities.creation.dialog.users.search"),inputProps:{"aria-label":c("entities.creation.dialog.users.search")},onKeyUp:function(e){var t=e.key,a=e.target.value;h(""),h(a),"Enter"===t&&S(a)}}),f.a.createElement(me.a,{className:"".concat(C.iconButton," ").concat(g!==j?"active":""),"aria-label":"search",disabled:""===g,onClick:function(){return S(g)}},f.a.createElement(dt.a,null))),f.a.createElement(F.a,{className:C.boxAssign},f.a.createElement(rt.a,{value:"start",disabled:A(),style:{pointerEvents:"".concat(A()?"none":"auto")},control:f.a.createElement(ot.a,{className:C.radio,disabled:A(),checked:r&&(null===(t=r[i])||void 0===t?void 0:t.fiscalCode.toUpperCase())===x.toUpperCase()}),label:c("entities.creation.dialog.users.assign"),labelPlacement:"start",onClick:function(){return w({target:{value:x}})}}))),f.a.createElement(F.a,null,y&&Object.keys(null!==y&&void 0!==y?y:{}).length>0?f.a.createElement(Dt,{selectedValue:d,handleClick:w,search:g,usersSelected:r,role:i}):null)))),f.a.createElement(it.a,{className:C.dialogActions},f.a.createElement(je.a,{onClick:function(){return n()},className:C.buttonClose},c("entities.creation.dialog.users.buttonClose")),f.a.createElement(je.a,{onClick:function(){return n()},className:C.button,disabled:null===d},c("entities.creation.dialog.users.button"))))};It.defaultProps={role:"",usersSelected:void 0};var Rt=It,Mt=a(778),Pt=Object(he.a)({datePicker:{border:"0 solid red",marginTop:0,"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiInputBase-input":{textTransform:"capitalize"},"& .MuiInputAdornment-positionEnd":{marginLeft:"-5px"}}}),Bt=function(e){var t=e.control,a=e.name,n=e.rules,r=e.errors,o=e.format,i=e.setValue,c=e.initialValue,l=e.minDate,s=e.maxDate,d=e.invalidDateMessage,u=Pt();return Object(p.useEffect)((function(){c&&i(a,c)}),[c]),f.a.createElement(Le.a,{error:!Object(H.isEmpty)(r[a]),render:function(e){var t=e.onChange,a=e.onBlur,n=e.value,r=e.ref;return f.a.createElement(Mt.a,{onBlur:a,onChange:t,inputRef:r,className:u.datePicker,value:n,inputVariant:"outlined",autoOk:!0,disableToolbar:!0,invalidDateMessage:d,variant:"inline",format:o,margin:"normal",id:"date-picker-inline",label:"",KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0,minDate:l,maxDate:s})},control:t,rules:n,name:a,defaultValue:new Date})};Bt.defaultProps={rules:{},format:"dd/MM/yyyy",initialValue:void 0,minDate:void 0,maxDate:void 0,invalidDateMessage:"Invalid Date Format"};var Ut=Bt,zt=function(e){var t=e.title,a=e.children,n=Object(D.a)(e,["title","children"]);return f.a.createElement(F.a,n,f.a.createElement(F.a,{border:0,textAlign:"left",p:1},f.a.createElement(we.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(F.a,{border:0,textAlign:"left"},a))},Lt=a(772),Ft=a(217),Ht=a.n(Ft),Vt=a(753),Wt=Object(Vt.a)((function(e){return{paper:{width:"180px",padding:e.spacing(1),backgroundColor:"#2d2b1f","& .MuiTypography-root":{color:"#fff"}},popper:{zIndex:1,'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.background.paper," transparent transparent transparent")}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}})),qt=function(e){var t=e.title,a=e.children,n=e.contentPopper,r=Object(D.a)(e,["title","children","contentPopper"]),o=f.a.useState(!1),i=Object(M.a)(o,2),c=i[0],l=i[1],s=Wt(),d=Object(p.useRef)(null),u=Object(p.useState)(null),m=Object(M.a)(u,2),b=m[0],g=m[1];return f.a.createElement(F.a,r,f.a.createElement(Lt.a,{open:c,anchorEl:d.current,className:s.popper,placement:"top",disablePortal:!0,modifiers:{flip:{enabled:!0},arrow:{enabled:!0,element:b},preventOverflow:{enabled:"true",boundariesElement:"scrollParent"}}},f.a.createElement("span",{className:s.arrow,ref:g}),f.a.createElement(B.a,{className:s.paper},f.a.createElement(we.a,{variant:"body1"},n.title),f.a.createElement(we.a,{variant:"body2"},n.description))),f.a.createElement(F.a,{border:0,textAlign:"left",p:1,display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(F.a,{marginRight:2},f.a.createElement(we.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(F.a,{onClick:function(){l((function(e){return!e}))},ref:d,height:"20px"},f.a.createElement(Ht.a,{fontSize:"small"}))),f.a.createElement(F.a,{border:0,textAlign:"left"},a))},Gt=a(770),_t=a(218),Kt=a.n(_t),Yt=Object(he.a)((function(e){return{boxSwitch:{border:1,borderRadius:4,borderStyle:"solid",borderColor:e.palette.action.disabled,width:"100%",minHeight:"54px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-around"},switch:{border:"0 solid red",margin:e.spacing(1)},checkedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2},uncheckedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2}}})),Jt=function(e){var t=e.label,a=e.on,n=e.off,r=e.onChange,o=Yt(),i=f.a.useState(!0),c=Object(M.a)(i,2),l=c[0],s=c[1];return f.a.createElement(Gt.a,{variant:"outlined",fullWidth:!0},f.a.createElement(F.a,{position:"relative",width:1},f.a.createElement(F.a,{className:o.boxSwitch},f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},t)),f.a.createElement(Kt.a,{onChange:function(e){s(e),r&&r(e)},checked:l,className:o.switch,width:70,onColor:"#2d2b1f",checkedIcon:f.a.createElement("div",{className:o.checkedIcon},a),uncheckedIcon:f.a.createElement("div",{className:o.uncheckedIcon},n)}))))},Zt=a(789),Xt=a(771),$t=function(e){var t,a=e.register,n=e.errors,r=e.name,o=e.placeholder,i=e.watch,c=e.debug,l=e.showCountCaracthers,s=e.countCaracthers,d=e.multiline,u=e.rows,m=e.rowsMax,b=e.initialValue,g=e.setValue,h=e.cssClass,v=e.type;return c&&console.log("watch",i(r)),Object(p.useEffect)((function(){b&&g&&g(r,b)}),[b,g,r]),f.a.createElement(Gt.a,{variant:"outlined",fullWidth:!0,error:!Object(H.isEmpty)(n[r])},f.a.createElement(F.a,{position:"relative",width:1},f.a.createElement(Zt.a,{type:v,fullWidth:!0,id:"component-".concat(r),placeholder:o,inputRef:a,name:r,multiline:d,rows:u,rowsMax:m,className:h}),l?f.a.createElement(F.a,{position:"absolute",bottom:0,right:"10px"},f.a.createElement(we.a,{variant:"caption",color:"textSecondary"},i(r)?i(r).length:0," / ",s)):null),f.a.createElement(Xt.a,{id:"component-".concat(r,"-error-text")},null===(t=n[r])||void 0===t?void 0:t.message))};$t.defaultProps={debug:!1,multiline:!1,showCountCaracthers:!1,countCaracthers:0,rows:2,rowsMax:4,initialValue:"",cssClass:"",type:"text"};var Qt=$t,ea=(Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"110px"}}})),Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"150px"}}}))),ta=Object(he.a)((function(e){return{boxGrid:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},gridContainer:{border:"0 solid red",padding:e.spacing(0)},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},boxActions:{border:"1px solid red",padding:e.spacing(1)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),textAlign:"center","& .boxIcon":{}},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},button:{margin:e.spacing(1),borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"75%",minHeight:"60px"}}})),aa=function(e){var t,a=e.action,n=e.typeAction,r=e.register,o=e.watch,i=e.errors,c=e.control,s=e.setValue,d=e.clearErrors,u=Object(p.useMemo)((function(){return["responsible","accountable","consulted","informed"]}),[]),m=Object(p.useState)(!1),b=Object(M.a)(m,2),g=b[0],h=b[1],v=Object(p.useState)(null),x=Object(M.a)(v,2),y=x[0],k=x[1],C=Object(p.useState)({}),j=Object(M.a)(C,2),w=j[0],S=j[1],A=ue().task,N=Object(O.c)().t,D=ea(),T=ta();Object(p.useEffect)((function(){S({}),r({name:"responsible"},{required:!0}),r({name:"endDate"}),r({name:"accountable"}),r({name:"consulted"}),r({name:"informed"}),r({name:"automaticComplete"})}),[r]);var I=function(e){h(!g),k(e)};return f.a.createElement(Ce.a,{container:!0},f.a.createElement(Rt,{open:g,handleClose:I,handleUserSelected:function(e){S((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},y,e))})),s(y,e.fiscalCode.toUpperCase()),d(y)},usersSelected:w,role:y}),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:N("action"===n?"entities.creation.actions.action":"entities.creation.actions.subAction")},f.a.createElement(Qt,{name:"title",placeholder:N("action"===n?"entities.creation.actions.actionPlaceholder":"entities.creation.actions.subActionPlaceholder"),register:r({required:{value:!0,message:N("validation.required")},maxLength:{value:125,message:N("validation.maxLenght",{maxLength:125})}}),watch:o,setValue:s,errors:i,showCountCaracthers:!0,countCaracthers:125}))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:N("entities.creation.actions.description")},f.a.createElement(Qt,{name:"description",placeholder:N("entities.creation.actions.descriptionPlaceholder"),register:r({required:{value:!0,message:N("validation.required")},maxLength:{value:500,message:N("validation.maxLenght",{maxLength:500})}}),watch:o,setValue:s,errors:i,multiline:!0,rows:5,rowsMax:20,showCountCaracthers:!0,countCaracthers:500}))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(F.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignContent:"flex-start",height:"120px"},f.a.createElement(F.a,{paddingRight:1,height:1,width:.5},f.a.createElement(zt,{title:N("entities.creation.actions.end")},f.a.createElement(F.a,{border:0},f.a.createElement(Ut,{control:c,name:"endDate",setValue:s,initialValue:null!==(t=A.startDate)&&void 0!==t?t:new Date,format:"dd MMMM yyyy",rules:{required:{value:!0,message:N("validation.required")}},errors:i,minDate:Object(Be.a)(A.startDate,{days:1}),maxDate:"action"===n?A.endDate:a.endDate,invalidDateMessage:N("error.invalidDateMessage")})))),"action"===n?f.a.createElement(F.a,{border:0,height:1,width:.5},f.a.createElement(qt,{title:N("entities.creation.actions.completion"),contentPopper:{title:N("entities.creation.actions.popper.title"),description:N("entities.creation.actions.popper.description")}},f.a.createElement(F.a,{border:0},f.a.createElement(Jt,{label:N("entities.creation.actions.automatic"),on:N("entities.creation.actions.yes"),off:N("entities.creation.actions.no"),onChange:function(e){s("automaticComplete",e)}})))):null)),f.a.createElement(Ce.a,{item:!0,xs:12},u.map((function(e){var t,a;return f.a.createElement(Ce.a,{key:e,item:!0,xs:12,classes:D},f.a.createElement(zt,{title:N("entities.creation.actions.".concat(e))},f.a.createElement(F.a,{className:T.boxContainer},f.a.createElement(F.a,{className:"".concat(T.borderBox," ").concat(i[e]?"error":""),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"flex-start",alignItems:"center"},f.a.createElement(F.a,{marginRight:2},o(e)?f.a.createElement(Je.a,{className:T.avatar,alt:null===(t=w[e])||void 0===t?void 0:t.firstname,src:(null===(a=w[e])||void 0===a?void 0:a.image)||"",onClick:function(){return I(e)}}):f.a.createElement(me.a,{fontSize:"large",className:T.boxAdd,onClick:function(){return I(e)},disableRipple:!0},f.a.createElement(Ae.a,{className:T.iconAdd}))),f.a.createElement(F.a,{flexGrow:1},o(e)?f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},"".concat(w[e].firstname," ").concat(w[e].lastname)):null,f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},o(e)?w[e].role:N("entities.creation.actions.assignRole"))),o(e)?f.a.createElement(F.a,null,f.a.createElement(me.a,{fontSize:"large",onClick:function(){return I(e)},disableRipple:!0},f.a.createElement(Xe.a,{className:T.iconAdd})),"responsible"!==e?f.a.createElement(me.a,{fontSize:"large",onClick:function(){return function(e){s(e,void 0),k(e);var t=Object(l.a)({},w);delete t[e],S(t)}(e)},disableRipple:!0},f.a.createElement(Qe.a,{className:T.iconAdd})):null):null)),i[e]?f.a.createElement(F.a,{marginTop:"3px",marginLeft:"14px"},f.a.createElement(we.a,{variant:"caption",color:"error",align:"left"},N("validation.required"))):null))}))))},na={title:"Azione",description:"",startDate:null,automaticComplete:!0,responsible:null,accountable:null,consulted:null,informed:null,subActions:[]},ra=["title","description","endDate","responsible","accountable","consulted","informed"],oa=function(e){var t=e.onSubmit,a=e.changeTab,n=Object(p.useState)(!1),r=Object(M.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)(!1),s=Object(M.a)(c,2),d=s[0],u=s[1],m=Object(p.useState)([]),b=Object(M.a)(m,2),g=b[0],h=b[1],v=Object(p.useState)(null),E=Object(M.a)(v,2),x=E[0],y=E[1],k=Object(p.useState)(0),C=Object(M.a)(k,2),j=C[0],w=C[1],S=ue(),A=S.task,N=S.contextActions,D=Object(Le.b)({mode:"onChange",reValidateMode:"onBlur",defaultValues:{initAction:na}}),T=D.register,P=D.handleSubmit,B=D.errors,z=D.watch,L=D.control,V=D.setValue,W=D.trigger,q=D.clearErrors,G=D.reset,_=_e(),K=Object(O.c)().t,Y=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current},J=Y(z(ra)),Z=Y(x),X=function(){var e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length>N.length||"subAction"===x)){e.next=3;break}return e.next=3,W(ra);case 3:Object(H.isEmpty)(B)&&(t=Object(H.cloneDeep)(g),y("action"),t.push(Object(l.a)({},na)),h(t),g.length&&G(ra),V("endDate",Object(Be.a)(A.startDate,{days:1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(ra);case 2:Object(H.isEmpty)(B)&&(n=Object(H.cloneDeep)(g),w(a),G(ra),y(t),(r=Object(l.a)({},Object(H.omit)(Object(l.a)({},na),"subActions","automaticComplete"))).title="Sottoazione",n[a].subActions.push(Object(l.a)(Object(l.a)({},r),{},{endDate:g[a].endDate})),h(n),u(!0),V("endDate",g[a].endDate));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){N.length&&h(N)}),[N]),Object(p.useEffect)((function(){if(J&&Z===x){var e=z(ra),t=Object.keys(e).filter((function(t){return e[t]!==J[t]}));if(t.length){var a=Object(H.cloneDeep)(g),n=a.length-1,r=t.reduce((function(t,a){return t[a]=e[a],t}),{});if(!Object(H.isEmpty)(r)){if("action"===x)a[n]=Object(l.a)(Object(l.a)({},a[n]),r);else if("subAction"===x){var o=a[n].subActions.length-1;a[n].subActions[o]=Object(l.a)(Object(l.a)({},a[n].subActions[o]),r)}h(a),i(!1),u(!1)}}}}),[z,J,Z,x]);return Object(H.isEmpty)(B)||console.table(B),f.a.createElement(Pe.a,{utils:ke.a,locale:ze.a},f.a.createElement("form",{onSubmit:P((function(e,n){if(Object(H.isEmpty)(B)){var r=Object(l.a)(Object(l.a)({},Object(H.pick)(e,"step","target","action")),{},{actions:g});t(r,n)}else a(null,3)}))},f.a.createElement("input",{type:"hidden",name:"step",defaultValue:3,ref:T}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"task",ref:T}),f.a.createElement("input",{type:"hidden",name:"action",defaultValue:"submit",ref:T}),f.a.createElement(F.a,{className:_.boxGrid},f.a.createElement(Ce.a,{container:!0,className:_.gridContainer,spacing:1},f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:_.item}},f.a.createElement(F.a,{className:_.borderBox},f.a.createElement(je.a,{variant:"contained",type:"button",className:_.buttonAddAction,startIcon:f.a.createElement(Ae.a,null),onClick:function(){return X("new")},disabled:o,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},K("entities.creation.actions.add")))),g.length>0?f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:_.containerInfo},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:_.containerInfoScroll},f.a.createElement(F.a,{className:"".concat(_.borderBox," ").concat(_.borderBoxInfo)},f.a.createElement(F.a,{className:_.boxActions},f.a.createElement(Ye,{actions:g,handleClickAction:$,disabledButton:d}))))):null),f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:_.item}},g.length<=0?f.a.createElement(F.a,{className:_.boxEmptyActionContainer},f.a.createElement(F.a,{className:"boxIcon"},f.a.createElement(Me.a,null)),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},K("entities.creation.actions.addTaskAction"))),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textSecondary"},f.a.createElement(O.a,{t:K,i18nKey:"entities.creation.actions.addTaskActionDescription"},[f.a.createElement("span",{key:0,className:_.highlight})])))):f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:_.containerInfo},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:_.containerInfoScroll},f.a.createElement(F.a,{p:1,className:_.border},f.a.createElement(aa,{action:g[j],typeAction:null!==x&&void 0!==x?x:"action",register:T,control:L,watch:z,errors:B,setValue:V,clearErrors:q})))))),f.a.createElement(F.a,{p:2,border:0,textAlign:"center",className:_.boxButtons},f.a.createElement(je.a,{size:"large",type:"button",onClick:function(e){return a(e,1)},startIcon:f.a.createElement(De.a,null),variant:"outlined",className:_.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},K("entities.creation.buttons.previous"))),f.a.createElement(je.a,{size:"large",type:"submit",endIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:_.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},K("entities.creation.buttons.next")))))))},ia=a(98),ca=a.n(ia),la=function(){var e=Object(p.useContext)(_),t=Object(M.a)(e,2),a=t[0],n=t[1],r=vt(),o=r.logged,i=r.vertexId,c=r.vertexShortName,s=re().setLoading,d=Object(O.c)().t,u=a.serviceUrlAttachments,m=ue().task,b=G(),f=b.setError,g=b.setMessage,h=function(){var e=Object(R.a)(I.a.mark((function e(t,r,o){var i,c,b,p,h;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(u,"/").concat(t),c={data:r,referenceId:m.id,referenceType:o},e.prev=2,s(!0),e.next=6,Z(i,c);case 6:if(!e.sent.payload.id){e.next=15;break}return e.next=10,$(u,m.id,o);case 10:b=e.sent,p=b.payload.attachments,h=d("message.attachmentAdded")+(a.allReferenceType.TASK===o?" al task":""),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:p,message:h})})),g(h);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.dataLoading"),message:null})),f(d("error.dataLoading"));case 21:return e.prev=21,s(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(t,a,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(R.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("nextcloud",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(R.a)(I.a.mark((function e(t,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("adhoc",{items:t},a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(R.a)(I.a.mark((function e(t,r){var o,i,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,X(u,t);case 4:if(!e.sent.payload.id){e.next=13;break}return e.next=8,$(u,m.id,r);case 8:o=e.sent,i=o.payload.attachments,c=d("message.attachmentDeleted")+(a.allReferenceType.TASK===r?" dal task":""),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:i,message:c})})),g(c);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.dataLoading"),message:null})),f(d("error.dataLoading"));case 19:return e.prev=19,s(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(e,t){var r="dataLoading";-1!==e.toString().toLowerCase().indexOf("time-out")?r="adhocTimeout":-1!==e.toString().toLowerCase().indexOf("bad request")?r="adhocLogin":-1!==e.toString().toLowerCase().indexOf("precondition failed")?r="adhocConnectionNotFound":-1!==e.toString().toLowerCase().indexOf("not found")&&(r="adhoc".concat(t));var o=d("error.".concat(r)).replace("{vertexId}",i).replace("{vertexShortName}",c);n(Object(l.a)(Object(l.a)({},a),{},{error:o,message:null})),f(o)},k=function(){var e=Object(R.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),a=Object(l.a)(Object(l.a)({},t),{},{cf:o,vertexId:i}),e.next=5,Q(u,a);case 5:return n=e.sent,e.abrupt("return",n.payload.items);case 9:return e.prev=9,e.t0=e.catch(0),y(e.t0,"Search"),e.abrupt("return",[]);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(R.a)(I.a.mark((function e(t,a,n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),r={id:t,name:a,cf:o,vertexId:i},e.next=5,ee(u,r,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y(e.t0,"Download");case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{attachments:a.attachments,postNextcloudAttachment:v,postAdhocAttachment:E,searchAdhocAttachment:k,deleteAttachment:x,downloadAdhocAttachment:C,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},allClouds:a.allClouds,allReferenceType:a.allReferenceType}},sa=a(774),da=Object(Vt.a)({highlight:{color:"#efb868",fontWeight:600}}),ua=function(e){var t=e.onClose,a=e.open,n=function(e){t(e)},r=Object(O.c)().t,o=da();return f.a.createElement(et.a,{onClose:t,"aria-labelledby":"dialog-choose-attachment",open:a},f.a.createElement(Et.a,null,f.a.createElement(Ot.a,{button:!0,onClick:function(){return n("dhoc")},key:"dhoc"},f.a.createElement(kt.a,null,f.a.createElement(O.a,{t:r,i18nKey:"entities.creation.attachment.dhoc"},[f.a.createElement("span",{key:0,className:o.highlight})]))),f.a.createElement(sa.a,null),f.a.createElement(Ot.a,{button:!0,onClick:function(){return n("elcloud")},key:"elcloud"},f.a.createElement(kt.a,null,f.a.createElement(O.a,{t:r,i18nKey:"entities.creation.attachment.elcloud"},[f.a.createElement("span",{key:0,className:o.highlight})])))))},ma=a(784),ba=a(111),pa=a.n(ba),fa=a(782),ga=Object(he.a)((function(e){return{formControl:{backgroundColor:"#ffffff","& div":{height:"56px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.primary},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}}}})),ha=function(e){var t,a=e.register,n=e.name,r=e.options,o=e.emptyOption,i=e.errors,c=e.initialValue,l=Object(p.useState)(""),s=Object(M.a)(l,2),d=s[0],u=s[1],m=ga(),b=function(e){u(e.target.value)};return Object(p.useEffect)((function(){c&&b({target:{value:c}})}),[c]),f.a.createElement(Gt.a,{variant:"outlined",className:m.formControl,fullWidth:!0,error:!Object(H.isEmpty)(i[n])},f.a.createElement(fa.a,{native:!0,value:d,onChange:b,inputRef:a,name:n},f.a.createElement("option",{value:"",disabled:!0},o),r.map((function(e){return f.a.createElement("option",{key:e.id,value:e.id},e.value)}))),f.a.createElement(Xt.a,{id:"component-task-name-error-text"},null===(t=i[n])||void 0===t?void 0:t.message))};ha.defaultProps={initialValue:""};var va=ha,Ea=a(75),xa=a.n(Ea),Oa=Object(he.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:450,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:xa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:xa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},adhocItemsFound:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:".5rem",paddingLeft:"1rem",margin:".3rem",color:"#5a6470"},boxAdhocItemsFound:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between","& .Mui-checked":{color:"#b68902"}},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},uppercase:{"& input":{textTransform:"uppercase"}}}})),ya={ADHOC_MIN_YEAR:2012,ADHOC_DEFAULT_REGISTRY:"REG"},ka=function(e){return f.a.createElement(mt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(B.a,e))},Ca=function(e){var t=e.onClose,a=e.open,n=e.referenceType,r=(new Date).getFullYear(),o=Oa(),i=Object(O.c)().t,c=Object(p.useState)(!0),s=Object(M.a)(c,2),d=s[0],u=s[1],m=la(),b=m.searchAdhocAttachment,g=m.postAdhocAttachment,h=m.downloadAdhocAttachment,v=Object(p.useState)(null),E=Object(M.a)(v,2),x=E[0],y=E[1],k=Object(p.useState)(new Set),C=Object(M.a)(k,2),j=C[0],w=C[1],S=Object(p.useState)(!0),A=Object(M.a)(S,2),N=A[0],D=A[1],T=Object(Le.b)({mode:"all"}),P=T.register,B=T.handleSubmit,U=T.errors,z=T.setValue,L=T.watch,V=T.formState,W=function(){y(null),w(new Set),D(!0),t()},q=function(){var e=Object(R.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Array.from(j).forEach((function(e){return t.push(x[e])})),e.next=4,g(t,n);case 4:W();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),!V.isSubmitting){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,b(Object(l.a)(Object(l.a)({},t),{},{registry:null===(n=String(t.registry))||void 0===n?void 0:n.toUpperCase()}));case 6:r=e.sent,y(r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){if(!Object(H.isEmpty)(L())){var e=Object.keys(L()).filter((function(e){return""===L(e)}));u(0!==e.length)}}),[L]);var _=Object(p.useCallback)((function(){return Array(r-ya.ADHOC_MIN_YEAR+1).fill().map((function(e,t){return ya.ADHOC_MIN_YEAR+t})).map((function(e){return{id:e,value:e}}))}),[]),K=function(e,t){return f.a.createElement(F.a,{className:o.adhocItemsFound,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start",key:t+e.name},f.a.createElement(we.a,{title:"Scarica ".concat(e.name),component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return h(e.id,e.name,!0)}},e.signature),f.a.createElement(we.a,{variant:"body1",color:"textSecondary",title:"Scarica ".concat(e.name),style:{cursor:"pointer"},noWrap:!0,onClick:function(){return h(e.id,e.name,!0)}},e.name),f.a.createElement(F.a,{className:o.boxAdhocItemsFound},f.a.createElement(pa.a,{style:{marginRight:"1rem",cursor:"pointer"},onClick:function(){return h(e.id,e.name,!0)}}),f.a.createElement(ma.a,{onChange:function(e){return function(e,t){var a=j;t?a.add(e):a.delete(e),w(a),D(0===a.size)}(t,e.target.checked)}})))};return f.a.createElement(et.a,{fullWidth:!0,maxWidth:"sm",onClose:W,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:ka},f.a.createElement(tt.a,{className:o.dialogTitle,id:"form-dialog-title",onClose:W},f.a.createElement("div",null,f.a.createElement(O.a,{t:i,i18nKey:"entities.creation.dialog.attachment.titleDhoc"},[f.a.createElement("span",{key:0,className:o.highlight})])),f.a.createElement(me.a,{"aria-label":"close",className:o.closeButton,onClick:W},f.a.createElement(pe.a,null))),f.a.createElement(at.a,null,f.a.createElement("form",{onSubmit:B(G)},f.a.createElement(F.a,{className:o.boxEditor},f.a.createElement(Ce.a,{container:!0},f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:i("entities.creation.dialog.attachment.protocolDhOc")},f.a.createElement(Qt,{type:"number",name:"protocol",placeholder:i("entities.creation.dialog.attachment.protocolDhOcPlaceholder"),register:P({required:{value:!0,message:i("validation.required")}}),watch:L,setValue:z,errors:U}))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:i("entities.creation.dialog.attachment.yearDhOc")},f.a.createElement(va,{register:P({required:{value:!0,message:i("validation.required")}}),name:"year",emptyOption:void 0,initialValue:r,options:_(),errors:U}))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:i("entities.creation.dialog.attachment.registryDhOc"),className:o.uppercase},f.a.createElement(Qt,{name:"registry",placeholder:i("entities.creation.dialog.attachment.registryDhOcPlaceholder"),register:P({required:{value:!0,message:i("validation.required")}}),initialValue:ya.ADHOC_DEFAULT_REGISTRY,watch:L,setValue:z,errors:U}))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(F.a,{textAlign:"center"},f.a.createElement(je.a,{type:"submit",variant:"outlined",className:o.buttonSearch,disabled:d},i("entities.creation.dialog.attachment.searchDhOC"))))),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(F.a,{textAlign:"center"},null===x||void 0===x?f.a.createElement(f.a.Fragment,null):0===x.length?f.a.createElement(F.a,{className:o.boxAttachment},f.a.createElement(we.a,{variant:"h6",component:"div",color:"textSecondary"},i("entities.creation.dialog.attachment.notFound"))):x.map((function(e,t){return K(e,t)}))))))),f.a.createElement(it.a,{className:o.dialogActions},f.a.createElement(je.a,{disabled:N,onClick:q,className:o.button},i("entities.creation.dialog.attachment.add"))))};Ca.defaultProps={referenceType:null};var ja=Ca,wa=a(233),Sa=Object(he.a)((function(e){return{dropZone:{"& .MuiDropzoneArea-root":{minHeight:160,position:"relative"},"& .MuiDropzoneArea-icon":{color:xa.a[300]}},dropZoneArea:{"&.MuiDropzoneArea-root":{minHeight:160,position:"relative",background:"lightgrey",color:xa.a[300],cursor:"default"},"& .MuiDropzoneArea-icon":{color:xa.a[300]}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:xa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:xa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},previewChip:{minWidth:160,maxWidth:210}}})),Aa=function(e){return f.a.createElement(mt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(B.a,e))},Na=function(e){var t=e.onClose,a=e.open,n=e.referenceType,r=Sa(),o=Object(O.c)().t,i=la(),c=i.attachments,l=i.postNextcloudAttachment,s=Object(p.useState)(!0),d=Object(M.a)(s,2),u=d[0],m=d[1],b=Object(Le.b)({mode:"all"}),g=b.register,h=b.errors,v=b.setValue,E=b.watch;Object(p.useEffect)((function(){Object(H.isEmpty)(E())||(0===Object.keys(E()).filter((function(e){return""===E(e)})).length?m(!1):m(!0))}),[E]);var x=function(){var e=Object(R.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(Object.values(E())[0],n);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(et.a,{fullWidth:!0,maxWidth:"sm",onClose:t,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:Aa},f.a.createElement(tt.a,{className:r.dialogTitle,id:"form-dialog-title",onClose:t},f.a.createElement("div",null,f.a.createElement(O.a,{t:o,i18nKey:"entities.creation.dialog.attachment.titleElCloud"},[f.a.createElement("span",{key:0,className:r.highlight})])),f.a.createElement(me.a,{"aria-label":"close",className:r.closeButton,onClick:t},f.a.createElement(pe.a,null))),f.a.createElement(at.a,null,f.a.createElement(wa.a,{dropzoneClass:r.dropZoneArea,dialogProps:{"aria-labelledby":"dialog-elcloud",disableEnforceFocus:!0,PaperComponent:Aa,className:r.dropZoneArea},dropzoneProps:{disabled:!0},maxWidth:"sm",fileObjects:c,cancelButtonText:"",submitButtonText:"",dropzoneText:o("entities.creation.dialog.attachment.dragAndDrop"),maxFileSize:5e6,filesLimit:1,open:a,onAdd:function(e){l(e),t(e)},onClose:t,showPreviews:!1,showFileNamesInPreview:!1,showAlerts:!1,showFileNames:!1,showPreviewsInDropzone:!1}),f.a.createElement(Ce.a,{item:!0,xs:12},f.a.createElement(zt,{title:o("entities.creation.dialog.attachment.linkNextcloud")},f.a.createElement(Qt,{name:"nextcloudLink",placeholder:o("entities.creation.dialog.attachment.linkNextcloudPlaceholder"),register:g({required:{value:!0,message:o("validation.required")}}),watch:E,setValue:v,errors:h})))),f.a.createElement(it.a,{className:r.dialogActions},f.a.createElement(je.a,{className:r.button,disabled:u,onClick:x},o("entities.creation.dialog.attachment.add"))))};Na.defaultProps={referenceType:null};var Da=Na,Ta=Object(he.a)((function(e){return{boxAttachmentInfoContainer:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,display:"flex",flexWrap:"nowrap",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1),marginBottom:e.spacing(1),borderRadius:4},boxAttachmentInfoAction:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between",color:e.palette.action.disabled},borderBox:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4},icon:{color:"#5a6470"},attachment:{width:"100%"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},marginBox:{marginBottom:"8px"}}})),Ia=function(e){var t=e.attachment,a=e.handleDelete,n=e.allClouds,r=Ta(),o=t.id,i=t.file,c=i.name,l=i.cloudType,s=i.signature,d=c,u=c;u.length>60&&(u="".concat(c.substring(0,17),"...").concat(c.substring(c.length-40)));var m=la().downloadAdhocAttachment;return f.a.createElement(F.a,{className:"".concat(r.borderBox," ").concat(r.marginBox),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},f.a.createElement(F.a,{p:1,className:r.icon},f.a.createElement(ca.a,null)),f.a.createElement(F.a,{className:r.attachment},l===n.NEXTCLOUD?f.a.createElement(we.a,{variant:"body1",color:"textSecondary",title:d},f.a.createElement("a",{target:"_blank",rel:"noreferrer",href:d,className:r.link},u)):f.a.createElement(f.a.Fragment,null,s?f.a.createElement(we.a,{component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return m(o,null,!0)}},s):null,f.a.createElement(we.a,{variant:"body1",color:"textSecondary",title:u,component:"div",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return m(o,null,!0)}},u))),f.a.createElement(F.a,{p:1,className:r.icon},l===n.NEXTCLOUD?f.a.createElement("a",{target:"_blank",rel:"noreferrer",href:d,className:r.link},f.a.createElement(pa.a,null)):f.a.createElement(pa.a,{style:{cursor:"pointer"},onClick:function(){return m(o,null,!0)}})),f.a.createElement(F.a,{className:r.boxAttachmentInfoAction},f.a.createElement(me.a,{"aria-label":"delete",onClick:function(){return a(o)},disableRipple:!0},f.a.createElement(Qe.a,null))))},Ra=Object(he.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{border:"0 solid black",height:"726px"},border:{border:1,borderTop:0,borderRight:0,borderStyle:"solid",borderColor:e.palette.action.disabled},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},gridContainer:{border:"0 solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxAttachment:{padding:e.spacing(1)},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},boxButtonAttachment:{},buttonAttachment:{width:"100%",marginTop:e.spacing(2),height:"50px",textTransform:"none"},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},highlight:{color:"#efb868",fontWeight:600}}})),Ma=function(e){var t=e.changeTab,a=Object(O.c)().t,n=Object(p.useState)(!1),r=Object(M.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)(!1),l=Object(M.a)(c,2),s=l[0],d=l[1],u=Object(p.useState)(!1),m=Object(M.a)(u,2),b=m[0],g=m[1],h=la(),v=h.attachments,E=h.deleteAttachment,x=h.allClouds,y=h.allReferenceType,k=v.filter((function(e){return e.file.cloudType===x.NEXTCLOUD})),C=v.filter((function(e){return e.file.cloudType===x.ADHOC})),j=Ra(),w=y.TASK,S=function(e){E(e,w)};return f.a.createElement(f.a.Fragment,null,f.a.createElement(V.a,{maxSnack:10,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:P.a}),f.a.createElement(Pe.a,{utils:ke.a},f.a.createElement(ja,{onClose:function(){return d(!1)},open:s,referenceType:w}),f.a.createElement(Da,{onClose:function(){return g(!1)},open:b,referenceType:w}),f.a.createElement(F.a,{className:j.boxGrid},f.a.createElement(Ce.a,{container:!0,className:j.gridContainer,spacing:1},f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:j.item}},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:j.containerInfo},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:j.containerInfoScroll},f.a.createElement(F.a,{p:1},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.einetAttachments",{count:k.length}))),f.a.createElement(F.a,{className:j.boxAttachment},null===k||void 0===k?void 0:k.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(Ia,{key:e.id,attachment:e,index:t+1,size:v.length,handleDelete:S,allClouds:x})}))),f.a.createElement(F.a,{p:1},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.adhocAttachments",{count:C.length}))),f.a.createElement(F.a,{className:j.boxAttachment},null===C||void 0===C?void 0:C.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(Ia,{key:e.id,attachment:e,index:t+1,size:C.length,handleDelete:S,allClouds:x})})))))),f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:j.item}},f.a.createElement(ua,{onClose:function(e){i(!o),"dhoc"===e?d(!0):"elcloud"===e&&g(!0)},open:o}),f.a.createElement(F.a,{className:j.boxEmptyActionContainer},f.a.createElement(F.a,{className:"boxIcon"},f.a.createElement(ca.a,null)),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},a("entities.creation.attachment.addAttachment"))),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textSecondary"},f.a.createElement(O.a,{t:a,i18nKey:"entities.creation.attachment.addAttachmentDescription"},[f.a.createElement("span",{key:0,className:j.highlight})]))),f.a.createElement(F.a,{className:j.boxButtonAttachment},f.a.createElement(je.a,{size:"large",startIcon:f.a.createElement(Ae.a,null),variant:"contained",className:j.buttonAttachment,onClick:function(){return i(!0)},disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.addButton"))))))),f.a.createElement(F.a,{p:2,border:0,textAlign:"center",className:j.boxButtons},f.a.createElement(je.a,{size:"large",type:"button",onClick:function(e){return t(e,0)},startIcon:f.a.createElement(De.a,null),variant:"outlined",disabled:!0,disableRipple:!0,className:j.button},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},a("entities.creation.buttons.previous"))),f.a.createElement(je.a,{size:"large",onClick:function(e){return t(e,4)},endIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:j.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},a("entities.creation.buttons.next")))))))},Pa=a(230),Ba=a.n(Pa),Ua=a(39),za=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},K()),{},{method:"GET"}),e.abrupt("return",Y(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),La=function(){var e=Object(R.a)(I.a.mark((function e(t,a,n){var r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},K()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",Y(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Fa=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/notes/").concat(a),r=Object(l.a)(Object(l.a)({},K()),{},{method:"DELETE"}),e.abrupt("return",Y(n,r,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(p.useContext)(oe),t=Object(M.a)(e,2),a=t[0],n=t[1],r=re().setLoading,o=Object(O.c)().t,i=a.serviceUrl,c=a.useMock,s=ue().task,d=G(),u=d.setError,m=d.setMessage,b=function(){var e=Object(R.a)(I.a.mark((function e(t){var d,b,p,f;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=8;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(t)}))}),1500);case 5:return d=e.sent,n((function(e){return{notes:[].concat(Object(Ua.a)(e.notes),[d]),message:o("message.noteCreated",{id:99})}})),e.abrupt("return",99);case 8:return e.next=10,La(i,s.id,t.description);case 10:if(!(b=e.sent).payload.id){e.next=18;break}return e.next=14,za(i,s.id);case 14:p=e.sent,(f=p.payload).forEach((function(e){return console.table(e)})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:f,message:o("message.noteCreated",{id:b.payload.id})})}));case 18:return m(o("message.noteCreated",{id:b.payload.id})),e.abrupt("return",b.payload.id);case 22:e.prev=22,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),u(o("error.dataLoading"));case 26:return e.prev=26,r(!1),e.finish(26);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[0,22,26,29]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(R.a)(I.a.mark((function e(t){var d,b,p;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=9;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(a.notes.filter((function(e){return e.id!==t})))}))}),1500);case 5:return d=e.sent,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:d,message:o("message.noteDeleted",{id:t})})})),m(o("message.noteDeleted",{id:t})),e.abrupt("return",99);case 9:return e.next=11,Fa(i,t);case 11:return e.next=13,za(i,s.id);case 13:return b=e.sent,p=b.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:p,message:o("message.noteDeleted",{id:t})})})),m(o("message.noteDeleted",{id:t})),e.abrupt("return",null);case 20:e.prev=20,e.t0=e.catch(0),console.log("error",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),u(o("error.dataLoading"));case 25:return e.prev=25,r(!1),e.finish(25);case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[0,20,25,28]])})));return function(t){return e.apply(this,arguments)}}();return{notes:a.notes,postNote:b,deleteNote:f,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},Va=a(226),Wa=a.n(Va),qa=Object(he.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:500,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"left",textTransform:"capitalize"},dialogContent:{overflow:"hidden","& .MuiDialogContent-root":{overflow:"hidden"}},boxEditor:{position:"relative",minHeight:400,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{border:"0 solid red",padding:0,position:"relative",top:-90,paddingRight:10},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Ga=function(e){return f.a.createElement(mt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(B.a,e))},_a={mode:"classic",defaultTag:"div",height:"auto",minHeight:"100px",maxHeight:"250px",showPathLabel:!1,toolbarContainer:"#custom_toolbar",rtl:!1,charCounter:!0,charCounterType:"char",maxCharCount:"500",imageResizing:!1,imageHeightShow:!1,imageFileInput:!1,imageUrlInput:!1,videoResizing:!1,videoHeightShow:!1,videoFileInput:!1,videoUrlInput:!1,videoRatioShow:!1,audioUrlInput:!1,tabDisable:!1,shortcutsHint:!1,buttonList:[["bold","underline","italic","align","link"]]},Ka=function(e){var t=e.open,a=e.handleClose,n=e.handleAddNote,r=Object(O.c)().t,o=Object(ct.a)(),i=(Object(lt.a)(o.breakpoints.down("sm")),qa()),c=Object(p.useRef)(null),l=Object(p.useState)(""),s=Object(M.a)(l,2),d=s[0],u=s[1];return f.a.createElement(et.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:function(){return a()},PaperComponent:Ga,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:i.dialog},f.a.createElement(tt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:function(){return a()}},f.a.createElement("div",null,r("entities.creation.dialog.note.title")),f.a.createElement(me.a,{"aria-label":"close",className:i.closeButton,onClick:function(){return a()}},f.a.createElement(pe.a,null))),f.a.createElement(at.a,{className:i.dialogContent},f.a.createElement(F.a,{className:i.boxEditor},f.a.createElement(Wa.a,{height:400,name:"nota",ref:c,placeholder:r("entities.creation.dialog.note.placeholder"),lang:"it",autoFocus:!0,setOptions:_a,onChange:function(e){u(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}}))),f.a.createElement(it.a,{className:i.dialogActions},f.a.createElement(je.a,{onClick:function(){if(n){var e=d.replaceAll("<p>","<div>").replaceAll("</p>","</div>");n(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}a()},className:i.button},r("entities.creation.dialog.note.buttonPublish"))))},Ya=a(791),Ja=a(777),Za=a(229),Xa=a(227),$a=Object(he.a)((function(e){return{boxNoteInfoContainer:{border:"0 solid red"},boxNoteInfoAction:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between",color:e.palette.action.disabled},boxNoteInfoText:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:e.spacing(1)},boxNoteInfoUser:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start",alignContent:"flex-start"}}})),Qa=function(e){var t=e.note,a=e.index,n=e.size,r=e.handleDelete,o=Object(O.c)().t,i=$a(),c=t.id,l=t.createdDate,s=t.createdBy;return f.a.createElement(F.a,{className:i.boxNoteInfoContainer},f.a.createElement(F.a,{className:i.boxNoteInfoAction},f.a.createElement(we.a,{variant:"body1"},o("entities.creation.note.info",{index:a,size:n})),f.a.createElement(me.a,{"aria-label":"delete",onClick:function(){return r(c)},disableRipple:!0},f.a.createElement(Qe.a,null))),f.a.createElement(F.a,{className:i.boxNoteInfoText},f.a.createElement(we.a,{variant:"body2",component:"div"},f.a.createElement(Xa.a,{content:t.description}))),f.a.createElement(F.a,{className:i.boxNoteInfoUser},f.a.createElement(F.a,{p:1,marginRight:2},f.a.createElement(Je.a,{alt:s})),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"caption",color:"textSecondary"},Object(Ya.a)(new Date,new Date(l))<60?o("entities.creation.note.now"):Object(Ja.a)(new Date(l),"dd MMMM yyyy: kk:mm:ss",{locale:Za.it})),f.a.createElement(we.a,{variant:"body2",color:"textPrimary"},s))))},en=Object(he.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{border:"0 solid black",height:"726px"},boxNote:{border:"0 solid black",padding:e.spacing(1)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},gridContainer:{border:"0 solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},boxButtonNote:{cursor:"not-allowed"},buttonNote:{width:"100%",marginTop:e.spacing(2),height:"50px",textTransform:"none"},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},buttonPublish:{color:"#fff",backgroundColor:"#b68902",borderColor:"#b68902","&:hover":{backgroundColor:"#b68902"}},highlight:{color:"#efb868",fontWeight:600}}})),tn=function(e){var t=e.changeTab,a=e.callback,n=Object(O.c)().t,r=Object(p.useState)(!1),o=Object(M.a)(r,2),i=o[0],c=o[1],l=en(),s=vt(),d=s.logged,u=s.users,m=ue().task,b=Ha(),g=b.postNote,h=b.deleteNote,v=b.notes,E=function(){c((function(e){return!e}))},x=function(e){h(e)};return f.a.createElement(Pe.a,{utils:ke.a},f.a.createElement(Ka,{open:i,handleClose:E,handleAddNote:function(e){return function(e){var t,a,n={id:v.length+1,createdDate:"2020-12-16T09:49:05.331Z",createdBy:"".concat(null===(t=u[d])||void 0===t?void 0:t.firstname," ").concat(null===(a=u[d])||void 0===a?void 0:a.lastname),description:e};g(n)}(e)}}),f.a.createElement(F.a,{className:l.boxGrid},f.a.createElement(Ce.a,{container:!0,className:l.gridContainer,spacing:1},f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:l.item}},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:l.containerInfo},f.a.createElement(U.a,{fixed:!0,disableGutters:!0,className:l.containerInfoScroll},f.a.createElement(F.a,{className:l.boxNote},v.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(Qa,{key:e.id,note:e,index:t+1,size:v.length,handleDelete:x})})))))),f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:l.item}},f.a.createElement(F.a,{className:l.boxEmptyActionContainer},f.a.createElement(F.a,{className:"boxIcon"},f.a.createElement(Ba.a,null)),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},n("entities.creation.note.addNote"))),f.a.createElement(F.a,null,f.a.createElement(we.a,{variant:"body1",color:"textSecondary"},f.a.createElement(O.a,{t:n,i18nKey:"entities.creation.note.addNoteDescription"},[f.a.createElement("span",{key:0,className:l.highlight})]))),f.a.createElement(F.a,{className:l.boxButtonNote},f.a.createElement(je.a,{size:"large",startIcon:f.a.createElement(Ae.a,null),variant:"contained",className:l.buttonNote,onClick:E,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},n("entities.creation.note.addButton"))))))),f.a.createElement(F.a,{p:2,border:0,textAlign:"center",className:l.boxButtons},f.a.createElement(je.a,{size:"large",type:"button",onClick:function(e){return t(e,3)},startIcon:f.a.createElement(De.a,null),variant:"outlined",disabled:!0,className:l.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},n("entities.creation.buttons.previous"))),f.a.createElement(je.a,{size:"large",onClick:function(){a&&a(m.id)},variant:"outlined",className:"".concat(l.button," ").concat(l.buttonPublish),disableRipple:!0},f.a.createElement(we.a,{variant:"body2"},n("entities.creation.buttons.publish"))))))};tn.defaultProps={callback:function(){}};var an=tn,nn=Object(he.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.disabled},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},button:{textTransform:"none",color:e.palette.text.secondary,height:"45px"}}})),rn=function(e){var t=e.store,a=e.onSubmit,n=e.useMock,r=Object(p.useState)([]),o=Object(M.a)(r,2),i=o[0],c=o[1],l=Object(O.c)().t,s=Object(Le.b)({mode:"all"}),d=s.register,u=s.handleSubmit,m=s.errors,b=s.setValue,g=s.formState,h=nn(),v=t.processDefinitionId;return Object(p.useEffect)((function(){v&&b("processDefinitionId",v)}),[b,v]),Object(p.useEffect)((function(){n&&c(gt)}),[n]),f.a.createElement("form",{onSubmit:u(a)},f.a.createElement("input",{type:"hidden",name:"step",defaultValue:1,ref:d}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"task",ref:d}),f.a.createElement(F.a,{className:h.boxGrid},f.a.createElement(F.a,{border:0,width:1,my:20},f.a.createElement(F.a,{border:0,py:2,width:"50%",mx:"auto"},f.a.createElement(F.a,{p:4,border:0},f.a.createElement(we.a,{variant:"subtitle2",color:"textPrimary"},l("entities.creation.setup.title"))),f.a.createElement(F.a,{p:2},f.a.createElement(F.a,{px:2,border:0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},l("entities.creation.setup.processModel"))),f.a.createElement(F.a,null,f.a.createElement(va,{register:d({required:{value:!0,message:l("validation.required")}}),name:"processDefinitionId",initialValue:Object(H.get)(t,"processDefinitionId",""),emptyOption:l("entities.creation.setup.processModelPlaceholder"),options:i,errors:m}))))),f.a.createElement(F.a,{borderTop:1,width:1,borderColor:"rgba(0, 0, 0, 0.12)"},f.a.createElement(F.a,{border:0,py:2,paddingRight:"32px",width:"50%",mx:"auto",textAlign:"right"},f.a.createElement(je.a,{size:"large",type:"submit",endIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:h.button,disabled:g.isSubmitting,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},l("entities.creation.buttons.next")))))))};rn.defaultProps={useMock:!1};var on=rn,cn=Object(he.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:[[e.spacing(.5),e.spacing(1)]]},item:{height:"726px"},itemContainer:{minHeight:"500px"},containerRole:{border:"0 solid black"},gridContainer:{border:"0px solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid black",marginBottom:e.spacing(2)},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},avatar:{width:e.spacing(7),height:e.spacing(7)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14}}})),ln=["responsible","accountable","consulted","informed"],sn=function(e){var t=e.onSubmit,a=e.changeTab,n=e.store,r=Object(O.c)().t,o=Object(Le.b)({mode:"all",reValidateMode:"onChange"}),i=o.register,c=o.unregister,s=o.handleSubmit,d=o.errors,u=o.watch,m=o.control,b=o.setValue,g=o.clearErrors,h=cn(),v=vt(),x=v.users,y=v.fetchUser,k=Object(p.useMemo)((function(){return[{id:"low",value:r("entities.creation.taskDefinition.low")},{id:"medium",value:r("entities.creation.taskDefinition.medium")},{id:"high",value:r("entities.creation.taskDefinition.high")}]})),C=Object(p.useState)(!1),j=Object(M.a)(C,2),w=j[0],S=j[1],A=Object(p.useState)(null),N=Object(M.a)(A,2),D=N[0],T=N[1],I=Object(p.useState)(),R=Object(M.a)(I,2),P=R[0],B=R[1];Object(p.useEffect)((function(){return ln.forEach((function(e){i({name:e},{required:"responsible"===e})})),function(){ln.forEach((function(e){return c(e)}))}}),[i]);var U=function(e){e&&T(e),S((function(e){return!e}))};return Object(p.useEffect)((function(){y()}),[]),Object(p.useEffect)((function(){if(n){var e=ln.filter((function(e){return n[e]})).reduce((function(e,t){return T(t),b(t,n[t]),e[t]=Object(l.a)({id:n[t],selected:!0},x[n[t]]),e}),{});B((function(t){return Object(l.a)(Object(l.a)({},t),e)}))}}),[n]),Object(p.useEffect)((function(){if(u("startDate")){var e=Object(Be.a)(u("startDate"),{days:15});b("endDate",e)}}),[u("startDate")]),f.a.createElement(Pe.a,{utils:ke.a,locale:ze.a},f.a.createElement("form",{onSubmit:s(t)},w?f.a.createElement(Rt,{open:w,handleClose:U,handleUserSelected:function(e){B((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},D,Object(l.a)(Object(l.a)({},e),{},{selected:!0})))})),b(D,e.fiscalCode.toUpperCase()),g(D)},usersSelected:P,role:D}):null,f.a.createElement("input",{type:"hidden",name:"step",defaultValue:2,ref:i}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"actions",ref:i}),f.a.createElement(F.a,{className:h.boxGrid},f.a.createElement(Ce.a,{container:!0,className:h.gridContainer,spacing:1},f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:h.item}},f.a.createElement(Ce.a,{container:!0},f.a.createElement(Ce.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.task")},f.a.createElement(Qt,{name:"title",placeholder:r("entities.creation.taskDefinition.taskPlaceholder"),unregister:c,register:i({required:{value:!0,message:r("validation.required")},maxLength:{value:125,message:r("validation.maxLenght",{maxLength:125})}}),watch:u,setValue:b,errors:d,showCountCaracthers:!0,countCaracthers:125,initialValue:Object(H.get)(n,"title")}))),f.a.createElement(Ce.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(F.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},f.a.createElement(F.a,{paddingRight:1},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.startDate")},f.a.createElement(F.a,{border:0},f.a.createElement(Ut,{control:m,name:"startDate",setValue:b,format:"dd MMMM yyyy",rules:{required:{value:!0,message:r("validation.required")}},errors:d,initialValue:Object(H.get)(n,"startDate")})))),f.a.createElement(F.a,null,f.a.createElement(zt,{title:r("entities.creation.taskDefinition.endDate")},f.a.createElement(F.a,{border:0},f.a.createElement(Ut,{control:m,name:"endDate",setValue:b,format:"dd MMMM yyyy",rules:{required:{value:!0,message:r("validation.required")}},errors:d,initialValue:Object(H.get)(n,"endDate"),minDate:Object(Be.a)(u("startDate"),{days:1})})))))),f.a.createElement(Ce.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.priority")},f.a.createElement(va,{register:i({required:{value:!0,message:r("validation.required")}}),emptyOption:r("entities.creation.taskDefinition.priorityPlaceholder"),name:"priority",options:k,errors:d,initialValue:Object(H.get)(n,"priority")}))),f.a.createElement(Ce.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.description")},f.a.createElement(Qt,{name:"description",placeholder:r("entities.creation.taskDefinition.descriptionPlaceholder"),register:i({required:{value:!0,message:r("validation.required")},maxLength:{value:500,message:r("validation.maxLength",{maxLength:500})}}),watch:u,setValue:b,errors:d,multiline:!0,rows:6,rowsMax:20,showCountCaracthers:!0,countCaracthers:500,initialValue:Object(H.get)(n,"description"),cssClass:h.inputMultiline}))),f.a.createElement(Ce.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.completionPercentage")},f.a.createElement(va,{register:i(),watch:u,setValue:b,name:"completionPercentage",emptyOption:"0",errors:d,options:Array.from(Array(101).keys()).map((function(e){return{id:e,value:e}}))}))))),f.a.createElement(Ce.a,{item:!0,xs:6,classes:{item:h.item}},f.a.createElement(Ce.a,{container:!0},ln.map((function(e){var t,a,n,o,i;return f.a.createElement(Ce.a,{key:e,item:!0,xs:12,className:h.boxContainer},f.a.createElement(zt,{title:r("entities.creation.taskDefinition.".concat(e))},f.a.createElement(F.a,{className:"".concat(h.borderBox," ").concat(d[e]?"error":""),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"flex-start",alignItems:"center"},f.a.createElement(F.a,{marginRight:2},u(e)?f.a.createElement(Je.a,{className:h.avatar,alt:null===(t=P[e])||void 0===t?void 0:t.name,src:(null===(a=P[e])||void 0===a?void 0:a.image)||""}):f.a.createElement(me.a,{fontSize:"large",className:h.boxAdd,onClick:function(){return U(e)}},f.a.createElement(Ae.a,{className:h.iconAdd}))),f.a.createElement(F.a,{flexGrow:1},u(e)?f.a.createElement(we.a,{variant:"body1",color:"textPrimary"},"".concat(null===(n=P[e])||void 0===n?void 0:n.firstname," ").concat(null===(o=P[e])||void 0===o?void 0:o.lastname)):null,f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},u(e)?null===(i=P[e])||void 0===i?void 0:i.role:r("entities.creation.taskDefinition.assignRole"))),u(e)?f.a.createElement(F.a,null,f.a.createElement(me.a,{fontSize:"large",onClick:function(){return U(e)}},f.a.createElement(Xe.a,{className:h.iconAdd})),"responsible"!==e?f.a.createElement(me.a,{fontSize:"large",onClick:function(){return function(e){b(e,void 0),T(e);var t=Object(l.a)({},P);delete t[e],B(t)}(e)}},f.a.createElement(Qe.a,{className:h.iconAdd})):null):null),d[e]?f.a.createElement(F.a,{marginTop:"3px",marginLeft:"14px"},f.a.createElement(we.a,{variant:"caption",color:"error",align:"left"},r("validation.required"))):null))}))))),f.a.createElement(F.a,{p:2,border:0,textAlign:"center",className:h.boxButtons},f.a.createElement(je.a,{size:"large",type:"button",onClick:function(e){return a(e,0)},startIcon:f.a.createElement(De.a,null),variant:"outlined",className:h.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},r("entities.creation.buttons.previous"))),f.a.createElement(je.a,{size:"large",type:"submit",endIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:h.button,disableRipple:!0},f.a.createElement(we.a,{variant:"body2",color:"textSecondary"},r("entities.creation.buttons.next")))))))},dn=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},un=function(e){var t=e.keycloak,a=e.serviceUrl,n=e.serviceUrlAttachments,r=e.useMock,o=e.callback,i=Object(p.useState)(0),c=Object(M.a)(i,2),s=c[0],d=c[1],u=Object(O.c)().t,m=ue(),b=m.task,g=m.createTask,h=m.updateTask,v=G(),E=v.error,x=v.message,y=v.clearError,k=v.clearMessage,C=xe(),j=ye(),w=Oe(),S=function(e,t){d(t)},A=function(){var e=Object(R.a)(I.a.mark((function e(t,a){var n,r,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&(a.preventDefault(),a.stopPropagation()),n=t.target,r=t.action,o=Object(H.omit)(t,"step","target","action"),h(o),"submit"!==r){e.next=22;break}e.t0=n,e.next="task"===e.t0?8:"note"===e.t0?17:19;break;case 8:return(i=Object(l.a)(Object(l.a)({},b),{},{actions:t.actions})).accountable=i.accountable||null,i.consulted=i.consulted||null,i.informed=i.informed||null,e.next=14,g(i);case 14:return e.sent&&d(parseInt(t.step,10)),e.abrupt("break",20);case 17:return d(parseInt(t.step,10)),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:e.next=23;break;case 22:d(parseInt(t.step,10));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=re().isLoading;return f.a.createElement(W,{keycloak:t},f.a.createElement(V.a,{maxSnack:10,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:P.a},f.a.createElement(ge,{message:x,callback:k,status:"success"}),f.a.createElement(ge,{message:E,callback:y,status:"error"})),f.a.createElement(B.a,{elevation:5},N?f.a.createElement(Ee,null):null,f.a.createElement(U.a,{maxWidth:"xl",disableGutters:!0,className:C.container},f.a.createElement(z.a,{value:s,onChange:S,variant:"fullWidth","aria-label":"tabs creation",classes:w},f.a.createElement(L.a,Object.assign({label:u("entities.creation.tabs.0")},dn(0),{classes:j,disabled:s>0})),f.a.createElement(L.a,Object.assign({label:u("entities.creation.tabs.1")},dn(1),{classes:j,disabled:s<=0||s>1})),f.a.createElement(L.a,Object.assign({label:u("entities.creation.tabs.2")},dn(2),{classes:j,disabled:s<=1||s>2})),f.a.createElement(L.a,Object.assign({label:u("entities.creation.tabs.3")},dn(2),{classes:j,disabled:s<=2||s>2})),f.a.createElement(L.a,Object.assign({label:u("entities.creation.tabs.4")},dn(2),{classes:j,disabled:s<=3}))),f.a.createElement(mn,{value:s,index:0},f.a.createElement(on,{store:b,onSubmit:A,useMock:!0})),f.a.createElement(mn,{value:s,index:1},f.a.createElement(sn,{store:b,onSubmit:A,changeTab:S})),f.a.createElement(mn,{value:s,index:2},f.a.createElement(oa,{onSubmit:A,changeTab:S})),f.a.createElement(mn,{value:s,index:3},f.a.createElement(ae,{keycloak:t,serviceUrl:a,serviceUrlAttachments:n,useMock:r},f.a.createElement(Ma,{changeTab:S}))),f.a.createElement(mn,{value:s,index:4},f.a.createElement(ce,{keycloak:t,serviceUrl:a,useMock:r},f.a.createElement(an,{changeTab:S,callback:o}))))))};un.defaultProps={keycloak:{},useMock:!1,callback:function(){}};var mn=function(e){var t=e.children,a=e.value,n=e.index,r=Object(D.a)(e,["children","value","index"]);return f.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),a===n&&f.a.createElement(F.a,{p:0},t))},bn=un,pn=function(e){var t=e.children,a=Object(p.useState)({loading:!1}),n=Object(M.a)(a,2),r=n[0],o=n[1];return f.a.createElement(ne.Provider,{value:[r,o]},t)},fn=function(e){var t=e.children,a=Object(p.useState)({error:null,message:null}),n=Object(M.a)(a,2),r=n[0],o=n[1];return f.a.createElement(q.Provider,{value:[r,o]},t)},gn=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.useMock,o=Object(p.useState)({task:{},actions:[],error:null,message:null,keycloak:a,serviceUrl:n,useMock:r}),i=Object(M.a)(o,2),c=i[0],s=i[1];return Object(p.useEffect)((function(){a.initialized&&a.authenticated&&s((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:a})}))}),[a]),f.a.createElement(de.Provider,{value:[c,s]}," ",t," ")},hn=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.useMock,o=Object(p.useState)({logged:null,users:null,vertexId:null,vertexShortName:null,pagination:{totalPages:0,totalElements:0,numberOfElements:0,number:0,size:0,first:!0,last:!0},useMock:r,serviceUrl:n,error:null,message:null}),i=Object(M.a)(o,2),c=i[0],s=i[1],d=function e(t){return t?t.type&&1===t.type.id?{vertexId:t.id,vertexShortName:t.shortName}:e(t.parentEdo):null};return Object(p.useEffect)((function(){var e=a.initialized,t=a.authenticated;e&&t&&function(){var e=Object(R.a)(I.a.mark((function e(){var t,o,i,c,u,m,b;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r?(i=ft.payload[0],c="".concat(i.degree," ").concat(i.edo?"-":""," ").concat(null!==(t=null===i||void 0===i||null===(o=i.edo)||void 0===o?void 0:o.name)&&void 0!==t?t:""),u=d(i.edo),m=u.vertexId,b=u.vertexShortName,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:"malessandrini",vertexId:m,vertexShortName:b,isAdmin:!0,userIdLogged:i.id,users:Object(E.a)({},i.fiscalCode.toUpperCase(),Object(l.a)(Object(l.a)({},i),{},{role:c}))})}))):Promise.resolve(a.loadUserInfo()).then((function(e){var t=e.preferred_username;pt(n,t,!0).then((function(e){var a,n,r=e.payload,o="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:""),i=d(r.edo),c=i.vertexId,u=i.vertexShortName;s((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:t.toUpperCase(),vertexId:c,vertexShortName:u,users:Object(E.a)({},r.fiscalCode.toUpperCase(),Object(l.a)(Object(l.a)({},r),{},{role:o,hidden:!0}))})}))}))}))}catch(p){console.error("error",p)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,r]),f.a.createElement(ht.Provider,{value:[c,s]},t)};hn.defaultProps={keycloak:{initialized:!1,authenticated:!1},useMock:!1};var vn=hn,En=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},xn={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",serviceUrlUser:"service-url-user",serviceUrlAttachments:"service-url-attachments",cssUrl:"css-url",useMock:"use-mock",refresh:"refresh"},On=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keycloak=En(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(xn).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===xn.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.getAttribute(xn.cssUrl),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href","".concat(t,"/suneditor.min.css"));var n=this.attachShadow({mode:"open"});n.appendChild(a),n.appendChild(this.container),this.jss=Object(j.b)(Object(l.a)(Object(l.a)({},Object(u.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},d.itIT),this.keycloak=Object(l.a)(Object(l.a)({},En()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=v("keycloak",(function(){e.keycloak=Object(l.a)(Object(l.a)({},En()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=v(h,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),N()(n)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(xn.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(xn.serviceUrl)||"",t=this.getAttribute(xn.serviceUrlUser)||"",a=this.getAttribute(xn.serviceUrlAttachments)||"",n="true"===this.getAttribute(xn.hidden),r="true"===this.getAttribute(xn.useMock);if(n)S.a.render(f.a.createElement(f.a.Fragment,null));else{var o=this.getAttribute(xn.locale)||"it";C(o),S.a.render(f.a.createElement(g.Provider,{value:this.keycloak},f.a.createElement(pn,null,f.a.createElement(fn,null,f.a.createElement(vn,{keycloak:this.keycloak,useMock:r,serviceUrl:t},f.a.createElement(m.b,{jss:this.jss},f.a.createElement(b.a,{theme:this.muiTheme},f.a.createElement(gn,{keycloak:this.keycloak,serviceUrl:e,useMock:r},f.a.createElement(bn,{keycloak:this.keycloak,serviceUrl:e,serviceUrlAttachments:a,useMock:r,callback:this.callback})))))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(xn)}}]),a}(Object(c.a)(HTMLElement));customElements.define("task-creation",On)}},[[258,1,2]]]);
//# sourceMappingURL=main.527088e2.chunk.js.map