(this["webpackJsonptask-version-widget"]=this["webpackJsonptask-version-widget"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(61),r=n(62),i=n(63),c=n(77),o=n(78),u=n(4),s=n(76),l=n(75),b=n(128),d=n(131),f=n(126),h=n(0),k=n.n(h),v=k.a.createContext(null),m="task.detail",p=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},E=n(40),j=n(55),O=n(52),g={it:n(71),en:n(72)},y=Object.keys(g).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},t,Object(E.a)({},"translation",g[t])))}),{}),w=(j.a.t,function(e){!function(e,t){j.a.use(O.a).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:y,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),x=n(5),D=n(7),T=n.n(D),F=n(73),P=n.n(F),C=function(e){var t=e.children,n=e.keycloak;return n&&n.initialized&&n.authenticated?t:null},z=n(123),H=n(127),M=n(125),S=n(53),A=n(54),K=Object(h.createContext)([{},function(){}]),U=function(){var e=Object(h.useContext)(K),t=Object(A.a)(e,2),n=t[0],a=t[1];return{info:n.info,error:n.error,clearError:function(){return a((function(e){return Object(u.a)(Object(u.a)({},e),{},{error:null})}))}}},J=n(129),L=n(74),N=n.n(L),I=function(e){var t=e.message,n=e.callback,a=e.status,r=e.autoHideDuration,i=Object(S.b)(),c=i.enqueueSnackbar,o=i.closeSnackbar,u={variant:a,autoHideDuration:r,action:function(e){return k.a.createElement(J.a,{onClick:function(){n(),o(e)}},k.a.createElement(N.a,null))}};return Object(h.useEffect)((function(){t&&c(t,u)}),[t]),k.a.createElement(k.a.Fragment,null)};I.defaultProps={message:void 0,callback:function(){},autoHideDuration:3e3};var W=I,q=function(){var e=U(),t=e.info,n=e.error,a=e.clearError;return k.a.createElement(S.a,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:z.a},k.a.createElement(H.a,{width:1},k.a.createElement(H.a,{marginRight:2},k.a.createElement(M.a,{variant:"h6"},t))),k.a.createElement(W,{message:n,callback:a,status:"error"}))},G=n(19),R=n.n(G),V=n(35),B=function(){var e=Object(V.a)(R.a.mark((function e(t,n){var a,r,i=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(i.length>2&&void 0!==i[2])||i[2],e.next=3,fetch(t,n);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!a){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(V.a)(R.a.mark((function e(t){var n,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("buildInfo"),a={method:"GET"},e.abrupt("return",B(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X={payload:"0.0.223",metadata:{}},Y=function(e){var t=e.children,n=e.keycloak,a=e.serviceUrl,r=e.useMock,i=Object(h.useState)({info:[],error:null}),c=Object(A.a)(i,2),o=c[0],s=c[1],l=Object(O.b)().t;return Object(h.useEffect)((function(){n.initialized&&n.authenticated&&function(){var e=Object(V.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=5;break}s((function(e){return Object(u.a)(Object(u.a)({},e),{},{info:X.payload})})),e.next=9;break;case 5:return e.next=7,Q(a);case 7:t=e.sent,s((function(e){return Object(u.a)(Object(u.a)({},e),{},{info:t.payload})}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s({info:[],error:l("message.error")});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[n.initialized,n.authenticated]),k.a.createElement(K.Provider,{value:[o,s]},t," ")};Y.defaultProps={keycloak:{initialized:!1,authenticated:!1},useMock:!1};var Z=Y,$=function(){return window&&window.entando&&window.entando.keycloak&&Object(u.a)(Object(u.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},_={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",useMock:"use-mock"},ee=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).keycloak=$(),e}return Object(r.a)(n,[{key:"attributeChangedCallback",value:function(e,t,n){if(this.container&&t!==n){if(!Object.values(_).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===_.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.attachShadow({mode:"open"});t.appendChild(this.container),this.jss=Object(x.b)(Object(u.a)(Object(u.a)({},Object(b.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},l.itIT),this.keycloak=Object(u.a)(Object(u.a)({},$()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=p("keycloak",(function(){e.keycloak=Object(u.a)(Object(u.a)({},$()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=p(m,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),P()(t)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(_.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(_.serviceUrl)||"",t="true"===this.getAttribute(_.hidden),n="true"===this.getAttribute(_.useMock);if(t)T.a.render(k.a.createElement(k.a.Fragment,null));else{var a=this.getAttribute(_.locale)||"it";w(a),T.a.render(k.a.createElement(v.Provider,{value:this.keycloak},k.a.createElement(d.b,{jss:this.jss},k.a.createElement(f.a,{theme:this.muiTheme},k.a.createElement(Z,{keycloak:this.keycloak,serviceUrl:e,useMock:n},k.a.createElement(C,{keycloak:this.keycloak},k.a.createElement(q,null)))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(_)}}]),n}(Object(o.a)(HTMLElement));customElements.define("task-version",ee)},71:function(e){e.exports=JSON.parse('{"message":{"error":"Errore nel recupero dei dati"}}')},72:function(e){e.exports=JSON.parse("{}")},86:function(e,t,n){e.exports=n(109)}},[[86,1,2]]]);
//# sourceMappingURL=main.02b88edd.chunk.js.map