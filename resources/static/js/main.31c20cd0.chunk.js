(this["webpackJsonptask-detail-widget"]=this["webpackJsonptask-detail-widget"]||[]).push([[0],{413:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore durante la connessione al server","adhocTimeout":"Il server @DhOC non risponde","adhocLogin":"Errore durante la connessione al server @DhOC","adhocConnectionNotFound":"Configurazione di connessione al server @DhOC assente per il vertice \\"{vertexId}-{vertexShortName}\\"","adhocSearch":"Errore durante la ricerca dei documenti @DhOC","adhocDownload":"Errore durante il recupero del documento @DhOC","attachment":{"codeAlreadyExists":"E\' gi\xe0 presente un allegato con il codice inserito"},"task":{"delete":"Si \xe8 verificato un errore durante l\'eliminazione del task"},"ackRegistrationFailure":"Errore durante la registrazione dell Ack"},"message":{"status":"Lo stato \xe8 stato aggiornato","date":"La data \xe8 stata aggiornata","noteCreated":"La Nota e\' stata creata. ID: {{id}}","noteDeleted":"La Nota e\' stata cancellata. ID: {{id}}","attachmentAddedToTask":"","attachmentAdded":"L\'allegato e\' stato aggiunto","attachmentDeleted":"L\'allegato e\' stato eliminato","attachmentUpdated":"L\'allegato \xe8 stato aggiornato","task":{"delete":"Task eliminato!"},"pendingActions":"Commenti o ack mancanti","pendingAck":"Ack mancante","pendingComment":"Commento mancante","pendingActionsAlt":"Azione Richiesta","ackRegistered":"Ack registrato correttamente"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","delete":"Elimina","confirm":"Conferma","yes":"Si","no":"No","confirmOperationTitle":"Attenzione!","confirmOperationMessage":"Attenzione, procedere con l\'operazione?"},"validation":{"required":"{{field}} \xe8 obbligatorio","length":"La lunghezza deve essere di {{length}} caratteri"},"entities":{"detail":{"title":"Dettaglio del Task - {{id}}","progress":"% avanzamento","priority":"Priorita\'","low":"Bassa","medium":"Media","high":"Alta","action":"Azione {{from}} di {{to}}","view":"Vista","table":"Tabella","completionPercentage":"% di completamento"},"info":{"id":"ID","task":"TASK","startDate":"INIZIO","endDate":"FINE","description":"DESCRIZIONE","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","empty":"Non assegnato"},"task":{"deleteMsg":"Eliminare il task {{id}} - {{title}}?","changeDatesMsg":"Confermando l\'operazione verranno riadattate anche le date di tutte le azioni e sottoazioni legate a questo task, procedere?","sendAckMsg":"Confermando l\'operazione come utente informed marcherai il task come riscontrato, procedere?"},"action":{"sendAckMsg":"Confermando l\'operazione come utente informed marcherai l\'azione come riscontrata, procedere?","detail":{"title":"Dettaglio dell\'Azione","goBack":"Vai al Task di questa azione","subactionInfo":"Sottoazione {{from}} di {{to}}","description":"DESCRIZIONE","noAction":"Non sono presenti Azioni","noSubaction":"Non sono presenti Sottoazioni"},"emptyDescription":"Questa azione non ha descrizione","current":"Azione corrente","subActions":"questa azione ha <0>{{count}} sottoazioni</0>","actionsPendingAlert":"questa azione ha commenti o ack mancanti","gotoDetail":"Dettaglio","action":"AZIONE","subaction":"SOTTOAZIONE","within":"ENTRO","state":"STATO","noStatus":"Aperto","popper":{"title":"Azione <0>in corso</0>","description":"L\' azione pu\xf2 essere completata solo se le azioni sono state completate","subAction":"Vai al dettaglio dell\'azione per consultare le sottoazioni","pendingAction":"Vai al dettaglio dell\'azione per consultare le azioni mancanti"},"attachments":"Allegati","attachmentsPresent":"{{count}} Allegati presenti","expand":"Espandi","close":"Chiudi","note":"Note","notePresent":"{{count}} Note presenti","next":"Azione successiva","previous":"Azione precedente"},"attachment":{"folderDepartment":"Link EICloud","folderOffice":"Cartella Ufficio","attachmentDirNotPresent":"{{dir}} non presente","addAttachment":"Aggiungi allegato al Task","addAttachmentAction":"Aggiungi allegato all\' Azione ","files":"FILE ({{count}})","einetAttachments":"EInet ({{count}})","adhocAttachments":"@dhoc ({{count}})","addNote":"Aggiungi nota al Task","addNoteAction":"Aggiungi nota all\' Azione","note":"Nota {{from}} di {{to}}","dhoc":"Aggiungi da <0>@DhOC</0>","elcloud":"Aggiungi da <0>El Cloud</0>","dialog":{"attachment":{"titleDhoc":"Aggiungi un allegato da <0>@DhOC</0>","titleElCloud":"Aggiungi un allegato da <0>El Cloud</0>","protocolDhOc":"PROTOCOLLO","protocolDhOcPlaceholder":"Inserisci il n\xb0 di protocollo...","yearDhOc":"ANNO","yearDhOcPlaceholder":"Inserisci l\'anno di riferimento...","registryDhOc":"REGISTRO","registryDhOcPlaceholder":"Inserisci il registro di riferimento...","searchDhOC":"Cerca allegato","attachment":"Allegato...","notFound":"Allegato non trovato","add":"Aggiungi","cancel":"Annulla","dragAndDrop":"Trascina un file qui dentro","selectedFile":"File Selezionato","linkNextcloud":"Link NextCloud","linkNextcloudPlaceholder":"inserisci il link interno di file/cartella NextCloud..."}}},"table":{"empty":"Non sono presenti azioni","rowSelected":"Righe selezionate","pagination":{"rows":"Righe","rowsPerPage":"Elementi per pagina:","previous":"Precedente","next":"Sucessiva"}},"dialog":{"users":{"title":"Assegna","button":"Assegna ruolo","buttonClose":"Chiudi","search":"Cerca un utente...","assign":"Assegna a me"},"note":{"title":"Nuova Nota del Task","buttonPublish":"Pubblica Nota","placeholder":"Inserisci la nota..."}},"creation":{"taskDefinition":{"endDate":""}},"subaction":{"sendAckMsg":"Confermando l\'operazione come utente informed marcherai la sottoazione come riscontrata, procedere?","subActionActionPending":"questa sottoazione ha commenti o ack mancanti","popper":{"pendingAction":"Consulta la lista utenti per le azioni mancanti"}}},"button":{"ack":{"content":"Invia l\'Ack","title":"Azione necessaria per utenti Informed"},"comment":{"content":"Scrivi ed Invia il commento","title":"Azione necessaria per utenti Consulted"}},"tooltip":{"ackPresent":"L\'utente ha inviato l\'ack","commentPresent":"Clicca l\'icona per leggere il commento"}}')},414:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection","ackRegistrationFailure":"Error during ack writing operation"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"message":{"pendingActions":"missing acks or comments","pendingAck":"Missing ack","pendingComment":"Missing comment","pendingActionsAlt":"Action Required","ackRegistered":"Ack registered"},"validation":{"required":"{{field}} is required"},"entities":{"action":{"sendAckMsg":"Confirming this operation will be sent an ack for the action, do you want proceed?","detail":{"title":"Action Detail","goBack":"Return to action\'s task","subactionInfo":"Subaction {{from}} of {{to}}","description":"DESCRIPTION","noAction":"No Actions","noSubaction":"No Subaction"},"emptyDescription":"This action has no description","current":"Current action","subActions":"This action has <0>{{count}} aubactions</0>","actionsPendingAlert":"This action has acks or comments missing","gotoDetail":"Details","action":"ACTION","subaction":"SUBACTION","within":"DEADLINE","state":"STATE","noStatus":"Open","popper":{"title":"Action <0>in progress</0>","description":"This action can be completed only if subactions are all completed","subAction":"Go to action detail to check subactions","pendingAction":"Go to action detail to check missing users\' actions"},"attachments":"Attachments","attachmentsPresent":"{{count}} Attachements","expand":"Expand","close":"Close","note":"Note","notePresent":"{{count}} detected notes","next":"Next Action","previous":"Previous Action"},"task":{"deleteMsg":"Delete task {{id}} - {{title}}?","changeDatesMsg":"Confirming this operation will be resetted dates of all actions and subaction of this task,do you want proceed?","sendAckMsg":"Confirming this operation will be sent an ack for the task, do you want proceed?","deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Empty table"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"},"subaction":{"sendAckMsg":"Confirming this operation will be sent an ack for the subaction, do you want proceed?","subActionActionPending":"Missing acks or comment for this subaction","popper":{"pendingAction":"Check user list for missing actions detail"}}},"button":{"ack":{"content":"Send Ack","title":"Mandatory action for Informed users"},"comment":{"content":"Write and Send a comment","title":"Mandatory action for Consulted users"}},"tooltip":{"ackPresent":"Ack sent by user","commentPresent":"Click the icon to read the comment"}}')},421:function(e,t,a){e.exports=a.p+"static/media/user.8a7d2253.jpg"},457:function(e,t,a){e.exports=a(530)},530:function(e,t,a){"use strict";a.r(t);var n=a(409),r=a(410),o=a(411),i=a(444),c=a(445),l=a(4),s=a(142),u=a(161),d=a(449),m=a(179),p=a(575),f=a(0),b=a.n(f),g=b.a.createContext(null),h="task.detail",v=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},E=a(36),O=a(315),y=a(17),x={it:a(413),en:a(414)},k=Object.keys(x).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(E.a)({},t,Object(E.a)({},"translation",x[t])))}),{}),C=(O.a.t,function(e){!function(e,t){O.a.use(y.b).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:k,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),j=a(58),w=a(25),A=a.n(w),S=a(415),T=a.n(S),N=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},I=a(187),D=a(52),P=a(12),R=Object(f.createContext)([{loading:!1},function(){}]),U=function(){var e=Object(f.useContext)(R),t=Object(P.a)(e,2),a=t[0],n=t[1];return{isLoading:a.loading,setLoading:function(e){n({loading:e})}}},z=a(34),F=a(7),M=a.n(F),B=a(10),L=Object(f.createContext)([{},function(){}]),W=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},H=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r,o=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!n){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r,o,i=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,fetch(t,a);case 3:if(200!==(r=e.sent).status){e.next=8;break}return o=r.headers.get("Content-Disposition").split("filename=")[1],r.blob().then((function(e){var t=window.URL.createObjectURL(e);if(n&&o.toLowerCase().endsWith(".pdf")){window.open().location.href=t}else{var a=document.createElement("a");a.href=t,a.download=o,a.click()}})),e.abrupt("return",null);case 8:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a.id),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/actions"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/actions/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/subactions/").concat(a,"/status"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/actions/").concat(a.id),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/subactions/").concat(a.id),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/actions/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/actions/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/notes/").concat(a),r=Object(l.a)(Object(l.a)({},W()),{},{method:"DELETE"}),e.abrupt("return",H(n,r,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/dates"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:n?JSON.stringify(n):null}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(l.a)(Object(l.a)({},W()),{},{method:"DELETE"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/informed/ack"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PATCH",body:JSON.stringify({acked:!0})}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/actions/").concat(a,"/informed/ack"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PATCH",body:JSON.stringify({acked:!0})}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/subactions/").concat(a,"/informed/ack"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"PATCH",body:JSON.stringify({acked:!0})}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),le=a(44),se=["responsible","accountable","consulted","informed"],ue=function e(t){var a=[];return t.forEach((function(t){var n=function(e){return Array.from(se).reduce((function(t,a){return e[a]&&t.push(e[a].toUpperCase()),t}),[])}(t);if(a=[].concat(Object(z.a)(a),Object(z.a)(n)),null===t||void 0===t?void 0:t.subActions){var r=e(t.subActions);a=[].concat(Object(z.a)(a),Object(z.a)(r))}})),Object(z.a)(new Set(a))},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=window.location.pathname.lastIndexOf("/"),n=window.location.pathname.substring(0,a),r="".concat(window.location.origin).concat(n,"/").concat(e,".page");r+=t?"?".concat(t):"",window.location.assign(r)},me=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("users/fiscalCode","/").concat(a),n&&(r+="?loadEdoTree=true"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(r,o));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n,r,o,i,c=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{page:0,pageSize:40},n=c.length>2?c[2]:void 0,r=c.length>3&&void 0!==c[3]&&c[3],o="".concat(t,"/users?informedOrConsulted=").concat(r,"&sortBy=lastname,firstname,id"),a&&(o+="&page=".concat(a.page,"&size=").concat(a.pageSize)),n&&(o+="&globalSearch=".concat(n)),i=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(o,i));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=Object(f.createContext)([{},function(){}]),be=function(){var e=Object(f.useContext)(fe),t=Object(P.a)(e,2),a=t[0],n=t[1],r=a.serviceUrl,o=a.usersPresent,i=a.logged,c=Object(y.c)().t,s=function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{users:e})}))},u=function(){var e=Object(B.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.map((function(e){return me(r,e.toUpperCase(),e===t)})),Promise.all(a).then((function(e){var t=e.reduce((function(e,t){var a,n,r=t.payload,o="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[r.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},r),{},{role:o}),e}),{});s(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(B.a)(M.a.mark((function e(t,o,s){var u,d,m,p,f,b,g,h,v,O,y,x;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe(r,t,o,s);case 3:u=e.sent,d=u.payload,m=u.totalPages,p=u.totalElements,f=u.numberOfElements,b=u.number,g=u.size,h=u.first,v=u.last,d&&(O=d.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r}),e}),{}),y=a.users[i],x=Object.keys(O).find((function(e){var t;return(null===(t=O[e])||void 0===t?void 0:t.fiscalCode.toUpperCase())===i})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{users:x?O:Object(l.a)(Object(l.a)({},O),{},Object(E.a)({},null===y||void 0===y?void 0:y.fiscalCode.toUpperCase(),y)),pagination:{totalPages:m,totalElements:p,numberOfElements:f,number:b,size:g,first:h,last:v}})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:c("error.dataLoading"),message:null}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{logged:a.logged,vertexId:a.vertexId,vertexShortName:a.vertexShortName,users:a.users,usersPresent:a.usersPresent,loadUsersPresent:a.loadUsersPresent,serviceUrl:a.serviceUrl,setUsers:s,setUsersPresent:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{usersPresent:Object(z.a)(new Set(t.usersPresent.concat(e)))})}))},setLoadUserPresent:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{loadUsersPresent:e})}))},fetchUser:d,fetchUserPresent:u}},ge=Object(f.createContext)([{},function(){}]),he=function(){var e=Object(f.useContext)(ge),t=Object(P.a)(e,2),a=t[0],n=t[1],r=Object(f.useContext)(L),o=Object(P.a)(r,2),i=o[0],c=o[1],s=U().setLoading,u=be().setUsersPresent,d=Object(y.c)().t,m=a.serviceUrl,p=i.serviceUrl,b=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,K(m,t);case 4:a=e.sent,r=a.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:r})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,r,o,i,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,G(m,t);case 4:if(a=e.sent,console.log("updateTask",a),!a.payload){e.next=14;break}return e.next=9,K(m,t.id);case 9:r=e.sent,o=r.payload,i=r.metadata,c=Object(z.a)(new Set(Array.from(se).reduce((function(e,t){return o[t]&&e.push(o[t]),e}),[]))),u(c),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:o,metadata:i,edoResponsible:o.responsible,usersSelected:se.reduce((function(e,t){return e[t]=o[t],e}),{}),error:null})}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 20:return e.prev=20,s(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,16,20,23]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(B.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,_(m,t,{status:a});case 4:e.sent.payload.id&&(b(t),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:d("message.status")})}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 12:return e.prev=12,s(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(p,t);case 3:a=e.sent,r=ue(a.payload),u(r),o=a.payload.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),c((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:o,message:d("message.status")})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(B.a)(M.a.mark((function e(t,a,r){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,ne(m,t,Object(E.a)({},a,r));case 4:if(!e.sent.payload.id){e.next=11;break}return e.next=8,b(t);case 8:return e.next=10,v(t);case 10:n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:d("message.date")})}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 17:return e.prev=17,s(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(t,a,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,re(m,t);case 4:e.sent.payload.id&&n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:d("message.task.delete")})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.task.delete")})}));case 12:return e.prev=12,s(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,oe(m,t);case 4:return e.next=6,b(t);case 6:n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:d("message.ackRegistered")})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("errore",e.t0),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.ackRegistrationFailure")})}));case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}();return{usersTask:a.usersTask,task:a.task,metadata:a.metadata,edoResponsible:a.edoResponsible,error:a.error,message:a.message,usersSelected:a.usersSelected,taskListPage:a.taskListPage,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},updateTask:g,updateTaskStatus:h,updateAckTaskStatus:k,updateTaskDates:O,deleteTask:x,fetchTask:b}},ve=Object(f.createContext)([{},function(){}]),Ee=function(e){var t=e.children,a=Object(f.useState)({view:"table"}),n=Object(P.a)(a,2),r=n[0],o=n[1];return b.a.createElement(ve.Provider,{value:[r,o]},t)},Oe=a(318),ye=Object(Oe.a)({spinner:{zIndex:9999,display:"inline-block",position:"absolute",top:"30%",left:"50%",width:"80px",height:"80px","& div":{transformOrigin:"40px 40px",animation:"$spinner 1.2s linear infinite"},"& div::after":{content:'" "',display:"block",position:"absolute",top:"3px",left:"37px",width:"5px",height:"18px",borderRadius:"20%",background:"currentColor"},"& div:nth-child(1)":{transform:"rotate(0deg)",animationDelay:"-1.1s"},"& div:nth-child(2)":{transform:"rotate(30deg)",animationDelay:" -1s"},"& div:nth-child(3)":{transform:"rotate(60deg)",animationDelay:" -0.9s"},"& div:nth-child(4)":{transform:"rotate(90deg)",animationDelay:" -0.8s"},"& div:nth-child(5)":{transform:"rotate(120deg)",animationDelay:" -0.7s"},"& div:nth-child(6)":{transform:"rotate(150deg)",animationDelay:" -0.6s"},"& div:nth-child(7)":{transform:"rotate(180deg)",animationDelay:" -0.5s"},"& div:nth-child(8)":{transform:"rotate(210deg)",animationDelay:" -0.4s"},"& div:nth-child(9)":{transform:"rotate(240deg)",animationDelay:" -0.3s"},"& div:nth-child(10)":{transform:"rotate(270deg)",animationDelay:" -0.2s"},"& div:nth-child(11)":{transform:"rotate(300deg)",animationDelay:" -0.1s"},"& div:nth-child(12)":{transform:"rotate(330deg)",animationDelay:" 0s"}},"@keyframes spinner":{from:{opacity:0},to:{opacity:1}}}),xe=function(){var e=ye();return b.a.createElement("div",{className:e.spinner,"data-testid":"id-spinner"},b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null),b.a.createElement("div",null))},ke=a(163),Ce=a(295),je=a(104),we=a(566),Ae=a(381),Se=a(131),Te=a.n(Se),Ne=a(118),Ie=a.n(Ne),De=a(582),Pe=a(589),Re=function(){var e,t,a=Object(f.useContext)(L),n=Object(P.a)(a,2),r=n[0],o=n[1],i=he(),c=i.task,s=i.fetchTask,u=be().setUsersPresent,d=Object(y.c)().t,m=r.serviceUrl,p=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r,i,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"action"!==t){e.next=7;break}return e.next=4,Z(m,a);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,X(m,a);case 9:n=e.sent;case 10:if(!n.payload.id){e.next=19;break}return e.next=13,q(m,c.id);case 13:r=e.sent,i=r.payload,s=ue(i),u(s),r=i.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:r,message:d("message.status")})}));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("errore",e.t0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"action"!==t){e.next=7;break}return e.next=4,J(m,a,{status:n});case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,Y(m,a,{status:n});case 9:r=e.sent;case 10:if(!r.payload.id){e.next=16;break}return s(c.id),e.next=14,q(m,c.id);case 14:i=e.sent,o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:i.payload,message:d("message.status")})}));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(B.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("action",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(B.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("subActions",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(m,t||c.id);case 3:a=e.sent,n=ue(a.payload),u(n),r=a.payload.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:r,message:d("message.status")})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("errore",e.t0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.dataLoading")})}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"action"!==t){e.next=6;break}return e.next=4,ie(m,a);case 4:e.next=8;break;case 6:return e.next=8,ce(m,a);case 8:return s(c.id),e.next=11,q(m,c.id);case 11:n=e.sent,o((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:n.payload,message:d("message.ackRegistered")})})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("errore nel settaggio dell ack ",e.t0),o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:d("error.ackRegistrationFailure")})}));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}();return{taskId:r.taskId,usersActions:r.usersActions,actions:r.actions,subActions:null!==(e=null===(t=r.actions[null===r||void 0===r?void 0:r.selected])||void 0===t?void 0:t.subActions)&&void 0!==e?e:[],error:r.error,message:r.message,clearError:function(){return o((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){o((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},setSelectAction:function(e){return o((function(t){return Object(l.a)(Object(l.a)({},t),{},{selected:e})}))},actionSelected:r.actions[r.selected],selectedAction:r.selectedAction,fetchActions:v,updateActionStatus:g,updateSubActionStatus:h,updateAction:p,updateActionAndSubactionAck:E,pagination:r.pagination,loading:r.loading}},Ue=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(Object(l.a)({},W()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",H(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=Object(l.a)(Object(l.a)({},W()),{},{method:"DELETE"}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(a,"?").concat("referenceType=").concat(n),o=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Me=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("adhoc/search"),r=Object(l.a)(Object(l.a)({},W()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",H(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Be=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("adhoc/download"),o=Object(l.a)(Object(l.a)({},W()),{},{method:"POST",body:a?JSON.stringify(a):null,responseType:"blob"}),e.abrupt("return",V(r,o,n));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Le=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("all/types"),n=Object(l.a)(Object(l.a)({},W()),{},{method:"GET"}),e.abrupt("return",H(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n,r){var o,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"/").concat(a),i=Object(l.a)(Object(l.a)({},W()),{},{method:"PUT",body:JSON.stringify({referenceId:r,code:n})}),e.abrupt("return",H(o,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),He=Object(f.createContext)([{},function(){}]),Ve=function(){var e=Object(f.useContext)(He),t=Object(P.a)(e,2),a=t[0],n=t[1],r=U().setLoading,o=Object(y.c)().t,i=a.serviceUrlAttachments,c=be(),s=c.logged,u=c.vertexId,d=c.vertexShortName,m=function(){var e=Object(B.a)(M.a.mark((function e(t,c){var s,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,Fe(i,t,c);case 4:s=e.sent,u=s.payload.attachments,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:u})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(B.a)(M.a.mark((function e(t,c,s,u){var d,m,p,f,b;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d="".concat(i,"/").concat(t),m={data:c,referenceId:u,referenceType:s},e.prev=2,r(!0),e.next=6,Ue(d,m);case 6:if(!e.sent.payload.id){e.next=14;break}return e.next=10,Fe(i,u,s);case 10:p=e.sent,f=p.payload.attachments,b=o("message.attachmentAdded")+(a.allReferenceType.TASK===s?" al task":" all' azione"),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:f,message:b})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 19:return e.prev=19,r(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("nextcloud",t,a,n);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("adhoc",{items:t},a,n);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(B.a)(M.a.mark((function e(t,c,s,u){var d,m;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,We(i,t,c,s);case 4:if(!e.sent.payload){e.next=11;break}return e.next=8,Fe(i,s,u);case 8:d=e.sent,m=d.payload.attachments,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:m,message:o("message.attachmentUpdated")})}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"409"===e.t0.message?n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.attachment.codeAlreadyExists"),message:null})):n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 16:return e.prev=16,r(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(B.a)(M.a.mark((function e(t,c,s){var u,d,m;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,ze(i,t);case 4:if(!e.sent.payload.id){e.next=12;break}return e.next=8,Fe(i,s,c);case 8:u=e.sent,d=u.payload.attachments,m=o("message.attachmentDeleted")+(a.allReferenceType.TASK===c?" dal task ":" dall'azione"),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:d,message:m})}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 17:return e.prev=17,r(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(e,t){var r="dataLoading";-1!==e.toString().toLowerCase().indexOf("time-out")?r="adhocTimeout":-1!==e.toString().toLowerCase().indexOf("bad request")?r="adhocLogin":-1!==e.toString().toLowerCase().indexOf("precondition failed")?r="adhocConnectionNotFound":-1!==e.toString().toLowerCase().indexOf("not found")&&(r="adhoc".concat(t));var i=o("error.".concat(r)).replace("{vertexId}",u).replace("{vertexShortName}",d);n(Object(l.a)(Object(l.a)({},a),{},{error:i,message:null}))},O=function(){var e=Object(B.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),a=Object(l.a)(Object(l.a)({},t),{},{cf:s,vertexId:u}),e.next=5,Me(i,a);case 5:return n=e.sent,e.abrupt("return",n.payload.items);case 9:return e.prev=9,e.t0=e.catch(0),E(e.t0,"Search"),e.abrupt("return",[]);case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(B.a)(M.a.mark((function e(t,a,n){var o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),o={id:t,name:a,cf:s,vertexId:u},e.next=5,Be(i,o,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E(e.t0,"Download");case 10:return e.prev=10,r(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{attachments:a.attachments,fetchAttachments:m,postNextcloudAttachment:b,postAdhocAttachment:g,searchAdhocAttachment:O,updateAttachmentCode:h,deleteAttachment:v,downloadAdhocAttachment:x,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},allClouds:a.allClouds,allReferenceType:a.allReferenceType,EINET_DIRECTORY:a.EINET_DIRECTORY,previewPdf:a.previewPdf}},Ke=Object(f.createContext)([{},function(){}]),Ge=function(){var e=Object(f.useContext)(Ke),t=Object(P.a)(e,2),a=t[0],n=t[1];return{isOpenDialog:a.openDialog,userSelected:a.userSelected,userRole:a.userRole,type:a.type,setAllState:function(e){return n(e)},setType:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{type:e})}))},setUserRole:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{userRole:e})}))},setOpenDialog:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{openDialog:e})}))},setUserSelected:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{userSelected:e})}))}}},_e=a(569),qe=a(571),Je=a(570),Ye=a(309),Ze=a.n(Ye),Xe=a(246),$e=a.n(Xe),Qe=a(5),et=a.n(Qe),tt=a(236),at=a(244),nt=a.n(at),rt=a(154),ot=a.n(rt),it=a(197),ct=a.n(it),lt=a(375),st=a(416),ut=a.n(st),dt=a(153),mt=a.n(dt),pt=a(243),ft=a.n(pt),bt={LENGTH_TASK_ATTACHMENT_CODE:4,ADHOC_MIN_YEAR:2012,ADHOC_DEFAULT_REGISTRY:"REG"},gt=function(e){var t=e.attachmentCode,a=e.referenceId,n=e.onConfirm,r=Object(y.c)().t,o=Object(f.useState)({active:!1,value:t,error:!1}),i=Object(P.a)(o,2),c=i[0],s=i[1];return b.a.createElement(b.a.Fragment,null,c.active?b.a.createElement(b.a.Fragment,null,b.a.createElement(tt.a,{id:"saveBtn","aria-label":"save",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1})})),n(c.value)},disableRipple:!0,disabled:c.error},b.a.createElement(mt.a,null)),b.a.createElement(tt.a,{id:"cancelBtn","aria-label":"delete",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1,error:!1,value:t})}))}},b.a.createElement(ut.a,null)),b.a.createElement(lt.a,{variant:"outlined",error:c.error,type:"text",id:"code",name:"name",value:c.value,inputProps:{maxLength:bt.LENGTH_TASK_ATTACHMENT_CODE},helperText:c.error?r("validation.length",{length:bt.LENGTH_TASK_ATTACHMENT_CODE}):"",onChange:function(e){e.target.value.toString().trim().length!==bt.LENGTH_TASK_ATTACHMENT_CODE?s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!0,value:e.target.value})})):s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!1,value:e.target.value})}))}})):b.a.createElement(b.a.Fragment,null,b.a.createElement(tt.a,{id:"editBtn","aria-label":"edit",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!0})}))}},b.a.createElement(ft.a,null)),b.a.createElement("span",null,a,"-",t)))};gt.defaultProps={};var ht=gt,vt=Object(Oe.a)((function(e){return{borderBox:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4},icon:{color:"#5a6470",padding:e.spacing(1),border:0,borderStyle:"solid"},iconAction:{display:"flex",alignItems:"baseline",flexWrap:"nowrap",flexDirection:"row"},iconAndTextAction:{display:"flex",alignItems:"center",flexWrap:"nowrap",flexDirection:"row"},attachment:{width:"60%",border:0,borderStyle:"solid"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)",overflow:"hidden",textOverflow:"ellipsis"},marginBox:{marginBottom:"8px"}}})),Et=function(e){var t=e.id,a=e.code,n=e.filename,r=e.signature,o=e.cloudType,i=e.allClouds,c=e.referenceType,l=e.referenceId,s=Ve().updateAttachmentCode,u=Ve().deleteAttachment,d=he().metadata,m=Ve().downloadAdhocAttachment,p=vt(),f=n,g=n;return g.length>60&&(g="".concat(n.substring(0,17),"...").concat(n.substring(n.length-40))),b.a.createElement(Ce.a,{className:"".concat(p.borderBox," ").concat(p.marginBox),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ce.a,{p:1,className:p.icon},b.a.createElement(nt.a,null)),b.a.createElement(Ce.a,{className:p.attachment},o===i.NEXTCLOUD?b.a.createElement(je.a,{variant:"body1",color:"textSecondary",title:f,noWrap:!0},b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:f,className:p.link},g)):b.a.createElement(b.a.Fragment,null,r?b.a.createElement(je.a,{title:g,component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"}},r):null,b.a.createElement(je.a,{variant:"body1",color:"textSecondary",title:g,component:"div",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return m(t,null,!0)}},g))),b.a.createElement(Ce.a,{className:"".concat(p.icon," ").concat(p.iconAndTextAction)},b.a.createElement(ht,{attachmentId:t,attachmentCode:a,referenceId:l,onConfirm:function(e){return s(t,e,l,c)}})),b.a.createElement(Ce.a,{className:"".concat(p.icon," ").concat(p.iconAction)},o===i.NEXTCLOUD?b.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:f,className:p.link},b.a.createElement(ct.a,null)):b.a.createElement(ct.a,{style:{cursor:"pointer"},onClick:function(){return m(t,null,!0)}}),d.canRemoveAttachments?b.a.createElement(tt.a,{"aria-label":"delete",onClick:function(){return u(t,c,l)},disableRipple:!0},b.a.createElement(ot.a,null)):null))};Et.defaultProps={referenceType:null,signature:null};var Ot=Et,yt=a(2),xt=a(561),kt=a(541),Ct=a(152),jt=a(6),wt=a(245),At=a.n(wt),St=a(155),Tt=a.n(St),Nt=a(84),It=a.n(Nt),Dt={success:mt.a,error:At.a,info:Tt.a},Pt={success:3e3,error:5e3,info:5e3},Rt=function e(t){var a=t.className,n=t.classes,r=t.status,o=t.message,i=t.onClose,c=t.anchorOrigin,l=r||e.INFO,s=Dt[l],u=Pt[l],d=Object(f.useState)(!1),m=Object(P.a)(d,2),p=m[0],g=m[1],h=b.a.createElement("span",{className:n.message},b.a.createElement(s,{className:Object(yt.a)(n.icon,n.iconStatus)}),o);Object(f.useEffect)((function(){o&&g(!0)}),[o]);var v=function(e,t){"clickaway"!==t&&(g(!1),i&&i())};return b.a.createElement(xt.a,{open:p,onClose:v,autoHideDuration:u,anchorOrigin:c},b.a.createElement(kt.a,{className:Object(yt.a)(n[l],a),message:h,action:[b.a.createElement(tt.a,{key:"close","aria-label":"close",color:"inherit",onClick:v},b.a.createElement(It.a,{className:n.icon}))]}))};Rt.SUCCESS="success",Rt.ERROR="error",Rt.defaultProps={message:null,className:"",status:Rt.INFO="info",onClose:function(){},anchorOrigin:{vertical:"bottom",horizontal:"center"}};var Ut=Object(jt.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:Ct.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(Rt),zt=a(562),Ft=a(538),Mt=a(543),Bt=a(377),Lt=a(563),Wt=a(376),Ht=Object(Wt.a)({highlight:{color:"#efb868",fontWeight:600}}),Vt=function(e){var t=e.onClose,a=e.open,n=function(e){t(e)},r=Object(y.c)().t,o=Ht();return b.a.createElement(zt.a,{onClose:t,"aria-labelledby":"dialog-choose-attachment",open:a},b.a.createElement(Ft.a,null,b.a.createElement(Mt.a,{button:!0,onClick:function(){return n("dhoc")},key:"dhoc"},b.a.createElement(Bt.a,null,b.a.createElement(y.a,{t:r,i18nKey:"entities.attachment.dhoc"},[b.a.createElement("span",{key:0,className:o.highlight})]))),b.a.createElement(Lt.a,null),b.a.createElement(Mt.a,{button:!0,onClick:function(){return n("elcloud")},key:"elcloud"},b.a.createElement(Bt.a,null,b.a.createElement(y.a,{t:r,i18nKey:"entities.attachment.elcloud"},[b.a.createElement("span",{key:0,className:o.highlight})])))))},Kt=a(564),Gt=a(565),_t=a(567),qt=a(404),Jt=a(99),Yt=a.n(Jt),Zt=a(264),Xt=a(262),$t=function(e){var t=e.title,a=e.children,n=Object(Xt.a)(e,["title","children"]);return b.a.createElement(Ce.a,n,b.a.createElement(Ce.a,{border:0,textAlign:"left",p:1},b.a.createElement(je.a,{variant:"subtitle2",color:"textSecondary"},t)),b.a.createElement(Ce.a,{border:0,textAlign:"left"},a))},Qt=a(302),ea=a(308),ta=Object(Oe.a)((function(e){return{formControl:{backgroundColor:"#ffffff","& div":{height:"56px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.primary},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},highlight:{color:["#efb868","!important"]}}})),aa=function(e){var t=e.name,a=e.options,n=e.emptyOption,r=e.initialValue,o=e.highlightKey,i=e.disabledKey,c=e.onChange,l=e.disabled,s=e.register,u=e.dataTestId,d=Object(f.useState)(null!==r&&void 0!==r?r:""),m=Object(P.a)(d,2),p=m[0],g=m[1];Object(f.useEffect)((function(){r&&g(r)}),[r]);var h=ta();return b.a.createElement(Qt.a,{variant:"outlined",className:h.formControl,fullWidth:!0},b.a.createElement(ea.a,{disabled:l,native:!0,inputRef:s,value:p,onChange:function(e){e.target.value&&String(e.target.value)!==String(p)&&(g(e.target.value),c&&c(e.target.value))},name:t,inputProps:{className:p===o?h.highlight:null,"data-testid":u}},n?b.a.createElement("option",{value:"",disabled:!0},n):null,a.map((function(e){return b.a.createElement("option",{key:e.id,value:e.id,disabled:i===e.id,className:e.id===o?h.highlight:null},e.value)}))))};aa.defaultProps={initialValue:"",emptyOption:void 0,highlightKey:"",disabledKey:void 0,onChange:void 0,disabled:!1,register:function(){}};var na=aa,ra=a(549),oa=a(304),ia=function(e){var t,a=e.register,n=e.errors,r=e.name,o=e.placeholder,i=e.watch,c=e.debug,l=e.showCountCaracthers,s=e.countCaracthers,u=e.multiline,d=e.rows,m=e.rowsMax,p=e.initialValue,g=e.setValue,h=e.cssClass,v=e.type;return c&&console.log("watch",i(r)),Object(f.useEffect)((function(){p&&g&&g(r,p)}),[p,g,r]),b.a.createElement(Qt.a,{variant:"outlined",fullWidth:!0,error:!Object(le.isEmpty)(n[r])},b.a.createElement(Ce.a,{position:"relative",width:1},b.a.createElement(ra.a,{type:v,fullWidth:!0,id:"component-".concat(r),placeholder:o,inputRef:a,name:r,multiline:u,rows:d,rowsMax:m,className:h}),l?b.a.createElement(Ce.a,{position:"absolute",bottom:0,right:"10px"},b.a.createElement(je.a,{variant:"caption",color:"textSecondary"},i(r)?i(r).length:0," / ",s)):null),b.a.createElement(oa.a,{id:"component-".concat(r,"-error-text")},null===(t=n[r])||void 0===t?void 0:t.message))};ia.defaultProps={debug:!1,multiline:!1,showCountCaracthers:!1,countCaracthers:0,rows:2,rowsMax:4,initialValue:"",cssClass:"",type:"text"};var ca=ia,la=a(67),sa=a.n(la),ua=Object(Oe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:450,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:sa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:sa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},adhocItemsFound:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:".5rem",paddingLeft:"1rem",margin:".3rem",color:"#5a6470"},boxAdhocItemsFound:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between","& .Mui-checked":{color:"#b68902"}},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},uppercase:{"& input":{textTransform:"uppercase"}}}})),da=function(e){return b.a.createElement(Yt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(ke.a,e))},ma=function(e){var t=e.onClose,a=e.open,n=e.referenceId,r=e.referenceType,o=(new Date).getFullYear(),i=ua(),c=Object(y.c)().t,s=Object(f.useState)(!0),u=Object(P.a)(s,2),d=u[0],m=u[1],p=Ve(),g=p.searchAdhocAttachment,h=p.postAdhocAttachment,v=p.downloadAdhocAttachment,E=Object(f.useState)(null),O=Object(P.a)(E,2),x=O[0],k=O[1],C=Object(f.useState)(new Set),j=Object(P.a)(C,2),w=j[0],A=j[1],S=Object(f.useState)(!0),T=Object(P.a)(S,2),N=T[0],I=T[1],D=Object(Zt.a)({mode:"all"}),R=D.register,U=D.handleSubmit,z=D.errors,F=D.setValue,L=D.watch,W=D.formState,H=function(){k(null),A(new Set),I(!0),t()},V=function(){var e=Object(B.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Array.from(w).forEach((function(e){return t.push(x[e])})),e.next=4,h(t,r,n);case 4:H();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(B.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),!W.isSubmitting){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,g(Object(l.a)(Object(l.a)({},t),{},{registry:null===(n=String(t.registry))||void 0===n?void 0:n.toUpperCase()}));case 6:r=e.sent,k(r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){if(!Object(le.isEmpty)(L())){var e=Object.keys(L()).filter((function(e){return""===L(e)}));m(0!==e.length)}}),[L]);var G=Object(f.useCallback)((function(){return Array(o-bt.ADHOC_MIN_YEAR+1).fill().map((function(e,t){return bt.ADHOC_MIN_YEAR+t})).map((function(e){return{id:e,value:e}}))}),[o]),_=function(e,t){return b.a.createElement(Ce.a,{className:i.adhocItemsFound,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start",key:t+e.name},b.a.createElement(je.a,{title:"Scarica ".concat(e.name),component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return v(e.id,e.name,!0)}},e.signature),b.a.createElement(je.a,{variant:"body1",color:"textSecondary",title:"Scarica ".concat(e.name),style:{cursor:"pointer"},noWrap:!0,onClick:function(){return v(e.id,e.name,!0)}},e.name),b.a.createElement(Ce.a,{className:i.boxAdhocItemsFound},b.a.createElement(ct.a,{style:{marginRight:"1rem",cursor:"pointer"},onClick:function(){return v(e.id,e.name,!0)}}),b.a.createElement(qt.a,{onChange:function(e){return function(e,t){var a=w;t?a.add(e):a.delete(e),A(a),I(0===a.size)}(t,e.target.checked)}})))};return b.a.createElement(zt.a,{fullWidth:!0,maxWidth:"sm",onClose:H,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:da},b.a.createElement(Kt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:H},b.a.createElement("div",null,b.a.createElement(y.a,{t:c,i18nKey:"entities.attachment.dialog.attachment.titleDhoc"},[b.a.createElement("span",{key:0,className:i.highlight})])),b.a.createElement(tt.a,{"aria-label":"close",className:i.closeButton,onClick:H},b.a.createElement(It.a,null))),b.a.createElement(Gt.a,null,b.a.createElement("form",{onSubmit:U(K)},b.a.createElement(Ce.a,{className:i.boxEditor},b.a.createElement(we.a,{container:!0},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement($t,{title:c("entities.attachment.dialog.attachment.protocolDhOc")},b.a.createElement(ca,{type:"number",name:"protocol",placeholder:c("entities.attachment.dialog.attachment.protocolDhOcPlaceholder"),register:R({required:{value:!0,message:c("validation.required")}}),watch:L,setValue:F,errors:z}))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement($t,{title:c("entities.attachment.dialog.attachment.yearDhOc")},b.a.createElement(na,{register:R({required:{value:!0,message:c("validation.required")}}),name:"year",emptyOption:void 0,initialValue:o,options:G(),errors:z}))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement($t,{title:c("entities.attachment.dialog.attachment.registryDhOc"),className:i.uppercase},b.a.createElement(ca,{name:"registry",placeholder:c("entities.attachment.dialog.attachment.registryDhOcPlaceholder"),register:R({required:{value:!0,message:c("validation.required")}}),initialValue:bt.ADHOC_DEFAULT_REGISTRY,watch:L,setValue:F,errors:z}))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{textAlign:"center"},b.a.createElement(Ae.a,{type:"submit",variant:"outlined",className:i.buttonSearch,disabled:d},c("entities.attachment.dialog.attachment.searchDhOC"))))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{textAlign:"center"},null===x||void 0===x?b.a.createElement(b.a.Fragment,null):0===x.length?b.a.createElement(Ce.a,{className:i.boxAttachment},b.a.createElement(je.a,{variant:"h6",component:"div",color:"textSecondary"},c("entities.attachment.dialog.attachment.notFound"))):x.map((function(e,t){return _(e,t)}))))))),b.a.createElement(_t.a,{className:i.dialogActions},b.a.createElement(Ae.a,{disabled:N,onClick:V,className:i.button},c("entities.attachment.dialog.attachment.add"))))};ma.defaultProps={referenceType:null,referenceId:null};var pa=ma,fa=a(442),ba=Object(Oe.a)((function(e){return{dropZone:{"& .MuiDropzoneArea-root":{minHeight:160,position:"relative"},"& .MuiDropzoneArea-icon":{color:sa.a[300]}},dropZoneArea:{"&.MuiDropzoneArea-root":{minHeight:160,position:"relative",background:"lightgrey",color:sa.a[300],cursor:"default"},"& .MuiDropzoneArea-icon":{color:sa.a[300]}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:sa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:sa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},previewChip:{minWidth:160,maxWidth:210}}})),ga=function(e){return b.a.createElement(Yt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(ke.a,e))},ha=function(e){var t=e.onClose,a=e.open,n=e.referenceId,r=e.referenceType,o=ba(),i=Object(y.c)().t,c=Ve(),l=c.attachments,s=c.postNextcloudAttachment,u=Object(f.useState)(!0),d=Object(P.a)(u,2),m=d[0],p=d[1],g=Object(Zt.a)({mode:"all"}),h=g.register,v=g.errors,E=g.setValue,O=g.watch;Object(f.useEffect)((function(){Object(le.isEmpty)(O())||(0===Object.keys(O()).filter((function(e){return""===O(e)})).length?p(!1):p(!0))}),[O]);var x=function(){var e=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(Object.values(O())[0],r,n);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement(zt.a,{fullWidth:!0,maxWidth:"sm",onClose:t,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:ga},b.a.createElement(Kt.a,{className:o.dialogTitle,id:"form-dialog-title",onClose:t},b.a.createElement("div",null,b.a.createElement(y.a,{t:i,i18nKey:"entities.attachment.dialog.attachment.titleElCloud"},[b.a.createElement("span",{key:0,className:o.highlight})])),b.a.createElement(tt.a,{"aria-label":"close",className:o.closeButton,onClick:t},b.a.createElement(It.a,null))),b.a.createElement(Gt.a,null,b.a.createElement(fa.a,{dropzoneClass:o.dropZoneArea,dialogProps:{"aria-labelledby":"dialog-elcloud",disableEnforceFocus:!0,PaperComponent:ga,className:o.dropZoneArea},dropzoneProps:{disabled:!0},maxWidth:"sm",fileObjects:l,cancelButtonText:"",submitButtonText:"",dropzoneText:i("entities.attachment.dialog.attachment.dragAndDrop"),maxFileSize:5e6,filesLimit:1,open:a,onAdd:function(e){t(e)},onClose:t,showPreviews:!1,showFileNamesInPreview:!1,showAlerts:!1,showFileNames:!1,showPreviewsInDropzone:!1}),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement($t,{title:i("entities.attachment.dialog.attachment.linkNextcloud")},b.a.createElement(ca,{name:"nextcloudLink",placeholder:i("entities.attachment.dialog.attachment.linkNextcloudPlaceholder"),register:h({required:{value:!0,message:i("validation.required")}}),watch:O,setValue:E,errors:v})))),b.a.createElement(_t.a,{className:o.dialogActions},b.a.createElement(Ae.a,{className:o.button,disabled:m,onClick:x},i("entities.attachment.dialog.attachment.add"))))};ha.defaultProps={referenceType:null,referenceId:null};var va=ha,Ea=Object(Oe.a)((function(e){return{boxContainer:{border:0,borderStyle:"solid",borderColor:"red",width:"100%",textAlign:"left"},button:{color:"#586473"},boxButtons:{border:"0px solid red",margin:[[e.spacing(1),0]],display:"flex",alignItems:"center",justifyContent:"space-around",padding:e.spacing(1)},buttonLink:{backgroundColor:"#b68902","& span":{color:"#fff",textTransform:"none",padding:e.spacing(1)},"&:hover":{backgroundColor:"#b68902"}}}})),Oa=function(e){var t,a,n=e.referenceId,r=e.referenceType,o=e.domain,i=Ea(),c=Object(y.c)().t,l=Object(f.useState)(!1),s=Object(P.a)(l,2),u=s[0],d=s[1],m=Object(f.useState)(!1),p=Object(P.a)(m,2),g=p[0],h=p[1],v=Object(f.useState)(!1),E=Object(P.a)(v,2),O=E[0],x=E[1],k=Ve(),C=k.fetchAttachments,j=k.attachments,w=k.EINET_DIRECTORY,A=k.allClouds,S=k.error,T=k.message,N=k.clearError,I=k.clearMessage,D=be().users,R=he().edoResponsible;Object(f.useEffect)((function(){n&&r&&C(n,r)}),[n,r]);var U,z,F,M,B,L,W,H,V=null===(t=j.filter((function(e){return e.file.cloudType===A.NEXTCLOUD})))||void 0===t?void 0:t.sort((function(e,t){return e.id>t.id?-1:1})),K=null===(a=j.filter((function(e){return e.file.cloudType===A.ADHOC})))||void 0===a?void 0:a.sort((function(e,t){return e.id>t.id?-1:1}));D&&(U=2===(null===(z=D[R])||void 0===z||null===(F=z.edo)||void 0===F||null===(M=F.parentEdo)||void 0===M?void 0:M.type.id)?null===(B=D[R])||void 0===B||null===(L=B.edo)||void 0===L||null===(W=L.parentEdo)||void 0===W||null===(H=W.edoInfos[0])||void 0===H?void 0:H.value:null);return b.a.createElement(b.a.Fragment,null,null===T&&null===S?null:b.a.createElement(Ut,{message:T||S,onClose:function(){return T?I():N()},status:T?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(Ce.a,{className:i.boxContainer},b.a.createElement(Ce.a,{textAlign:"center"},b.a.createElement(Ae.a,{size:"large",variant:"contained",disableRipple:!0,className:i.button,startIcon:b.a.createElement($e.a,null),onClick:function(){return d(!0)}},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},c("ACTION"===o?"entities.attachment.addAttachmentAction":"entities.attachment.addAttachment")))),b.a.createElement(Ce.a,{className:i.boxButtons},U?b.a.createElement(Ae.a,{disableRipple:!0,className:i.buttonLink,href:"".concat(w).concat(U),target:"_blank"},b.a.createElement(je.a,{variant:"body2"},c("entities.attachment.folderDepartment"))):b.a.createElement(je.a,{variant:"body2",color:"error"},c("entities.attachment.attachmentDirNotPresent",{dir:c("entities.attachment.folderDepartment")}))),b.a.createElement(Ce.a,{textAlign:"left",marginTop:2},b.a.createElement(Ce.a,{p:1},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},c("entities.attachment.einetAttachments",{count:V.length}))),V.map((function(e){return b.a.createElement(Ce.a,{key:e.id},b.a.createElement(Ot,{id:e.id,code:e.code,filename:e.file.name,signature:e.file.signature,cloudType:e.file.cloudType,allClouds:A,referenceId:n,referenceType:r}))}))),b.a.createElement(Ce.a,{textAlign:"left",marginTop:2},b.a.createElement(Ce.a,{p:1},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},c("entities.attachment.adhocAttachments",{count:K.length}))),K.map((function(e){return b.a.createElement(Ce.a,{key:e.id},b.a.createElement(Ot,{id:e.id,code:e.code,filename:e.file.name,signature:e.file.signature,cloudType:e.file.cloudType,allClouds:A,referenceId:n,referenceType:r}))}))),b.a.createElement(Vt,{onClose:function(e){d(!u),"dhoc"===e?h(!0):"elcloud"===e&&x(!0)},open:u}),b.a.createElement(pa,{onClose:function(){return h(!1)},open:g,referenceId:n,referenceType:r}),b.a.createElement(va,{onClose:function(){return x(!1)},open:O,referenceId:n,referenceType:r})))};Oa.defaultProps={referenceType:null,referenceId:null,domain:et.a.string};var ya=Oa,xa=Object(f.createContext)([{},function(){}]),ka=function(){var e=Object(f.useContext)(xa),t=Object(P.a)(e,2),a=t[0],n=t[1],r=U().setLoading,o=Object(y.c)().t,i=a.serviceUrl,c=function(){var e=Object(B.a)(M.a.mark((function e(t,r){var c,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"TASK"!==r){e.next=7;break}return e.next=4,$(i,t);case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,ee(i,t);case 9:c=e.sent;case 10:s=c.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:s})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(B.a)(M.a.mark((function e(t,c,s){var u,d,m;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),"TASK"!==c){e.next=8;break}return e.next=5,Q(i,t,s.description);case 5:u=e.sent,e.next=11;break;case 8:return e.next=10,te(i,t,s.description);case 10:u=e.sent;case 11:if(!u.payload.id){e.next=23;break}if("TASK"!==c){e.next=18;break}return e.next=15,$(i,t);case 15:d=e.sent,e.next=21;break;case 18:return e.next=20,ee(i,t);case 20:d=e.sent;case 21:m=d.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:m,message:o("message.noteCreated",{id:u.payload.id})})}));case 23:return e.abrupt("return",u.payload.id);case 26:e.prev=26,e.t0=e.catch(0),console.log("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 30:return e.prev=30,r(!1),e.finish(30);case 33:return e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,null,[[0,26,30,33]])})));return function(t,a,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(B.a)(M.a.mark((function e(t,c,s){var u,d;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,ae(i,s);case 4:if("TASK"!==c){e.next=10;break}return e.next=7,$(i,t);case 7:u=e.sent,e.next=13;break;case 10:return e.next=12,ee(i,t);case 12:u=e.sent;case 13:return d=u.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:d,message:o("message.noteDeleted",{id:s})})})),e.abrupt("return",null);case 18:e.prev=18,e.t0=e.catch(0),console.log("errore",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null}));case 22:return e.prev=22,r(!1),e.finish(22);case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[0,18,22,25]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{notes:a.notes,fetchNotes:c,postNote:s,deleteNote:u,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},Ca=a(443),ja=a(441),wa=a(421),Aa=a.n(wa),Sa=a(588),Ta=a(422),Na=Object(Oe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),Ia=function(e){var t=e.content,a=e.name,n=e.dateNote,r=e.avatar,o=Na();return b.a.createElement(Ce.a,null,b.a.createElement(Ce.a,{className:o.borderBox,textAlign:"left",p:2},b.a.createElement(je.a,{variant:"body2",color:"textPrimary",component:"div"},b.a.createElement(Ta.a,{content:t}))),b.a.createElement(Ce.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ce.a,{p:1,marginRight:2},b.a.createElement(Sa.a,{alt:"",src:r})),b.a.createElement(Ce.a,null,b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},n),b.a.createElement(je.a,{variant:"body1",color:"textPrimary"},a))))},Da=a(28),Pa=a(544),Ra=a(424),Ua=a.n(Ra),za=Object(Oe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:500,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"left",textTransform:"capitalize"},dialogContent:{overflow:"hidden","& .MuiDialogContent-root":{overflow:"hidden"}},boxEditor:{position:"relative",minHeight:400,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{border:"0 solid red",padding:0,position:"relative",top:-90,paddingRight:10},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Fa=function(e){return b.a.createElement(Yt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(ke.a,e))},Ma={mode:"classic",defaultTag:"div",height:"auto",minHeight:"100px",maxHeight:"250px",showPathLabel:!1,toolbarContainer:"#custom_toolbar",rtl:!1,charCounter:!0,charCounterType:"char",maxCharCount:"500",imageResizing:!1,imageHeightShow:!1,imageFileInput:!1,imageUrlInput:!1,videoResizing:!1,videoHeightShow:!1,videoFileInput:!1,videoUrlInput:!1,videoRatioShow:!1,audioUrlInput:!1,tabDisable:!1,shortcutsHint:!1,buttonList:[["bold","underline","italic","align","link"]]},Ba=function(e){var t=e.open,a=e.handleClose,n=e.handleAddNote,r=Object(y.c)().t,o=Object(Da.a)(),i=(Object(Pa.a)(o.breakpoints.down("sm")),za()),c=Object(f.useRef)(null),l=Object(f.useState)(""),s=Object(P.a)(l,2),u=s[0],d=s[1];return b.a.createElement(zt.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:function(){return a()},PaperComponent:Fa,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:i.dialog},b.a.createElement(Kt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:function(){return a()}},b.a.createElement("div",null,r("entities.dialog.note.title")),b.a.createElement(tt.a,{"aria-label":"close",className:i.closeButton,onClick:function(){return a()}},b.a.createElement(It.a,null))),b.a.createElement(Gt.a,{className:i.dialogContent},b.a.createElement(Ce.a,{className:i.boxEditor},b.a.createElement(Ua.a,{height:400,name:"nota",ref:c,placeholder:r("entities.dialog.note.placeholder"),lang:"it",autoFocus:!0,setOptions:Ma,onChange:function(e){d(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}}))),b.a.createElement(_t.a,{className:i.dialogActions},b.a.createElement(Ae.a,{onClick:function(){if(n){var e=u.replaceAll("<p>","<div>").replaceAll("</p>","</div>");n(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}a()},className:i.button},r("entities.dialog.note.buttonPublish"))))},La=Object(Oe.a)({boxContainer:{border:0,borderStyle:"solid",borderColor:"red",width:"100%",textAlign:"left"},button:{color:"#586473","&.Mui-disabled":{cursor:"not-allowed",pointerEvents:"auto"}}}),Wa=function(e){var t=e.referenceId,a=e.referenceType,n=e.domain,r=be().users,o=ka(),i=o.notes,c=o.fetchNotes,l=o.deleteNote,s=o.postNote,u=o.message,d=o.error,m=o.clearMessage,p=o.clearError,g=he().metadata,h=La(),v=Object(y.c)().t,E=Object(f.useState)(!1),O=Object(P.a)(E,2),x=O[0],k=O[1],C=function(){k((function(e){return!e}))};return Object(f.useEffect)((function(){t&&a&&c(t,a)}),[t,a]),r?b.a.createElement(b.a.Fragment,null,null===u&&null===d?null:b.a.createElement(Ut,{message:u||d,onClose:function(){return u?m():p()},status:u?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(Ce.a,{className:h.boxContainer},b.a.createElement(Ba,{open:x,handleClose:C,handleAddNote:function(e){var n={id:i.length+1,description:e};s(t,a,n)}}),b.a.createElement(Ce.a,{textAlign:"center"},b.a.createElement(Ae.a,{size:"large",variant:"contained",className:h.button,startIcon:b.a.createElement($e.a,null),disableRipple:!0,onClick:C},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},v("ACTION"===n?"entities.attachment.addNoteAction":"entities.attachment.addNote")))),i.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,n){var o,c,s;return b.a.createElement(Ce.a,{key:e.id,textAlign:"left",marginTop:2},b.a.createElement(Ce.a,{p:1,display:"flex",alignItems:"center",justifyContent:"space-between"},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},v("entities.attachment.note",{from:n+1,to:i.length})),g.canRemoveNotes?b.a.createElement(tt.a,{"aria-label":"delete",onClick:function(){return l(t,a,e.id)},disableRipple:!0},b.a.createElement(ot.a,null)):null),b.a.createElement(Ia,{content:e.description,dateNote:Object(Ca.a)(new Date(null!==(o=null===e||void 0===e?void 0:e.createdDate)&&void 0!==o?o:new Date),"dd MMMM yyyy: kk:mm:ss",{locale:ja.a}),name:r[e.createdBy]?"".concat(null===(c=r[e.createdBy])||void 0===c?void 0:c.firstname," ").concat(null===(s=r[e.createdBy])||void 0===s?void 0:s.lastname):"",avatar:Aa.a}))})))):null};Wa.defaultProps={referenceType:null,referenceId:null,domain:null};var Ha=Wa,Va=Object(Oe.a)((function(e){return{root:{width:"100%",marginBottom:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},accordion:{border:1,borderStyle:"solid",borderColor:sa.a[400],borderRadius:4},accordionSummary:{padding:0,paddingRight:20}}})),Ka=function(e){var t=e.referenceId,a=e.referenceType,n=e.referenceTypeNote,r=e.domain,o=Object(f.useState)({panel1:!1,panel2:!1}),i=Object(P.a)(o,2),c=i[0],s=i[1],u=Object(y.c)().t,d=Ve().attachments,m=ka().notes,p=function(e){return function(){s((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},e,!t[e]))}))}},g=Va();return b.a.createElement("div",{className:g.root},b.a.createElement(_e.a,{expanded:c.panel1,onChange:p("panel1"),className:g.accordion},b.a.createElement(Je.a,{expandIcon:b.a.createElement(Ze.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",className:g.accordionSummary},b.a.createElement(Ce.a,{className:g.root,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ce.a,null,b.a.createElement(je.a,{variant:"body1",color:"textPrimary"},u("entities.action.attachments")),b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},u("entities.action.attachmentsPresent",{count:d.length}))),b.a.createElement(Ce.a,{p:1,onClick:function(e){e.stopPropagation(),p("panel1")()}},b.a.createElement(je.a,{className:g.heading,color:"textSecondary"},c.panel1?u("entities.action.close"):u("entities.action.expand"))))),b.a.createElement(qe.a,null,b.a.createElement(ya,{referenceId:t,referenceType:a,attachments:d,domain:r}))),b.a.createElement(_e.a,{expanded:c.panel2,onChange:p("panel2"),className:g.accordion},b.a.createElement(Je.a,{expandIcon:b.a.createElement(Ze.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",className:g.accordionSummary},b.a.createElement(Ce.a,{className:g.root,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ce.a,null,b.a.createElement(je.a,{variant:"body1",color:"textPrimary"},u("entities.action.note")),b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},u("entities.action.notePresent",{count:m.length}))),b.a.createElement(Ce.a,{p:1,onClick:function(e){e.stopPropagation(),p("panel2")()}},b.a.createElement(je.a,{className:g.heading,color:"textSecondary"},c.panel2?u("entities.action.close"):u("entities.action.expand"))))),b.a.createElement(qe.a,null,b.a.createElement(Ha,{referenceId:t,referenceType:n,domain:r}))))};Ka.defaultProps={referenceType:null,referenceId:null,domain:null};var Ga=Ka,_a=a(573),qa=[{id:"IN_PROGRESS",value:"In corso"},{id:"COMPLETED",value:"Completata"},{id:"CANCELLED",value:"Annullata"},{id:"CREATED",value:"Creato"}],Ja=[{id:"CREATED",value:"Creato"},{id:"COMPLETED",value:"Completata"}],Ya=Object(Oe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),Za=function(e){var t=e.title,a=e.content,n=e.textTransform,r=Ya();return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ce.a,{textAlign:"left"},b.a.createElement(je.a,{variant:"body1",color:"textSecondary"},t)),b.a.createElement(Ce.a,{className:r.borderBox,textAlign:"left",p:2,style:{textTransform:n}},b.a.createElement(je.a,{variant:"body2",color:"textPrimary"},a)))};Za.defaultProps={textTransform:"none",content:""};var Xa=Za,$a=a(426),Qa=a.n($a),en=Object(Oe.a)((function(e){return{borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4}}})),tn=a(198),an=a(425),nn=a.n(an);function rn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function on(e){var t=Object(y.c)().t,a=rn();return b.a.createElement("span",null,b.a.createElement(nn.a,{alt:"",style:{color:"red"},"data-tip":!0,"data-for":a}),b.a.createElement(tn.a,{id:a,type:"error",effect:"solid",place:e.positionPlacement},b.a.createElement("span",null,t(e.popupTextKey))))}on.defaultProps={positionPlacement:"bottom",popupTextKey:"message.pendingActions"};var cn=on,ln=a(117),sn=a.n(ln),un=a(158),dn=a.n(un),mn=function(e){var t=e.avatar,a=e.title,n=e.name,r=e.role,o=e.cta,i=e.pendingActions,c=e.raciRole,l=Object(y.c)().t,s=he().metadata,u=b.a.createElement(cn,{popupTextKey:"message.pendingAck",positionPlacement:"right"}),d=b.a.createElement(cn,{popupTextKey:"message.pendingComment",positionPlacement:"right"});var m=en();return b.a.createElement(b.a.Fragment,null,b.a.createElement(Ce.a,{textAlign:"left"},b.a.createElement(je.a,{variant:"body1",color:"textSecondary"},a," ",function(){if(""!==n&&i){if("consulted"===c&&("both"===i||"comment"===i))return d;if("informed"===c&&("both"===i||"ack"===i))return u}}())),b.a.createElement(Ce.a,{className:m.borderBox,textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ce.a,{display:"flex",flexWrap:"nowrap",alignItems:"center",width:1},b.a.createElement(Ce.a,{p:1,marginRight:2},b.a.createElement(Sa.a,{alt:n,src:t})),b.a.createElement(Ce.a,null,b.a.createElement(je.a,{variant:"body1",color:"textPrimary"},n),b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},r))),""===n||"informed"!==c||i&&"comment"!==i?"":function(){var e=rn();return b.a.createElement("span",null,b.a.createElement(sn.a,{htmlColor:"#4f8b46","data-tip":!0,"data-for":e}),b.a.createElement(tn.a,{id:e,type:"success",effect:"solid",place:"left",backgroundColor:"#4f8b46"},b.a.createElement("span",null,l("tooltip.ackPresent"))))}(),""===n||"consulted"!==c||i&&"ack"!==i?"":function(){var e=rn();return b.a.createElement("span",null,b.a.createElement(dn.a,{htmlColor:"#4f8b46","data-tip":!0,"data-for":e}),b.a.createElement(tn.a,{id:e,type:"success",effect:"solid",place:"left",backgroundColor:"#4f8b46"},b.a.createElement("span",null,l("tooltip.commentPresent"))))}(),s.canChangeTaskRoles?b.a.createElement(Ce.a,null,b.a.createElement(tt.a,{"data-testid":a,"aria-label":"change",onClick:o,disableRipple:!0},b.a.createElement(Qa.a,null))):null))};mn.defaultProps={cta:function(){}};var pn=mn,fn=a(546),bn=Object(Wt.a)((function(e){return{paper:{width:"180px",padding:e.spacing(1),backgroundColor:"#2d2b1f",textAlign:"left","& .MuiTypography-root":{color:"#fff"}},popper:{zIndex:1,'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.background.paper," transparent transparent transparent")}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}})),gn=function(e){var t=e.title,a=e.children,n=e.contentPopper,r=e.icon,o=Object(Xt.a)(e,["title","children","contentPopper","icon"]),i=b.a.useState(!1),c=Object(P.a)(i,2),l=c[0],s=c[1],u=bn(),d=Object(f.useRef)(null),m=Object(f.useState)(null),p=Object(P.a)(m,2),g=p[0],h=p[1],v=b.a.createElement(Ce.a,{onClick:function(){s((function(e){return!e}))},ref:d,height:"20px",marginLeft:1,marginRight:1},b.a.createElement(Tt.a,{fontSize:"small"}));return b.a.createElement(Ce.a,o,b.a.createElement(fn.a,{open:l,anchorEl:d.current,className:u.popper,placement:"top",disablePortal:!0,modifiers:{flip:{enabled:!0},arrow:{enabled:!0,element:g},preventOverflow:{enabled:"true",boundariesElement:"scrollParent"}}},b.a.createElement("span",{className:u.arrow,ref:h}),b.a.createElement(ke.a,{className:u.paper},b.a.createElement(je.a,{variant:"body1"},n.title),b.a.createElement(je.a,{variant:"body2"}," ",n.description))),b.a.createElement(Ce.a,{border:0,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start"},"left"===r?v:null,b.a.createElement(Ce.a,{marginRight:2},b.a.createElement(je.a,{variant:"body1",color:"textSecondary"},t)),"right"===r?v:null),b.a.createElement(Ce.a,{border:0,textAlign:"left"},a))};gn.defaultProps={children:null,icon:"right"};var hn=gn,vn=Object(Oe.a)((function(e){return{gridContainer:{border:0,padding:e.spacing(2),borderStyle:"solid",borderColor:"red"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}},highlight:{color:"#efb868",fontWeight:600},boxInfoSubActionPendingAction:{backgroundColor:"#f97b71",padding:e.spacing(2),"& .MuiSvgIcon-root":{backgroundColor:"#fff",borderRadius:50,color:"#aeb6c2 "}},buttonSendAck:{textTransform:"none",height:48,backgroundColor:"#4f8b46",color:"#fff","&:hover":{backgroundColor:"#4f8b46",color:"#fff"}}}})),En=a(572),On=a(190),yn=a.n(On),xn=Object(Oe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:yn.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),kn=function(e){return b.a.createElement(Yt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(ke.a,e))},Cn=function(e){var t=e.open,a=e.title,n=e.message,r=e.buttonCancelLabel,o=e.buttonConfirmLabel,i=e.onCancel,c=e.onConfirm,l=Object(y.c)().t,s=Object(Da.a)(),u=(Object(Pa.a)(s.breakpoints.down("sm")),xn());return b.a.createElement(zt.a,{"data-testid":"dialog-confirm",fullWidth:!0,maxWidth:"sm",open:t,onClose:i,PaperComponent:kn,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:u.dialog},b.a.createElement(Kt.a,{className:u.dialogTitle,id:"form-dialog-title",onClose:i},b.a.createElement("div",null,a||l("common.confirmOperationTitle"))),b.a.createElement(Gt.a,null,b.a.createElement(En.a,null,n||l("common.confirmOperationMessage"))),b.a.createElement(_t.a,{className:u.dialogActions},b.a.createElement(Ae.a,{onClick:i,className:u.buttonClose,"data-testid":"dialog-confirm-close-button"},r||l("common.cancel")),b.a.createElement(Ae.a,{onClick:c,className:u.button,"data-testid":"dialog-user-confirm-button"},o||l("common.confirm"))))};Cn.defaultProps={open:!1,title:"",message:"",buttonCancelLabel:"",buttonConfirmLabel:""};var jn=Cn,wn=function(e){var t=e.type,a=e.action,n=e.refId,r=be(),o=r.logged,i=r.users,c=Re(),l=c.updateSubActionStatus,s=c.updateActionStatus,u=c.updateActionAndSubactionAck,d=Ge(),m=Object(y.c)().t,p=Object(f.useState)(!1),g=Object(P.a)(p,2),h=g[0],v=g[1],E=Object(f.useState)({value:null}),O=Object(P.a)(E,2),x=O[0],k=O[1],C=a.id,j=a.code,w=a.title,A=a.endDate,S=a.description,T=a.canComplete,N=a.status,I=vn();return b.a.createElement(b.a.Fragment,null,h?b.a.createElement(jn,{open:h,message:m("action"===t?"entities.action.sendAckMsg":"entities.subaction.sendAckMsg"),onCancel:function(){k({value:null}),v(!1)},onConfirm:function(){x.value&&u(a.id,t),v(!1),k({value:null})}}):null,b.a.createElement(we.a,{container:!0,spacing:2,className:I.gridContainer},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:"".concat(m("action"===t?"entities.action.action":"entities.action.subaction")," - ").concat(n,"-").concat(j),content:w})),"action"!==t?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:m("entities.action.detail.description"),content:S})):null,b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(we.a,{container:!0,spacing:3},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,null,b.a.createElement(Xa,{title:m("entities.action.within"),content:A&&Object(Ca.a)(Object(_a.a)(A),"dd MMMM yyyy",{locale:ja.a}),textTransform:"capitalize"}))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:I.boxState},b.a.createElement(hn,{title:m("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:m,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:I.highlight})]),description:m("entities.action.popper.description")}},b.a.createElement(na,{name:"status",options:qa,initialValue:N||"",emptyOption:m("entities.action.noStatus"),highlightKey:qa[0].id,disabledKey:!1===T?qa[1].id:null,onChange:function(e){"action"===t?N!==e&&s(C,e):l(C,e)}})))))),"action"===t?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:m("entities.action.detail.description"),content:S})):null,"subAction"!==t||!0!==a.pendingAck&&!0!==a.pendingComment?"":b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:I.boxInfoSubActionPendingAction},b.a.createElement(hn,{title:m("entities.subaction.subActionActionPending"),contentPopper:{title:"",description:m("entities.subaction.popper.pendingAction")},icon:"left"}))),o&&a.informed&&o.toUpperCase()===a.informed.toUpperCase()&&a.pendingAck?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ae.a,{variant:"contained",size:"large",className:I.buttonSendAck,onClick:function(){k({value:!0}),v(!0)},endIcon:b.a.createElement(sn.a,null),title:m("button.ack.title")},m("button.ack.content"))):null,o&&a.consulted&&o.toUpperCase()===a.consulted.toUpperCase()&&a.pendingComment?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ae.a,{variant:"contained",size:"large",className:I.buttonSendAck,onClick:function(){console.log("write and send comment")},endIcon:b.a.createElement(dn.a,null),title:m("button.comment.title")},m("button.comment.content"))):null,i?Array.from(se).map((function(e){var n,r,o;return b.a.createElement(we.a,{item:!0,xs:12,key:e},b.a.createElement(pn,{title:m("entities.info.".concat(e)),name:i[a[e]]?"".concat(null===(n=i[a[e]])||void 0===n?void 0:n.firstname," ").concat(null===(r=i[a[e]])||void 0===r?void 0:r.lastname):"",role:Object(le.get)(i["".concat(a[e])],"role",m("entities.info.empty")),avatar:"".concat(a[e],".jpg"),cta:function(){return n=e,r=i[a[e]],void d.setAllState({type:t,openDialog:!0,userSelected:r,userRole:n});var n,r},raciRole:e,pendingActions:(o=a,o.pendingAck&&o.pendingComment?"both":o.pendingAck?"ack":o.pendingComment?"comment":void 0)}))})):null))},An=a(191),Sn=a.n(An),Tn=a(159),Nn=a.n(Tn),In=a(429),Dn=a.n(In),Pn=a(436),Rn=a.n(Pn),Un=a(435),zn=a.n(Un),Fn=a(312),Mn=a.n(Fn),Bn=a(311),Ln=a.n(Bn),Wn=a(430),Hn=a.n(Wn),Vn=a(432),Kn=a.n(Vn),Gn=a(433),_n=a.n(Gn),qn=a(434),Jn=a.n(qn),Yn=a(437),Zn=a.n(Yn),Xn=a(431),$n=a.n(Xn),Qn=a(258),er=a.n(Qn),tr=a(438),ar=a.n(tr),nr={Add:Object(f.forwardRef)((function(e,t){return b.a.createElement(Dn.a,Object.assign({},e,{ref:t}))})),Check:Object(f.forwardRef)((function(e,t){return b.a.createElement(sn.a,Object.assign({},e,{ref:t}))})),Clear:Object(f.forwardRef)((function(e,t){return b.a.createElement(Ln.a,Object.assign({},e,{ref:t}))})),Delete:Object(f.forwardRef)((function(e,t){return b.a.createElement(Hn.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(f.forwardRef)((function(e,t){return b.a.createElement(Mn.a,Object.assign({},e,{ref:t}))})),Edit:Object(f.forwardRef)((function(e,t){return b.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Export:Object(f.forwardRef)((function(e,t){return b.a.createElement($n.a,Object.assign({},e,{ref:t}))})),Filter:Object(f.forwardRef)((function(e,t){return b.a.createElement(Kn.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(_n.a,Object.assign({},e,{ref:t}))})),LastPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(Jn.a,Object.assign({},e,{ref:t}))})),NextPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(Mn.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(f.forwardRef)((function(e,t){return b.a.createElement(zn.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(f.forwardRef)((function(e,t){return b.a.createElement(Ln.a,Object.assign({},e,{ref:t}))})),Search:Object(f.forwardRef)((function(e,t){return b.a.createElement(er.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(f.forwardRef)((function(e,t){return b.a.createElement(Rn.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(f.forwardRef)((function(e,t){return b.a.createElement(Zn.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(f.forwardRef)((function(e,t){return b.a.createElement(ar.a,Object.assign({},e,{ref:t}))}))},rr=a(447),or=a(393),ir=a(586),cr=a(581),lr=a(579),sr=a(580),ur=a(439),dr={payload:[{id:1,firstname:"Fabrizio",lastname:"Trollo",degree:"Ten. Col.",active:!1,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"aaa1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:2,firstname:"Gabriele",lastname:"Cappio",degree:"Serg. Magg.",active:!0,edo:{id:2,name:"Reparto 1",headUser:1,defaultUser:1,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aaa4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:3,firstname:"Antonio",lastname:"Neri",degree:"Col.",active:!0,edo:{id:3,name:"Ufficio 1",headUser:1,defaultUser:1,type:{id:3,name:"Ufficio"},parentId:2,active:!0},fiscalCode:"bbb1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:4,firstname:"Gianluca",lastname:"Svedesi",degree:"Ten. Col.",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"bbb4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:5,firstname:"Christian",lastname:"Torquato",degree:"Serg. Magg.",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"user",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:7,firstname:"Carlo",lastname:"Bianchi",degree:"Ten. Col.",active:!1,edo:null,fiscalCode:"ddd1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:8,firstname:"Marco",lastname:"Rossi",degree:"Cap.",active:!1,edo:null,fiscalCode:"ddd4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:9,firstname:"Davide",lastname:"Madonna",degree:"Cap.",active:!1,edo:null,fiscalCode:"eee1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:10,firstname:"Pasquale",lastname:"Calogero",degree:"Mar.",active:!0,edo:null,fiscalCode:"eee4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:11,firstname:"Mario",lastname:"Bianchi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"user",entity:null,entityDenomination:null,email:"mario.bianchi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:12,firstname:"Patrizio",lastname:"Rossi",degree:"Maresciallo",active:!0,edo:{id:243,name:"Ufficio",shortName:null,headUser:18,defaultUser:null,type:{id:3,name:"Ufficio"},parentId:242,active:!0,edoInfos:[],parentEdo:{id:242,name:"Reparto",shortName:null,headUser:18,defaultUser:null,type:{id:2,name:"Reparto"},parentId:241,active:!0,edoInfos:[],parentEdo:{id:241,name:"Vertice 5",shortName:null,headUser:null,defaultUser:null,type:{id:1,name:"Vertice"},parentId:null,active:!0,edoInfos:[],parentEdo:null}}},fiscalCode:"admin",entity:null,entityDenomination:null,email:"patrizio.rossi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null,defaultEdos:null},{id:13,firstname:"Massimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:14,firstname:"Patrizio",lastname:"Antonucci",degree:"Maresciallo",active:!0,edo:{id:7,name:"Sezione 2",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:6,active:!0},fiscalCode:"pantonucci",entity:null,entityDenomination:null,email:"patrizio.antonucci@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:15,firstname:"Alessandro",lastname:"Iello",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aiello",entity:null,entityDenomination:null,email:"alessandro.aiello@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:16,firstname:"Andrea",lastname:"Melia",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"amelia",entity:null,entityDenomination:null,email:"andrea.amelia@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:17,firstname:"Carmine",lastname:"Armelini",degree:"Ten. Col.",active:!0,edo:{id:10,name:"Nucleo 3",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:7,active:!0},fiscalCode:"carmelini",entity:null,entityDenomination:null,email:"carmine.armelini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:18,firstname:"Carlo",lastname:"Otti",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"cotti",entity:null,entityDenomination:null,email:"carlo.cotti@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:19,firstname:"Paolo Alberto",lastname:"Giorgi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"grgplb66m01h501w",entity:null,entityDenomination:null,email:"paoloalberto.giorgi@esercito.difesa.it",armedForce:null,dateOfBirth:"1985-01-14",phone:"1-183-426-0757",mobilePhone:"1-302-819-5781"},{id:20,firstname:"Francesco",lastname:"Pino",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"pnifnc83l20f158q",entity:null,entityDenomination:null,email:"francesco.pino1@esercito.difesa.it",armedForce:null,dateOfBirth:"1981-01-14",phone:"1-322-644-4695",mobilePhone:"1-900-186-6912"},{id:21,firstname:"Giovanni",lastname:"Biscetti",degree:"1\xb0 Luogotenente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"giovanni.biscetti@esercito.difesa.it",armedForce:null,dateOfBirth:"1983-01-14",phone:"1-844-658-0870",mobilePhone:"1-844-658-0870"},{id:22,firstname:"Salvatore",lastname:"Di Bella",degree:"Sergente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"salvatore.dibella@esercito.difesa.it",armedForce:null,dateOfBirth:"1984-01-14",phone:"1-795-964-4892",mobilePhone:"1-285-703-1251"},{id:23,firstname:"Giuseppe Mario",lastname:"Di Stefano",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstgpp77t06z614k",entity:null,entityDenomination:null,email:"giuseppemario.distefano@esercito.difesa.it",armedForce:null,dateOfBirth:"1990-01-14",phone:"1-798-383-5696",mobilePhone:"1-258-640-7566"},{id:24,firstname:"Domenico",lastname:"Di Stolfo",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstdnc63d08f631b",entity:null,entityDenomination:null,email:"domenico.distolfo@esercito.difesa.it",armedForce:null,dateOfBirth:"1988-01-14",phone:"1-218-782-9720",mobilePhone:"1-140-892-0517"},{id:25,firstname:"Giovanni",lastname:"Pirro",degree:"Sergente Maggiore",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"prrgnn83a20f839l",entity:null,entityDenomination:null,email:"giovanni.pirro@esercito.difesa.it",armedForce:null,dateOfBirth:"1980-01-14",phone:"1-552-798-4714",mobilePhone:"1-374-458-3607"},{id:26,firstname:"Fabio",lastname:"Ubaldi",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"bldfba63b22h501q",entity:null,entityDenomination:null,email:"fabio.ubaldi@esercito.difesa.it",armedForce:null,dateOfBirth:"1986-01-14",phone:"1-839-254-4819",mobilePhone:"1-890-595-8375"}],totalPages:1,totalElements:25,numberOfElements:25,number:0,size:30,first:!0,last:!0},mr=Object(Oe.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:yn.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),pr=function(e){var t=e.handleClick,a=e.search,n=e.usersSelected,r=e.role,o=be(),i=o.logged,c=o.users,s=o.useMock,u=o.serviceUrl,d=o.setUsers,m=o.setError,p=Object(f.useState)([]),g=Object(P.a)(p,2),h=g[0],v=g[1],O=Object(f.useState)([]),x=Object(P.a)(O,2),k=x[0],C=x[1],j=Object(f.useRef)(),w=Object(y.c)().t,A=mr(),S=Object(ur.a)({fetchSize:40,scroller:j,limit:1e5}),T=S.start,N=S.end,I=S.setIsFetching,D=S.forceDonefetching,R=function(){var e=Object(B.a)(M.a.mark((function e(t,n){var o,c,d,p,f,b,g;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=n/(o=n-t)-1,!s){e.next=9;break}return e.next=6,new Promise((function(e){return setTimeout((function(){return e(dr)}),100)}));case 6:d=e.sent,e.next=12;break;case 9:return e.next=11,pe(u,{page:c,pageSize:o},a,"consulted"===r||"informed"===r);case 11:d=e.sent;case 12:return f=(p=d).payload,b=p.totalPages,g=p.number,b<g&&D(),e.abrupt("return",f.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r,hidden:t.fiscalCode.toUpperCase()===i}),e}),{}));case 17:e.prev=17,e.t0=e.catch(0),m(w("error.dataLoading"));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(f.useEffect)((function(){return function(){d(Object(E.a)({},i,c[i]))}}),[]),Object(f.useEffect)((function(){T!==N&&(I(!0),R(T,N).then((function(e){d(Object(l.a)(Object(l.a)({},c),e)),I(!1)})))}),[T,N]),Object(f.useEffect)((function(){var e=Object.keys(c).reduce((function(e,t){return"undefined"!==t&&e.push(Object(l.a)({id:t},c[t])),e}),[]);v(function(e){var t=new Set;return e.filter((function(e){return"undefined"!==e.id})).filter((function(e){return!e.hidden})).filter((function(e){var a=e.lastname.charAt(0).toUpperCase(),n=t.has(a);return t.add(a),!n})).map((function(e){return e.lastname.charAt(0).toUpperCase()}))}(e)),C(e)}),[c]),b.a.createElement(Ft.a,{className:A.list,subheader:b.a.createElement("li",null),ref:j},h.map((function(e,a){return b.a.createElement("li",{key:"section-".concat(e),className:A.listSection},b.a.createElement("ul",{className:"".concat(A.ul," ").concat(0===a?"first":"")},b.a.createElement(cr.a,{classes:{root:A.subHeader}},e),k.filter((function(e){return!e.hidden})).filter((function(t){return t.lastname.charAt(0).toUpperCase()===e})).map((function(e){var a;return b.a.createElement(Mt.a,{key:Object(le.uniqueId)("list-item"),disabled:e.selected},b.a.createElement(lr.a,null,b.a.createElement(Sa.a,null)),b.a.createElement(Bt.a,{primary:"".concat(e.firstname," ").concat(e.lastname),secondary:e.role}),b.a.createElement(sr.a,null,b.a.createElement(ir.a,{className:A.radio,checked:n&&(null===(a=n[r])||void 0===a?void 0:a.fiscalCode.toUpperCase())===e.fiscalCode.toUpperCase(),onClick:t,value:e.fiscalCode.toUpperCase(),name:"radio-button-".concat(e.id),inputProps:{"aria-label":e.id},disabled:!!Object.keys(n).filter((function(e){return n[e]})).map((function(e){return n[e].fiscalCode.toUpperCase()})).find((function(t){return t===e.fiscalCode.toUpperCase()}))})))}))))})))};pr.defaultProps={role:""};var fr=pr,br=function(e){return b.a.createElement(Yt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},b.a.createElement(ke.a,e))},gr=function(e){var t,a=e.open,n=e.handleClose,r=e.handleUserSelected,o=e.role,i=e.usersSelected,c=Object(y.c)().t,s=Object(f.useState)(null),u=Object(P.a)(s,2),d=u[0],m=u[1],p=Object(f.useState)({}),g=Object(P.a)(p,2),h=g[0],v=g[1],O=Object(f.useState)(""),x=Object(P.a)(O,2),k=x[0],C=x[1],j=Object(Da.a)(),w=be(),A=w.logged,S=w.users,T=w.fetchUser,N=(Object(Pa.a)(j.breakpoints.down("sm")),mr()),I=function(e){var t=Object(f.useRef)();return Object(f.useEffect)((function(){t.current=e})),t.current}(k),D=function(e){var t=e.target.value;m(t.toUpperCase())},R=function(){m(null),C(""),n()},U=function(e){T(null,e,"consulted"===o||"informed"===o)};Object(f.useEffect)((function(){if(d){var e=Object(l.a)(Object(l.a)({},h),{},Object(E.a)({},o,S[d]));v(e)}}),[d]),Object(f.useEffect)((function(){var e=Object.keys(i).reduce((function(e,t){return e[t]=S[i[t]],e}),{});v(e)}),[i,S]);var z=function(){return Object.keys(i).length>0&&!!Object.keys(h).map((function(e){var t;return null===(t=h[e])||void 0===t?void 0:t.fiscalCode.toUpperCase()})).find((function(e){return e===A.toUpperCase()}))};return b.a.createElement(zt.a,{"data-testid":"dialog-user",fullWidth:!0,maxWidth:"sm",open:a,onClose:function(){return R()},PaperComponent:br,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:N.dialog},b.a.createElement(Kt.a,{className:N.dialogTitle,id:"form-dialog-title",onClose:R},b.a.createElement("div",null,c("entities.dialog.users.title")," ",b.a.createElement("span",{className:N.role},o)),b.a.createElement(tt.a,{"aria-label":"close",className:N.closeButton,onClick:R},b.a.createElement(It.a,null))),b.a.createElement(Gt.a,null,b.a.createElement(we.a,{container:!0,spacing:2},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:N.boxTools},b.a.createElement(Ce.a,{className:N.boxInput},b.a.createElement(rr.a,{id:"search",className:N.input,name:"search",value:k,placeholder:c("entities.dialog.users.search"),inputProps:{"aria-label":c("entities.dialog.users.search")},onKeyUp:function(e){var t=e.key,a=e.target.value;C(""),C(a),"Enter"===t&&U(a)}}),b.a.createElement(tt.a,{className:"".concat(N.iconButton," ").concat(k!==I?"active":""),"aria-label":"search",disabled:""===k,onClick:function(){return U(k)}},b.a.createElement(er.a,null))),b.a.createElement(Ce.a,{className:N.boxAssign},b.a.createElement(or.a,{value:"start",disabled:z(),style:{pointerEvents:"".concat(z()?"none":"auto")},control:b.a.createElement(ir.a,{className:N.radio,disabled:z(),checked:h&&(null===(t=h[o])||void 0===t?void 0:t.fiscalCode.toUpperCase())===A}),label:c("entities.dialog.users.assign"),labelPlacement:"start",onClick:function(){return D({target:{value:A}})}}))),b.a.createElement(Ce.a,null,Object.keys(null!==S&&void 0!==S?S:{}).length>0?b.a.createElement(fr,{selectedValue:d,handleClick:D,search:k,usersSelected:h,role:o}):null)))),b.a.createElement(_t.a,{className:N.dialogActions},b.a.createElement(Ae.a,{onClick:R,className:N.buttonClose,"data-testid":"dialog-user-close-button"},c("entities.dialog.users.buttonClose")),b.a.createElement(Ae.a,{onClick:function(){r&&d&&r(S[d],o),m(null),C(""),n()},className:N.button,disabled:null===d,"data-testid":"dialog-user-assign-button"},c("entities.dialog.users.button"))))};gr.defaultProps={open:!1,role:"",usersSelected:void 0};var hr=gr,vr=Sn()({palette:{secondary:{main:"#b39f69"}}},u.itIT),Er={draggable:!1,showTitle:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,paging:!1,pageSize:5,pageSizeOptions:[5,10,20],toolbar:!1},Or=function(){var e=Object(f.useRef)(null),t=Re(),a=t.actionSelected,n=t.subActions,r=t.loading,o=t.updateSubActionStatus,i=t.updateAction,c=he().task,s=be().users,u=Object(y.c)().t,d=Ge(),m=Object(f.useState)({}),g=Object(P.a)(m,2),h=g[0],v=g[1],O=Object(f.useState)({}),x=Object(P.a)(O,2),k=x[0],C=x[1],j={toolbar:{nRowsSelected:"{0} ".concat(u("entities.table.rowSelected"))},body:{emptyDataSourceMessage:u("entities.table.empty")},pagination:{labelRowsSelect:u("entities.table.pagination.rows"),labelRowsPerPage:u("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}},w=Object(f.useMemo)((function(){return[{title:"ID",width:"20%",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return b.a.createElement(je.a,{variant:"subtitle2",component:"div"},c.id,"-",a.code,"-",e.code," ",!0===e.pendingAck||!0===e.pendingComment?b.a.createElement(cn,{positionPlacement:"bottom"}):"")}},{title:"SOTTOAZIONE",align:"justify",render:function(e){return b.a.createElement(je.a,{variant:"body2",component:"div"},e.title)}},{title:"STATO",filtering:!0,align:"center",render:function(e){return b.a.createElement(na,{name:"status",options:qa,initialValue:e.status||"",emptyOption:u("entities.action.noStatus"),highlightKey:qa[0].id,disabledKey:!1===e.canComplete?qa[1].id:null,onChange:function(t){var a,n;e.status!==t&&(a=t,n=e.id,o(n,a))}})}},{title:"FINE",filtering:!0,type:"date",align:"center",render:function(e){return b.a.createElement(je.a,{variant:"body2",component:"div"},e.endDate?Object(Ca.a)(Object(_a.a)(e.endDate),"dd/MM/yyyy"):"-")}}]}));var A=function(e){var t=n.find((function(t){return t.id===e}));return se.map((function(e){var a,n,r;return b.a.createElement(we.a,{item:!0,xs:12,key:e},b.a.createElement(pn,{title:u("entities.info.".concat(e)),name:s[t[e]]?"".concat(null===(a=s[t[e]])||void 0===a?void 0:a.firstname," ").concat(null===(n=s[t[e]])||void 0===n?void 0:n.lastname):"",role:Object(le.get)(s["".concat(t[e])],"role",u("entities.info.empty")),avatar:"".concat(t[e],".jpg"),cta:function(){return a=e,n=s[t[e]],C(t),void d.setAllState({type:"subActions",openDialog:!0,userSelected:n,userRole:a});var a,n},raciRole:e,pendingActions:(r=t,r.pendingAck&&r.pendingComment?"both":r.pendingAck?"ack":r.pendingComment?"comment":void 0)}))}))};return Object(f.useEffect)((function(){v(Array.from(se).reduce((function(e,t){return s[k[t]]&&(e[t]=s[k[t]].fiscalCode.toUpperCase()),e}),{}))}),[k]),b.a.createElement(b.a.Fragment,null,b.a.createElement(hr,{open:d.isOpenDialog,handleClose:function(){d.setOpenDialog(!1)},handleUserSelected:function(e,t){var a=Object(l.a)(Object(l.a)({},k),{},Object(E.a)({},t,e.fiscalCode.toUpperCase()));delete a.tableData,delete a.index,i("subActions",a)},usersSelected:h,role:d.userRole}),b.a.createElement(p.a,{theme:vr},b.a.createElement(Nn.a,{tableRef:e,style:{position:"relative"},isLoading:r,icons:nr,columns:w,data:n,options:Er,title:"",localization:j,detailPanel:function(e){return b.a.createElement(Ce.a,{p:1},b.a.createElement(we.a,{container:!0,spacing:2},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:u("entities.action.detail.description"),content:e.description})),A(e.id)))}})))},yr=Object(Oe.a)((function(e){return{root:{flexGrow:1},box:{height:70,padding:e.spacing(1)},boxStatus:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",color:e.palette.text.secondary},boxBackAction:{padding:e.spacing(2),display:"flex",alignItems:"center",backgroundColor:"#f7f6f0",color:"#86660b","&:hover":{cursor:"pointer"}},paperAction:{textAlign:"left",color:e.palette.text.primary},containerInfo:{height:"90vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"80%",overflowY:"scroll",paddingRight:e.spacing(2),paddingTop:e.spacing(2),boxSizing:"content-box"},containerInfoView:{height:"99%",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:5},containerInfoScrollView:{border:0,borderColor:"blue",borderStyle:"solid",height:"99%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxButtons:{display:"flex",alignItems:"center",flexWrap:"nowrap"},button:{backgroundColor:"transparent"},divider:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:sa.a[400],margin:[[0,e.spacing(1)]]}}})),xr=Object(Oe.a)({root:{"&.Mui-selected":{color:"#fff",backgroundColor:"#b68902"}}}),kr=function(){var e=Object(f.useState)(0),t=Object(P.a)(e,2),a=t[0],n=t[1],r=Object(f.useState)("view"),o=Object(P.a)(r,2),i=o[0],c=o[1],s=Re(),u=s.actionSelected,d=s.error,m=s.message,p=s.clearError,g=s.clearMessage,h=s.updateAction,v=he().task,O=Ve().allReferenceType,x=Object(y.c)().t,k=Object(D.f)(),C=yr(),j=xr(),w=u&&u.subActions||[],A=Object(le.omit)(u,"subActions"),S=function(e){e>=0&&e<=w.length&&n(e)},T=Ge(),N=be().users,I=Object(f.useState)({}),R=Object(P.a)(I,2),U=R[0],z=R[1];return Object(f.useEffect)((function(){if("action"===T.type)z(Array.from(se).reduce((function(e,t){return N[A[t]]&&(e[t]=N[A[t]].fiscalCode.toUpperCase()),e}),{}));else if("subAction"===T.type){var e=w[a];z(Array.from(se).reduce((function(t,a){return N[e[a]]&&(t[a]=N[e[a]].fiscalCode.toUpperCase()),t}),{}))}}),[T.type]),Object(le.isEmpty)(u)?null:b.a.createElement(ke.a,{elevation:5},null===m&&null===d?null:b.a.createElement(Ut,{message:m||d,onClose:function(){return m?g():p()},status:m?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(hr,{open:T.isOpenDialog,handleClose:function(){T.setOpenDialog(!1)},handleUserSelected:function(e,t){var n;delete(n="action"===T.type?Object(l.a)(Object(l.a)({},A),{},Object(E.a)({},t,e.fiscalCode.toUpperCase())):Object(l.a)(Object(l.a)({},w[a]),{},Object(E.a)({},t,e.fiscalCode.toUpperCase()))).tableData,delete n.index,h(T.type,n)},usersSelected:U,role:T.userRole}),b.a.createElement(Ce.a,{p:2},b.a.createElement(je.a,{variant:"h5"},x("entities.action.detail.title")," ",v.id,"-",A.code,!0===A.pendingAck||!0===A.pendingComment?b.a.createElement(cn,{positionPlacement:"right"}):"")),b.a.createElement("div",{className:C.root},b.a.createElement(we.a,{container:!0,spacing:0},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:C.boxBackAction,onClick:function(){return k.push("/")}},b.a.createElement(Te.a,null),b.a.createElement(je.a,{variant:"h6"},x("entities.action.detail.goBack")))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:"".concat(C.box," ").concat(C.boxStatus),justifyContent:"center"},b.a.createElement(Pe.a,{size:"medium",value:i,exclusive:!0,onChange:function(e,t){c(t)}},b.a.createElement(De.a,{classes:j,value:"view"},x("entities.detail.view")),b.a.createElement(De.a,{classes:j,value:"table"},x("entities.detail.table"))))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(wn,{type:"action",action:A,refId:v.id})),b.a.createElement(we.a,{item:!0,xs:6},"view"===i?b.a.createElement(Ce.a,{className:"".concat(C.paper," ").concat(C.paperAction)},b.a.createElement(we.a,{container:!0,spacing:1},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:C.boxButtons},b.a.createElement(Ae.a,{className:C.button,startIcon:b.a.createElement(Te.a,null),disabled:a<0,onClick:function(){return S(a-1)}}),b.a.createElement(je.a,{variant:"h5"},x("entities.action.detail.subactionInfo",{from:w.length>0?a+1:0,to:w.length})),b.a.createElement(Ae.a,{className:C.button,endIcon:b.a.createElement(Ie.a,null),disabled:parseInt(a+1,10)>=w.length,onClick:function(){return S(a+1)}}))))):null,b.a.createElement(we.a,{container:!0,spacing:2},b.a.createElement(we.a,{item:!0,xs:12},"view"===i?b.a.createElement(Ce.a,{p:1},u.subActions.length?b.a.createElement(wn,{type:"subAction",action:w[a],refId:"".concat(v.id,"-").concat(A.code)}):b.a.createElement(je.a,{variant:"h4"},x("entities.action.detail.noSubaction"))):b.a.createElement(Ce.a,{p:1},b.a.createElement(Or,null))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:C.divider})),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{paddingLeft:1,paddingRight:1},b.a.createElement(Ga,{referenceId:null===u||void 0===u?void 0:u.id,referenceType:O.ACTION,referenceTypeNote:"ACTION",domain:"ACTION"}))))))))},Cr=a(578),jr=function(){var e=Object(f.useContext)(ve),t=Object(P.a)(e,2),a=t[0],n=t[1];return{view:a.view,setView:function(e){return n({view:e})}}},wr=Object(Oe.a)((function(e){return{gridContainer:{border:0,borderStyle:"solid",borderColor:"red",height:"100%"},subActions:{fontWeight:600,color:"#000"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}},boxInfoSubAction:{backgroundColor:"#f6f7f9",padding:e.spacing(2),"& .MuiSvgIcon-root":{backgroundColor:"#fff",borderRadius:50,color:"#aeb6c2 "}},boxInfoSubActionPendingAction:{backgroundColor:"#f97b71",padding:e.spacing(2),"& .MuiSvgIcon-root":{backgroundColor:"#fff",borderRadius:50,color:"#aeb6c2 "}},button:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}},highlight:{color:"#efb868",fontWeight:600}}})),Ar=(Object(Oe.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},accordion:{border:0,borderStyle:"solid",borderColor:"red"},accordionSummary:{padding:0,paddingRight:"20px",border:"1px solid",borderColor:e.palette.action.disabled}}})),function(e){var t=e.action,a=wr(),n=Object(y.c)().t,r=Re(),o=r.taskId,i=r.updateActionStatus,c=Ve().allReferenceType,l=t.title,s=t.endDate,u=t.subActions,d=t.canComplete,m=t.status,p=t.subTreePendingAck,f=t.subtreePendingComment,g=(null===u||void 0===u?void 0:u.length)||0,h=b.a.createElement(y.a,{t:n,i18nKey:"entities.action.subActions",count:g},[b.a.createElement("span",{key:g,className:a.subActions},{countSubActions:g})]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(we.a,{container:!0,spacing:2,className:a.gridContainer},b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:n("entities.action.action"),content:l})),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(we.a,{container:!0,spacing:3},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,null,b.a.createElement(Xa,{title:n("entities.action.within"),content:s&&Object(Ca.a)(Object(_a.a)(s),"dd MMMM yyyy",{locale:ja.a}),textTransform:"capitalize"}))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:a.boxState},b.a.createElement(hn,{title:n("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:n,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:a.highlight})]),description:n("entities.action.popper.description")}},b.a.createElement(na,{name:"status",options:qa,initialValue:null!==m&&void 0!==m?m:"",emptyOption:n("entities.action.noStatus"),highlightKey:qa[0].id,disabledKey:!1===d?qa[1].id:null,onChange:function(e){var a=t.id;i(a,e)}})))))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:a.boxInfoSubAction},b.a.createElement(hn,{title:h,contentPopper:{title:"",description:n("entities.action.popper.subAction")},icon:"left"}))),!0===p||!0===f?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:a.boxInfoSubActionPendingAction},b.a.createElement(hn,{title:n("entities.action.actionsPendingAlert"),contentPopper:{title:"",description:n("entities.action.popper.pendingAction")},icon:"left"}))):"",b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ga,{referenceId:o,referenceType:c.TASK,referenceTypeNote:"TASK"}))))}),Sr=a(584),Tr=Object(Oe.a)((function(e){return{priority:{border:0,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),maxWidth:70},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600},buttonDetail:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}}}})),Nr=(Object(Oe.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:5,backgroundColor:"#25b736"}}),Object(Oe.a)({green:{"& div":{backgroundColor:"#25b736"}},orange:{"& div":{backgroundColor:"#fbad37"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}}}),Object(Oe.a)((function(e){return{td:{display:"block",border:"0 solid"},pagination:{border:"0px solid red","& button.Mui-selected":{border:0,color:"#ffffff",backgroundColor:"#86660d"}},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:"#b68902",color:"#b68902"},"& select":{paddingRight:[24,"!important"]},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},rowsPerPage:{width:"60px"},button:{textTransform:"capitalize",color:"#5c636d","& span":{color:"#5c636d"}}}}))),Ir=Sn()({palette:{secondary:{main:"#b39f69"}}},u.itIT),Dr={draggable:!1,showTitle:!1,search:!1,selection:!1,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:e.tableData.checked?"#b39f6933":""}},headerStyle:{color:"#9498a2"},sorting:!0,paging:!1,pageSize:5,pageSizeOptions:[5,10,20],toolbar:!1},Pr=function(e){var t=e.count,a=e.rowsPerPage,n=e.rowsPerPageOptions,r=e.onChangeRowsPerPage,o=e.onChangePage,i=e.page,c=Math.ceil(t/a),l=function(e,t){o(e,t<0?0:t)},s=b.a.useMemo((function(){return n.map((function(e){return b.a.createElement("option",{key:e,value:e},e)}))})),u=Object(y.c)().t,d=Nr();return b.a.createElement("td",{className:d.td},b.a.createElement(Ce.a,{textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",alignContent:"flex-start",position:"absolute",top:0,right:"5%"},b.a.createElement(Ce.a,{marginRight:"20px"},b.a.createElement(je.a,{variant:"body1",color:"textSecondary"},u("entities.table.pagination.rowsPerPage"))),b.a.createElement(Ce.a,{className:d.rowsPerPage},b.a.createElement(Qt.a,{variant:"outlined",className:d.formControl,fullWidth:!0},b.a.createElement(ea.a,{native:!0,value:a,onChange:function(e){var t={target:{value:parseInt(e.target.value,10)}};r(t)}},s)))),b.a.createElement(Ce.a,{textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},b.a.createElement(Ae.a,{onClick:function(e){return l(e,i-1)},disabled:i<=0,size:"large",variant:"outlined",className:d.button,startIcon:b.a.createElement(Te.a,null)},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},u("entities.table.pagination.previous"))),b.a.createElement(Sr.a,{className:d.pagination,size:"large",count:c,page:i+1,variant:"outlined",shape:"rounded",hideNextButton:!0,hidePrevButton:!0,onChange:function(e,t){o(e,t-1)}}),b.a.createElement(Ae.a,{onClick:function(e){return l(e,i+1)},disabled:parseInt(i+1*a,10)>=parseInt(t,10),size:"large",variant:"outlined",className:d.button,endIcon:b.a.createElement(Ie.a,null)},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},u("entities.table.pagination.next")))))},Rr=function(){var e=Object(f.useRef)(null),t=Object(y.c)().t,a=Re(),n=a.actions,r=a.setSelectAction,o=a.pagination,i=a.loading,c=a.updateActionStatus,l=he(),s=l.metadata,u=l.task,d=Tr(),m=Object(D.f)(),g=o.number,h=o.totalElements,v=Object(f.useMemo)((function(){return[{title:"ID",field:"id",width:"20%",align:"center",defaultSort:"asc",type:"numeric",render:function(e){return b.a.createElement(je.a,{variant:"subtitle2",component:"div"},u.id,"-",e.code," ",!0===e.subtreePendingAck||!0===e.subtreePendingComment?b.a.createElement(cn,{positionPlacement:"bottom"}):"")}},{title:"AZIONE",field:"title",filtering:!0,align:"justify",render:function(e){return b.a.createElement(je.a,{variant:"body2",component:"div"},e.title)}},{title:"STAT0",field:"status",filtering:!0,align:"center",render:function(e){var a;return b.a.createElement(na,{name:"status",options:qa,initialValue:null!==(a=e.status)&&void 0!==a?a:"",emptyOption:t("entities.action.noStatus"),highlightKey:qa[0].id,disabledKey:!1===e.canComplete?qa[1].id:null,onChange:function(t){var a,n;e.status!==t&&(a=t,n=e.id,c(n,a))},disabled:!(null===s||void 0===s?void 0:s.canChangeCompletionStatus)})}},{title:"FINE",field:"endDate",filtering:!0,type:"date",align:"center",render:function(e){return b.a.createElement(je.a,{variant:"body2",component:"div"},e.endDate?Object(Ca.a)(Object(_a.a)(e.endDate),"dd/MM/yyyy"):"-")}},{title:"AZIONE",align:"center",field:null,render:function(e){return b.a.createElement(Ae.a,{"data-testid":"action-detail-".concat(e.id),variant:"contained",size:"large",className:d.buttonDetail,onClick:function(){r(e.index),m.push("/dettaglio-azione")},endIcon:b.a.createElement(Ie.a,null)},t("entities.action.gotoDetail"))}}]})),E={toolbar:{nRowsSelected:"{0} ".concat(t("entities.table.rowSelected"))},body:{emptyDataSourceMessage:t("entities.table.empty")},pagination:{labelRowsSelect:t("entities.table.pagination.rows"),labelRowsPerPage:t("entities.table.pagination.rowsPerPage"),firstAriaLabel:"",firstTooltip:"",previousAriaLabel:"",previousTooltip:"",nextAriaLabel:"",nextTooltip:"",lastAriaLabel:"",lastTooltip:""}};return b.a.createElement(p.a,{theme:Ir},b.a.createElement(Nn.a,{tableRef:e,style:{position:"relative"},isLoading:i,icons:nr,columns:v,data:n,options:Dr,title:"",localization:E,components:{Pagination:function(e){return b.a.createElement(Pr,Object.assign({},e,{count:h,page:g}))},Row:function(e){return b.a.createElement(Tn.MTableBodyRow,Object.assign({},e,{className:"task-list-row"}))}}}))},Ur=a(397),zr=Object(Oe.a)((function(e){return{priority:{border:1,borderRadius:50,borderStyle:"solid",textAlign:"center",padding:e.spacing(.5),width:70},boxPercent:{border:1,display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center","& .MuiInputBase-formControl":{height:40}},low:{backgroundColor:"#e0e3e8"},medium:{backgroundColor:"#fbad37",color:"#fff",fontWeight:600},high:{backgroundColor:"#fb3b3a",color:"#fff",fontWeight:600}}})),Fr=Object(Oe.a)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:"#eeeff3"},bar:{borderRadius:5,backgroundColor:"#25b736"}}),Mr=Object(Oe.a)({green:{"& div":{backgroundColor:"#25b736"}},yellow:{"& div":{backgroundColor:"#ffff00"}},red:{"& div":{backgroundColor:"#fb3b3a"}},purple:{"& div":{backgroundColor:"#ab40ff"}},perc0:{"& div":{backgroundColor:"#FF0000"}},perc5:{"& div":{backgroundColor:"#FF1A00"}},perc10:{"& div":{backgroundColor:"#FF3300"}},perc15:{"& div":{backgroundColor:"#FF4D00"}},perc20:{"& div":{backgroundColor:"#FF6600"}},perc25:{"& div":{backgroundColor:"#FF8000"}},perc30:{"& div":{backgroundColor:"#FF9900"}},perc35:{"& div":{backgroundColor:"#FFB300"}},perc40:{"& div":{backgroundColor:"#FFCC00"}},perc45:{"& div":{backgroundColor:"#FFE600"}},perc50:{"& div":{backgroundColor:"#FFFF00"}},perc55:{"& div":{backgroundColor:"#E6FF00"}},perc60:{"& div":{backgroundColor:"#CCFF00"}},perc65:{"& div":{backgroundColor:"#B3FF00"}},perc70:{"& div":{backgroundColor:"#99FF00"}},perc75:{"& div":{backgroundColor:"#80FF00"}},perc80:{"& div":{backgroundColor:"#66FF00"}},perc85:{"& div":{backgroundColor:"#4DFF00"}},perc90:{"& div":{backgroundColor:"#33FF00"}},perc95:{"& div":{backgroundColor:"#1AFF00"}},perc100:{"& div":{backgroundColor:"#00FF00"}},percNegative:{"& div":{backgroundColor:"#ab40ff"}}}),Br=function(e){var t,a=e.priority,n=Object(y.c)().t,r=zr(),o=Fr(),i=he(),c=i.task,l=(i.metadata,Mr()),s=(t=c.completionPercentage,5*Math.ceil(t/5));return b.a.createElement(we.a,{container:!0,spacing:1,alignItems:"center"},b.a.createElement(we.a,{item:!0,xs:9},b.a.createElement(Ce.a,{alignItems:"center"},b.a.createElement(Ce.a,{minWidth:35},b.a.createElement(Ce.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between"},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},n("entities.detail.progress")),b.a.createElement(je.a,{variant:"subtitle2",color:"textSecondary"},"".concat(Math.round(c.completionPercentage||0),"%")))),b.a.createElement(Ce.a,{width:"100%",mr:1},b.a.createElement(Ur.a,{classes:o,className:"".concat(c.completionPercentage>=0?l["perc".concat(s)]:l.percNegative),variant:"determinate",valueBuffer:100,value:c.completionPercentage})))),b.a.createElement(we.a,{item:!0,xs:3},b.a.createElement(Ce.a,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"nowrap",justifyContent:"space-between",marginLeft:1},b.a.createElement(je.a,{variant:"body2",color:"textSecondary"},n("entities.detail.priority")),b.a.createElement("div",{className:"".concat(r.priority," ").concat(r[a])},n("entities.detail.".concat(a))))))},Lr=a(440),Wr=a(68),Hr=a(583),Vr=Object(Oe.a)({datePicker:{border:"0 solid red",marginTop:0,"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiInputBase-input":{textTransform:"capitalize"},"& .MuiInputAdornment-positionEnd":{marginLeft:"-5px"}}}),Kr=function(e){var t=e.name,a=e.errors,n=e.format,r=e.initialValue,o=e.minDate,i=e.maxDate,c=e.invalidDateMessage,l=e.onChange,s=e.disabled,u=Object(f.useState)(),d=Object(P.a)(u,2),m=d[0],p=d[1],g=Vr();Object(f.useEffect)((function(){r&&p(r)}),[r]);return b.a.createElement(Qt.a,{variant:"outlined",fullWidth:!0,error:!Object(le.isEmpty)(a[t])},b.a.createElement(Wr.a,{utils:Lr.a,locale:ja.a},b.a.createElement(Hr.a,{onChange:function(e){var t;(t=e)instanceof Date&&!Object(le.isNaN)(t.getTime())&&l&&l(e)},className:g.datePicker,value:m,inputVariant:"outlined",autoOk:!0,disableToolbar:!0,invalidDateMessage:c,variant:"inline",format:n,margin:"normal",id:"date-picker-inline",label:"",KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0,minDate:o,maxDate:i,disabled:s,allowKeyboardControl:!1})))};Kr.defaultProps={control:{},errors:{},rules:{},onChange:function(){},format:"dd/MM/yyyy",initialValue:void 0,disabled:!1,minDate:void 0,maxDate:void 0,invalidDateMessage:"Invalid Date Format"};var Gr=Kr,_r=Object(Oe.a)((function(e){return{gridContainer:{border:0,borderStyle:"solid",borderColor:"red",height:"100%","& .MuiInputBase-input.Mui-disabled":{opacity:1,color:"rgba(0, 0, 0, 0.87)"},"& .MuiIconButton-root.Mui-disabled":{display:"none"}},borderBox:{border:"1px solid",borderColor:"#e0e3e8"},boxState:{"& svg:first-child":{backgroundColor:"#aeb6c2",borderRadius:50,color:"#fff"}},buttonSendAck:{textTransform:"none",height:48,backgroundColor:"#4f8b46",color:"#fff","&:hover":{backgroundColor:"#4f8b46",color:"#fff"}}}})),qr=function(){var e=he(),t=e.task,a=e.metadata,n=e.updateTaskStatus,r=e.updateTaskDates,o=e.updateAckTaskStatus,i=Ge().setAllState,c=be(),l=c.logged,s=c.users,u=Object(y.c)().t,d=_r(),m=t.status,p=t.canComplete,g=t.id,h=Object(f.useState)(!1),v=Object(P.a)(h,2),E=v[0],O=v[1],x=Object(f.useState)(!1),k=Object(P.a)(x,2),C=k[0],j=k[1],w=Object(f.useState)({field:"",value:null}),A=Object(P.a)(w,2),S=A[0],T=A[1],N=Object(f.useState)({value:null}),I=Object(P.a)(N,2),D=I[0],R=I[1];var U=function(e,a){"startDate"===e&&a&&a!==t.startDate&&(O(!0),T({field:"startDate",value:a})),"endDate"===e&&a&&a!==t.endDate&&(T({field:"endDate",value:a}),O(!0))};return b.a.createElement(b.a.Fragment,null,E?b.a.createElement(jn,{open:E,message:u("entities.task.changeDatesMsg"),onCancel:function(){T({field:"",value:null}),O(!1)},onConfirm:function(){r(g,S.field,S.value),O(!1)}}):null,C?b.a.createElement(jn,{open:C,message:u("entities.task.sendAckMsg"),onCancel:function(){R({value:null}),j(!1)},onConfirm:function(){D.value&&o(g),j(!1),R({value:null})}}):null,b.a.createElement(we.a,{container:!0,spacing:2,className:d.gridContainer},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Xa,{title:u("entities.info.id"),content:t.id})),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:d.boxState},b.a.createElement(hn,{title:u("entities.action.state"),contentPopper:{title:b.a.createElement(y.a,{t:u,i18nKey:"entities.action.popper.title"},[b.a.createElement("span",{key:0,className:d.highlight})]),description:u("entities.action.popper.description")}},b.a.createElement(na,{name:"status",options:Ja,initialValue:m||"",emptyOption:u("entities.action.noStatus"),disabled:!1===p,onChange:function(e){m!==e&&n(g,e)}})))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:u("entities.info.task"),content:t.title})),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(we.a,{container:!0,spacing:3},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,null,b.a.createElement($t,{title:u("entities.info.startDate")},b.a.createElement(Ce.a,{border:0},b.a.createElement(Gr,{name:"startDate",format:"dd MMMM yyyy",rules:{required:{value:!0,message:u("validation.required")}},initialValue:t.startDate,onChange:function(e){return U("startDate",e)},maxDate:t.endDate,disabled:!a.canChangeTaskDates}))))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,null,b.a.createElement($t,{title:u("entities.info.endDate")},b.a.createElement(Ce.a,{border:0},b.a.createElement(Gr,{name:"endDate",format:"dd MMMM yyyy",rules:{required:{value:!0,message:u("validation.required")}},initialValue:t.endDate,onChange:function(e){return U("endDate",e)},minDate:t.startDate,disabled:!a.canChangeTaskDates}))))))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Xa,{title:u("entities.info.description"),content:t.description})),l&&t.informed&&l.toUpperCase()===t.informed.toUpperCase()&&t.pendingAck?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ae.a,{variant:"contained",size:"large",className:d.buttonSendAck,onClick:function(){R({value:!0}),j(!0)},endIcon:b.a.createElement(sn.a,null),title:u("button.ack.title")},u("button.ack.content"))):null,l&&t.consulted&&l.toUpperCase()===t.consulted.toUpperCase()&&t.pendingComment?b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ae.a,{variant:"contained",size:"large",className:d.buttonSendAck,onClick:function(){console.log("write and send comment")},endIcon:b.a.createElement(dn.a,null),title:u("button.comment.title")},u("button.comment.content"))):null,s?Array.from(se).map((function(e){var a,n,r;return b.a.createElement(we.a,{item:!0,xs:12,key:e},b.a.createElement(pn,{title:u("entities.info.".concat(e)),name:s[t[e]]?"".concat(null===(a=s[t[e]])||void 0===a?void 0:a.firstname," ").concat(null===(n=s[t[e]])||void 0===n?void 0:n.lastname):"",role:Object(le.get)(s["".concat(t[e])],"role",u("entities.info.empty")),avatar:"".concat(t[e],".jpg"),cta:function(){return a=e,n=s[t[e]],void i({type:"task",openDialog:!0,userSelected:n,userRole:a});var a,n},raciRole:e,pendingActions:(r=t,r.pendingAck&&r.pendingComment?"both":r.pendingAck?"ack":r.pendingComment?"comment":void 0)}))})):null))},Jr=Object(Oe.a)((function(e){return{root:{flexGrow:1},box:{height:70,padding:e.spacing(1)},boxStatus:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",color:e.palette.text.secondary},boxAction:{textAlign:"left",color:e.palette.text.primary},containerInfo:{height:"80vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"90%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},containerInfoView:{height:"80vh",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScrollView:{border:0,borderColor:"blue",borderStyle:"solid",height:"90%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},containerInfoTable:{height:"100%",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden"},containerInfoScrollTable:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxButtons:{display:"flex",alignItems:"center",flexWrap:"nowrap"},button:{backgroundColor:"transparent"},buttonDelete:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#dc3545",color:"#fff","&:hover":{backgroundColor:"#c82333",color:"#fff"},float:"right"},buttonDetail:{textTransform:"none",margin:e.spacing(1),height:48,backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902",color:"#fff"}},divider:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:sa.a[400]}}})),Yr=Object(Oe.a)({root:{"&.Mui-selected":{color:"#fff",backgroundColor:"#b68902"}}}),Zr=function(){var e,t=Object(y.c)().t,a=Object(f.useState)(0),n=Object(P.a)(a,2),r=n[0],o=n[1],i=Object(f.useState)({}),c=Object(P.a)(i,2),s=c[0],u=c[1],d=Jr(),m=Yr(),p=be().users,g=he(),h=g.task,v=g.metadata,O=g.updateTask,x=g.deleteTask,k=g.usersSelected,C=g.taskListPage,j=Re(),w=j.actions,A=j.setSelectAction,S=Object(D.f)(),T=jr(),N=T.view,I=T.setView,R=Ge(),U=R.isOpenDialog,z=R.setOpenDialog,F=R.userRole,L=R.type,W=Ve().allReferenceType,H=Object(f.useState)(!1),V=Object(P.a)(H,2),K=V[0],G=V[1],_=function(){var e=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(h.id);case 2:G(!1),de(C);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){e>=0&&e<=w.length&&(o(e),u(w[e]),A(e))};Object(f.useEffect)((function(){Object(le.isEmpty)(w)||u(w[r])}),[w]);var J,Y,Z,X;null!==g.message?(J=g.message,Y=g.clearMessage):null!==j.message&&(J=j.message,Y=j.clearMessage),null!==g.error?(Z=g.error,X=g.clearError):null!==j.error&&(Z=j.error,X=j.clearError);var $=b.a.createElement(Ce.a,{border:0,className:"".concat(d.box," ").concat(d.boxAction)},b.a.createElement(Ce.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},b.a.createElement(Ce.a,{className:d.boxButtons},b.a.createElement(Ae.a,{className:d.button,startIcon:b.a.createElement(Te.a,null),disabled:r<0,onClick:function(){return q(r-1)}}),b.a.createElement(je.a,{variant:"h5"},t("entities.detail.action",{from:w.length>0?r+1:0,to:w.length})),b.a.createElement(Ae.a,{className:d.button,endIcon:b.a.createElement(Ie.a,null),disabled:parseInt(r+1,10)>=w.length,onClick:function(){return q(r+1)}})),b.a.createElement(Ae.a,{variant:"contained",size:"large",className:d.buttonDetail,onClick:function(){return S.push("/dettaglio-azione")},endIcon:b.a.createElement(Ie.a,null)},t("entities.action.gotoDetail"))));return b.a.createElement(b.a.Fragment,null,K?b.a.createElement(jn,{open:K,message:t("entities.task.deleteMsg",{id:h.id,title:h.title}),onCancel:function(){return G(!1)},onConfirm:_}):null,b.a.createElement(Ut,{message:J,onClose:Y,status:"success",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(Ut,{message:Z,onClose:X,status:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),b.a.createElement(ke.a,{elevation:5},p&&U?b.a.createElement(hr,{open:U,handleClose:function(){z(!1)},handleUserSelected:function(e,t){"task"===L&&O(Object(l.a)(Object(l.a)({},h),{},Object(E.a)({},t,e.fiscalCode.toUpperCase())))},usersSelected:k,role:F}):null,b.a.createElement(we.a,{container:!0},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{p:2},b.a.createElement(je.a,{variant:"h5"},t("entities.detail.title",{id:h.id})," ",!0===h.pendingAck||!0===h.pendingComment?b.a.createElement(cn,{positionPlacement:"right"}):""," "))),b.a.createElement(we.a,{item:!0,xs:6},v.canDeleteTask&&b.a.createElement(Ae.a,{variant:"contained",size:"large",className:d.buttonDelete,onClick:function(){return G(!0)}},t("common.delete")))),b.a.createElement("div",{className:d.root},b.a.createElement(we.a,{container:!0},b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:"".concat(d.box," ").concat(d.boxStatus)},b.a.createElement(Br,{priority:null!==(e=h.priority)&&void 0!==e?e:"0"}))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Ce.a,{className:"".concat(d.box," ").concat(d.boxStatus),justifyContent:"center"},b.a.createElement(Pe.a,{size:"medium",value:N,exclusive:!0,onChange:function(e,t){I(t)}},b.a.createElement(De.a,{classes:m,value:"view"},t("entities.detail.view")),b.a.createElement(De.a,{classes:m,value:"table"},t("entities.detail.table"))))),b.a.createElement(we.a,{item:!0,xs:6},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfo},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScroll},b.a.createElement(Ce.a,{p:1},b.a.createElement(qr,null))))),b.a.createElement(we.a,{item:!0,xs:6},"view"===N&&w.length?$:null,"view"===N?b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoView},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollView},b.a.createElement(Ce.a,{p:1},w.length?b.a.createElement(Ar,{action:s}):b.a.createElement(je.a,{variant:"h4"},t("entities.action.detail.noAction"))))):b.a.createElement(we.a,{container:!0,spacing:2},b.a.createElement(we.a,{item:!0,xs:12,style:{maxHeight:"50vh"}},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoTable},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollTable},b.a.createElement(Ce.a,{p:1},b.a.createElement(Rr,null))))),b.a.createElement(we.a,{item:!0,xs:12},b.a.createElement(Ce.a,{className:d.divider})),b.a.createElement(we.a,{item:!0,xs:12,style:{maxHeight:"50vh"}},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoTable},b.a.createElement(Cr.a,{fixed:!0,disableGutters:!0,className:d.containerInfoScrollTable},b.a.createElement(Ce.a,{p:1},b.a.createElement(Ga,{referenceId:h.id,referenceType:W.TASK,referenceTypeNote:"TASK"})))))))))))},Xr=function(){var e=be(),t=e.fetchUserPresent,a=e.usersPresent,n=he().edoResponsible,r=U().isLoading;return Object(f.useEffect)((function(){(a||n)&&t(n)}),[a,n]),b.a.createElement(Ee,null,r?b.a.createElement(xe,null):null,b.a.createElement(I.a,{hashType:"noslash"},b.a.createElement(D.c,null,b.a.createElement(D.a,{exact:!0,path:"/dettaglio-azione*"},b.a.createElement(kr,null)),b.a.createElement(D.a,null,b.a.createElement(Zr,null)))))},$r=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=Object(f.useState)({taskId:r,actions:[],pagination:{number:0,numberOfElements:0,size:5,totalElements:0,totalePages:0},error:null,message:null,loading:!1,keycloak:a,serviceUrl:n}),i=Object(P.a)(o,2),c=i[0],s=i[1],u=be().logged,d=be().setUsersPresent;return Object(f.useEffect)((function(){var e=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(le.isEmpty)(u)||null===r){e.next=11;break}return s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),e.next=5,q(n,r);case 5:t=e.sent,a=t.payload,o=ue(a),d(o),t=a.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{actions:t,selected:0})}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("errore",e.t0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{actions:[],error:e.t0.toString()})}));case 17:return e.prev=17,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1})})),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,u,r]),b.a.createElement(L.Provider,{value:[c,s]}," ",t," ")};$r.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var Qr=$r,eo=function(e){var t=e.children,a=Object(f.useState)({type:null,openDialog:!1,userSelected:null,userRole:null}),n=Object(P.a)(a,2),r=n[0],o=n[1];return b.a.createElement(Ke.Provider,{value:[r,o]},t)},to=function(e){var t=e.children,a=Object(f.useState)({loading:!1}),n=Object(P.a)(a,2),r=n[0],o=n[1];return b.a.createElement(R.Provider,{value:[r,o]},t)},ao=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=Object(f.useState)({taskId:r,notes:[],error:null,message:null,keycloak:a,serviceUrl:n}),i=Object(P.a)(o,2),c=i[0],s=i[1],u=be(),d=u.setUsersPresent,m=u.setLoadUserPresent;return Object(f.useEffect)((function(){var e=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===r){e.next=10;break}return e.next=4,$(n,r);case 4:t=(t=e.sent).payload,a=Object(z.a)(new Set(t.map((function(e){return e.createdBy})))),m(!1),d(a),m(!0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{notes:[],error:e.t0.toString()})}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(xa.Provider,{value:[c,s]},t," ")};ao.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var no=ao,ro=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.taskId,o=e.taskListPage,i=Object(f.useState)({task:{id:r},metadata:{},message:null,error:null,serviceUrl:n,taskListPage:o,edoResponsible:null,usersSelected:{}}),c=Object(P.a)(i,2),s=c[0],u=c[1],d=be().setUsersPresent,m=U().setLoading,p=Object(y.c)().t;return Object(f.useEffect)((function(){var e=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a,o,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,K(n,r);case 4:t=e.sent,a=t.payload,o=t.metadata,i=Object(z.a)(new Set(Array.from(se).reduce((function(e,t){return a[t]&&e.push(a[t]),e}),[]))),d(i),u((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:a,metadata:o,edoResponsible:a.responsible,usersSelected:se.reduce((function(e,t){return e[t]=a[t],e}),{}),error:null})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),u((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:p("error.dataLoading")})}));case 14:return e.prev=14,m(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&null!==r&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(ge.Provider,{value:[s,u]}," ",t," ")};ro.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var oo=ro,io=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=Object(f.useState)({logged:null,vertexId:null,vertexShortName:null,users:null,usersPresent:[],loadUsersPresent:!1,serviceUrl:n}),o=Object(P.a)(r,2),i=o[0],c=o[1],s=function e(t){return t&&t.type&&1===t.type.id?{vertexId:t.id,vertexShortName:t.shortName}:t?e(t.parentEdo):""};return Object(f.useEffect)((function(){var e=a.initialized,t=a.authenticated;e&&t&&function(){var e=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Promise.resolve(a.loadUserInfo()).then(function(){var e=Object(B.a)(M.a.mark((function e(t){var r,o,i,u,d,m,p;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,!t.success){e.next=5;break}a.loadUserInfo().success(function(){var e=Object(B.a)(M.a.mark((function e(t){var a,o,i,u,d,m;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.preferred_username,e.next=3,me(n,a.toUpperCase(),r);case 3:o=e.sent,i=o.payload,u=s(i.edo),d=u.vertexId,m=u.vertexShortName,c((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:a.toUpperCase(),vertexId:d,vertexShortName:m})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12;break;case 5:return o=t.preferred_username,e.next=8,me(n,o.toUpperCase(),r);case 8:i=e.sent,u=i.payload,d=s(u.edo),m=d.vertexId,p=d.vertexShortName,c((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:o.toUpperCase(),vertexId:m,vertexShortName:p})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){console.error("error",t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a.initialized,a.authenticated]),b.a.createElement(fe.Provider,{value:[i,c]},t)};io.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var co=io,lo=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrlAttachments,r=e.taskId,o=Object(f.useState)({attachments:[],taskId:r,error:null,message:null,keycloak:a,serviceUrlAttachments:n,allClouds:{},allReferenceType:{TASK:null,ACTION:null},EINET_DIRECTORY:"https://eicloud.comc4ei.esercito.difesa.it/index.php/apps/files/?dir="}),i=Object(P.a)(o,2),c=i[0],s=i[1],u=U().setLoading;return Object(f.useEffect)((function(){var e=function(){var e=Object(B.a)(M.a.mark((function e(){var t,a,o,i,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u(!0),null===r){e.next=13;break}return e.next=5,Le(n);case 5:return t=e.sent,a=t.payload.clouds,o=t.payload.references,e.next=10,Fe(n,r,o.TASK);case 10:i=e.sent,c=i.payload.attachments,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{taskId:r,attachments:c,allClouds:a,allReferenceType:o})}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("errore",e.t0),s((function(t){return Object(l.a)(Object(l.a)({},t),{},{attachments:[],error:e.t0.toString()})}));case 19:return e.prev=19,u(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&e()}),[a.authenticated,a.initialized,r]),b.a.createElement(He.Provider,{value:[c,s]},t," ")};lo.defaultProps={keycloak:{initialized:!1,authenticated:!1}};var so=lo,uo=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},mo={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",serviceUrlUser:"service-url-user",serviceUrlAttachments:"service-url-attachments",taskId:"task-id",cssUrl:"css-url",taskListPage:"task-list-page"},po=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keycloak=uo(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(mo).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===mo.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.getAttribute(mo.cssUrl),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href","".concat(t,"/suneditor.min.css"));var n=this.attachShadow({mode:"open"});n.appendChild(a),n.appendChild(this.container),this.jss=Object(j.c)(Object(l.a)(Object(l.a)({},Object(d.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},u.itIT),this.keycloak=Object(l.a)(Object(l.a)({},uo()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=v("keycloak",(function(){e.keycloak=Object(l.a)(Object(l.a)({},uo()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=v(h,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),T()(n)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(mo.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(mo.serviceUrl)||"",t=this.getAttribute(mo.serviceUrlUser)||"",a=this.getAttribute(mo.serviceUrlAttachments)||"",n="true"===this.getAttribute(mo.hidden),r=this.getAttribute(mo.taskId),o=this.getAttribute(mo.taskListPage)||"task";if(n)A.a.render(b.a.createElement(b.a.Fragment,null));else{var i=this.getAttribute(mo.locale)||"it";C(i),A.a.render(b.a.createElement(g.Provider,{value:this.keycloak},b.a.createElement(to,null,b.a.createElement(co,{keycloak:this.keycloak,serviceUrl:t},b.a.createElement(oo,{keycloak:this.keycloak,serviceUrl:e,taskId:r,taskListPage:o},b.a.createElement(Qr,{keycloak:this.keycloak,serviceUrl:e,taskId:r},b.a.createElement(no,{keycloak:this.keycloak,serviceUrl:e,taskId:r},b.a.createElement(so,{keycloak:this.keycloak,serviceUrlAttachments:a,taskId:r},b.a.createElement(eo,null,b.a.createElement(m.b,{jss:this.jss},b.a.createElement(p.a,{theme:this.muiTheme},b.a.createElement(N,{keycloak:this.keycloak},b.a.createElement(Xr,null)))))))))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(mo)}}]),a}(Object(c.a)(HTMLElement));customElements.define("task-detail",po)}},[[457,1,2]]]);
//# sourceMappingURL=main.31c20cd0.chunk.js.map