(this["webpackJsonptask-detail-widget"]=this["webpackJsonptask-detail-widget"]||[]).push([[0],{192:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore si e\' verificato un errore","adhocTimeout":"Il server @DhOC non risponde","adhocLogin":"Errore durante la connessione al server @DhOC","adhocConnectionNotFound":"Configurazione di connessione al server @DhOC assente per il vertice \\"{vertexId}-{vertexShortName}\\"","adhocSearch":"Errore durante la ricerca dei documenti @DhOC","adhocDownload":"Errore durante il recupero del documento @DhOC","invalidDateMessage":"Formato della data non valido","attachment":{"codeAlreadyExists":"E\' gi\xe0 presente un allegato con il codice inserito"}},"message":{"taskCreated":"Il Task e\' stato creato. ID: {{id}}","noteCreated":"La Nota e\' stata creata. ID: {{id}}","noteDeleted":"La Nota e\' stata cancellata. ID: {{id}}","actionCreated":"L\'Azione e\' stata creata","attachmentAdded":"L\'allegato e\' stato aggiunto","attachmentDeleted":"L\'allegato e\' stato eliminato","attachmentUpdated":"L\'allegato \xe8 stato aggiornato"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","select":"Seleziona","delete":"Elimina","yes":"Si","no":"No"},"validation":{"required":"Il campo \xe8 obbligatorio","maxLength":"La lunghezza massima \xe8 di {{maxLength}}","maxLenght":"","minimum":"Il valore minimo \xe8 di {{minimum}}","maximum":"Il valore massimo \xe8 di {{maximum}}","length":"La lunghezza deve essere di {{length}} caratteri"},"entities":{"creation":{"tabs":["Setup","Definizione Task","Azioni","Allegati","Note"],"setup":{"title":"Scegli il Process Model del Task","processModel":"PROCESS MODEL","processModelPlaceholder":"Seleziona un process Model..."},"taskDefinition":{"task":"TASK","taskPlaceholder":"Dai un nome al Task...","startDate":"INIZIO","endDate":"FINE","priority":"PRIORITA\'","priorityPlaceholder":"Imposta il livello di priorita\' del Task...","description":"DESCRIZIONE","descriptionPlaceholder":"Inserisci una descrizione ...","low":"Bassa","medium":"Media","high":"Alta","assignRole":"Assegna il Ruolo","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","completionPercentage":"% di completamento","completionPercentagePlaceholder":"Imposta la percentuale di completamento"},"actions":{"add":"Aggiungi Azione","addSubaction":"Aggiungi Sottoazione","addTaskAction":"Aggiungi Azioni al Task","addTaskActionDescription":"Se non vuoi dettagliare ora le Azioni del Task \\n fai click su <0>Avanti</0> potrati occupartente\\n  in un secondo momento","action":"Azione","actionPlaceholder":"Dai un nome all\'azione...","subAction":"Sottoazione","subActionPlaceholder":"Dai un nome alla sottoazione...","description":"Descrizione","descriptionPlaceholder":"Inserisci una descrizione ...","end":"Entro","automatic":"Automatico","yes":"Si","no":"No","completion":"Completamento","assignRole":"Assegna il Ruolo","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","popper":{"title":"Completamento","description":"Se automatico e\' settato su \'Si\'\\n l\'azione principale si completa non\\n appena le sottoazioni vengono completate."}},"attachment":{"addAttachment":"Aggiungi allegati da @DhOC o El Cloud","addAttachmentDescription":"Se non vuoi aggiungere allegati al Task\\n fai click su <0>Avanti</0> potrai occupartene\\n in un secondo momento.","addButton":"Aggiungi Allegato al Task","dhoc":"Aggiungi da <0>@DhOC</0>","elcloud":"Aggiungi da <0>El Cloud</0>","einetAttachments":"EInet ({{count}})","adhocAttachments":"@dhoc ({{count}})"},"note":{"addNote":"Aggiungi note al Task","addNoteDescription":"Se non vuoi aggiungere note al Task\\n fai click su <0>Pubblica Task</0> potrai occupartene\\n in un secondo momento.","addButton":"Aggiungi Nota al Task","info":"NOTA {{index}} DI  {{size}}","now":"Adesso"},"buttons":{"next":"Avanti","previous":"Indietro","publish":"Pubblica Task"},"dialog":{"users":{"title":"Assegna","button":"Assegna ruolo","buttonClose":"Chiudi","search":"Cerca un utente...","assign":"Assegna a me"},"attachment":{"titleDhoc":"Aggiungi un allegato da <0>@DhOC</0>","titleElCloud":"Aggiungi un allegato da <0>El Cloud</0>","protocolDhOc":"PROTOCOLLO","protocolDhOcPlaceholder":"Inserisci il n\xb0 di protocollo...","yearDhOc":"ANNO","yearDhOcPlaceholder":"Inserisci l\'anno di riferimento...","registryDhOc":"REGISTRO","registryDhOcPlaceholder":"Inserisci il registro di riferimento...","searchDhOC":"Cerca allegato","attachment":"Allegato...","notFound":"Allegato non trovato","add":"Aggiungi","cancel":"Annulla","dragAndDrop":"Trascina un file qui dentro","selectedFile":"File Selezionato","linkNextcloud":"Link NextCloud","linkNextcloudPlaceholder":"inserisci il link interno di file/cartella NextCloud..."},"note":{"title":"Nuova Nota del Task","buttonPublish":"Pubblica Nota","placeholder":"Inserisci la nota..."}}},"detail":{"progress":"","priority":""}}}')},193:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"validation":{"required":"{{field}} is required"},"entities":{"task":{"deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Tabella vuota"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},260:function(e,t,a){e.exports=a(720)},720:function(e,t,a){"use strict";a.r(t);var n=a(185),r=a(186),o=a(187),i=a(237),c=a(238),l=a(2),s=a(235),d=a(234),u=a(782),m=a(793),b=a(778),p=a(0),f=a.n(p),g=f.a.createContext(null),h=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},v="task.detail",E=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},x=a(28),O=a(158),y=a(16),k={it:a(192),en:a(193)},j=Object.keys(k).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(x.a)({},t,Object(x.a)({},"translation",k[t])))}),{}),C=(O.a.t,function(e){!function(e,t){O.a.use(y.b).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:j,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),w=a(42),A=a(24),S=a.n(A),N=a(194),D=a.n(N),T=a(99),I=a(6),R=a.n(I),M=a(13),P=a(8),B=a(752),U=a(724),z=a(775),L=a(783),F=a(777),H=a(781),V=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},W=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,o=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!n){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,o,i=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,fetch(t,a);case 3:if(200!==(r=e.sent).status){e.next=8;break}return o=r.headers.get("Content-Disposition").split("filename=")[1],r.blob().then((function(e){var t=window.URL.createObjectURL(e);if(n&&o.toLowerCase().endsWith(".pdf")){window.open().location.href=t}else{var a=document.createElement("a");a.href=t,a.download=o,a.click()}})),e.abrupt("return",null);case 8:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(M.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("kie","/processModels"),n=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a(23),K=a(100),J=Object(p.createContext)([{},function(){}]),Y=function(){var e=Object(p.useContext)(J),t=Object(P.a)(e,2),a=t[0],n=t[1];return{error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},setError:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:e})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},setMessage:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e})}))}}},Z=Object(p.createContext)([{},function(){}]),X=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",W(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"DELETE"}),e.abrupt("return",W(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(a,"?").concat("referenceType=").concat(n),o=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("adhoc/search"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",W(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("adhoc/download"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null,responseType:"blob"}),e.abrupt("return",q(r,o,n));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(M.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("all/types"),n=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n,r){var o,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t,"/").concat(a),i=Object(l.a)(Object(l.a)({},V()),{},{method:"PUT",body:JSON.stringify({referenceId:r,code:n})}),e.abrupt("return",W(o,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),re=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.serviceUrlAttachments,o=e.useMock,i=Object(p.useState)({keycloak:a,serviceUrl:n,serviceUrlAttachments:r,attachments:[],error:null,message:null,useMock:o,allClouds:{},allReferenceType:{}}),c=Object(P.a)(i,2),s=c[0],d=c[1],u=Object(y.c)().t,m=Y().setError;return Object(p.useEffect)((function(){var e=function(){var e=Object(M.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(r);case 3:t=e.sent,d((function(e){return Object(l.a)(Object(l.a)({},e),{},{allClouds:t.payload.clouds,allReferenceType:t.payload.references})})),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),d(Object(l.a)(Object(l.a)({},s),{},{error:u("error.dataLoading"),message:null})),m(u("error.dataLoading"));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();a.initialized&&a.authenticated&&(d((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:a})})),e())}),[a]),f.a.createElement(Z.Provider,{value:[s,d]},t)},oe=Object(p.createContext)([{loading:!1},function(){}]),ie=function(){var e=Object(p.useContext)(oe),t=Object(P.a)(e,2),a=t[0],n=t[1];return{isLoading:a.loading,setLoading:function(e){n({loading:e})}}},ce=Object(p.createContext)([{},function(){}]),le=function(e){var t=e.children,a=e.taskId,n=e.keycloak,r=e.serviceUrl,o=e.useMock,i=Object(p.useState)({taskId:a,notes:[],error:null,message:null,keycloak:n,serviceUrl:r,useMock:o}),c=Object(P.a)(i,2),s=c[0],d=c[1];return Object(p.useEffect)((function(){n.initialized&&n.authenticated&&d((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:n})}))}),[n]),f.a.createElement(ce.Provider,{value:[s,d]},t," ")};le.defaultProps={taskId:null};var se=le,de=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",W(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=Object(p.createContext)([{},function(){}]),be=function(){var e=Object(p.useContext)(me),t=Object(P.a)(e,2),a=t[0],n=t[1],r=ie().setLoading,o=Object(y.c)().t,i=a.serviceUrl,c=a.useMock,s=Y(),d=s.setError,u=s.setMessage,m=function(){var e=Object(M.a)(R.a.mark((function e(t){var s,m,b;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=8;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(t)}))}),500);case 5:return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:{id:"33"},message:o("message.taskCreated",{id:33})})})),u(o("message.taskCreated",{id:33})),e.abrupt("return",33);case 8:return e.next=10,ue(i,t);case 10:if(!(s=e.sent).payload.id){e.next=18;break}return e.next=14,de(i,s.payload.id);case 14:m=e.sent,b=Object(l.a)(Object(l.a)({},m.payload),{},{processDefinitionId:t.processDefinitionId}),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{task:b,message:o("message.taskCreated",{id:s.payload.id})})})),u(o("message.taskCreated",{id:s.payload.id}));case 18:return e.abrupt("return",s.payload.id);case 21:e.prev=21,e.t0=e.catch(0),console.error("error",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),d(o("error.dataLoading"));case 26:return e.prev=26,r(!1),e.finish(26);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[0,21,26,29]])})));return function(t){return e.apply(this,arguments)}}();return{contextActions:a.actions,actions:a.actions,task:a.task,updateTask:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{task:Object(l.a)(Object(l.a)({},t.task),e)})}))},createTask:m,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},pe=a(723),fe=a(56),ge=a.n(fe),he=function(e){var t=e.message,a=e.callback,n=e.status,r=e.autoHideDuration,o=Object(K.b)(),i=o.enqueueSnackbar,c=o.closeSnackbar,l={variant:n,autoHideDuration:r,action:function(e){return f.a.createElement(pe.a,{onClick:function(){a(),c(e)}},f.a.createElement(ge.a,null))},onClose:function(){return a()},preventDuplicate:!0};return Object(p.useEffect)((function(){t&&i(t,l)}),[t]),f.a.createElement(f.a.Fragment,null)};he.defaultProps={message:void 0,callback:function(){},autoHideDuration:3e3};var ve=he,Ee=a(727),xe=Object(Ee.a)({spinner:{zIndex:99999,display:"inline-block",position:"absolute",top:"30%",left:"50%",width:"80px",height:"80px","& div":{transformOrigin:"40px 40px",animation:"$spinner 1.2s linear infinite"},"& div::after":{content:'" "',display:"block",position:"absolute",top:"3px",left:"37px",width:"5px",height:"18px",borderRadius:"20%",background:"currentColor"},"& div:nth-child(1)":{transform:"rotate(0deg)",animationDelay:"-1.1s"},"& div:nth-child(2)":{transform:"rotate(30deg)",animationDelay:" -1s"},"& div:nth-child(3)":{transform:"rotate(60deg)",animationDelay:" -0.9s"},"& div:nth-child(4)":{transform:"rotate(90deg)",animationDelay:" -0.8s"},"& div:nth-child(5)":{transform:"rotate(120deg)",animationDelay:" -0.7s"},"& div:nth-child(6)":{transform:"rotate(150deg)",animationDelay:" -0.6s"},"& div:nth-child(7)":{transform:"rotate(180deg)",animationDelay:" -0.5s"},"& div:nth-child(8)":{transform:"rotate(210deg)",animationDelay:" -0.4s"},"& div:nth-child(9)":{transform:"rotate(240deg)",animationDelay:" -0.3s"},"& div:nth-child(10)":{transform:"rotate(270deg)",animationDelay:" -0.2s"},"& div:nth-child(11)":{transform:"rotate(300deg)",animationDelay:" -0.1s"},"& div:nth-child(12)":{transform:"rotate(330deg)",animationDelay:" 0s"}},"@keyframes spinner":{from:{opacity:0},to:{opacity:1}}}),Oe=function(){var e=xe();return f.a.createElement("div",{className:e.spinner},f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null))},ye=Object(Ee.a)({container:{border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:4,padding:"16px 0"}}),ke=Object(Ee.a)({root:{position:"relative",borderBottom:"1px solid #e8e8e8"},indicator:{backgroundColor:"#86660d"}}),je=Object(Ee.a)((function(e){return{root:{textTransform:"none",marginRight:e.spacing(1),marginBottom:e.spacing(2),"&:hover":{color:"#1b1d22",opacity:1},"&$selected":{color:"#1b1d22"},"&:focus":{color:"#1b1d22"}}}})),Ce=a(80),we=a(756),Ae=a(757),Se=a(103),Ne=a(57),De=a.n(Ne),Te=a(82),Ie=a.n(Te),Re=a(83),Me=a.n(Re),Pe=a(221),Be=a.n(Pe),Ue=a(44),ze=a(789),Le=a(107),Fe=a.n(Le),He=a(60),Ve=a(214),We=a.n(Ve),qe=a(213),Ge=a.n(qe),_e=a(157),Ke=a.n(_e),Je=Object(Ee.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{height:"726px"},border:{border:1,borderTop:0,borderRight:0,borderStyle:"solid",borderColor:e.palette.action.disabled},borderButton:{border:1,borderRight:0,borderLeft:0,borderTop:0,borderStyle:"solid",borderColor:e.palette.action.disabled},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},gridContainer:{border:"0px solid red"},inputInfo:{border:"0 solid red"},borderBox:{borderBottom:0,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,minHeight:"50px",textAlign:"center",padding:e.spacing(2)},borderBoxInfo:{paddingRight:e.spacing(1)},boxActions:{border:"0 solid red",padding:e.spacing(0)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},buttonAddAction:{borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"100%",minHeight:"60px"},boxButtons:{border:"0 solid black",margin:0,bottom:0},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},highlight:{color:"#efb868",fontWeight:600}}})),Ye=Object(Ee.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled},boxCircle:{border:"0 solid red",minHeight:"60px",position:"relative"},circle:{width:"10px",height:"10px",borderRadius:"50%",border:1,borderStyle:"solid",margin:0,position:"absolute",top:"50%",left:0,transform:"translate(0, -50%)",color:"#b2b6b9"},boxAction:{width:"100%",backgroundColor:"#f4f4ec",color:"#86660b",minHeight:"60px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",marginBottom:e.spacing(2)},iconAction:{border:"0 solid red"},boxIconSubAction:{backgroundColor:"#ffffff",color:e.palette.action.disabled,marginRight:e.spacing(2),paddingLeft:e.spacing(1),minHeight:"60px","& .MuiSvgIcon-root":{paddingTop:"15px"}},boxTextAction:{border:"0 solid blue",width:"100%",textAlign:"left"},boxAddSubAction:{border:"0 solid blue",height:"50px",marginBottom:e.spacing(2)},buttonAddSubAction:{height:"100%",width:"100%",textTransform:"none"}}})),Ze=function(e){var t=e.actions,a=e.handleClickAction,n=e.disabledButton,r=Ye(),o=Object(y.c)().t;return t.map((function(e,t){return f.a.createElement(H.a,{key:Object(_.uniqueId)("action-info_")},f.a.createElement(we.a,{container:!0},f.a.createElement(we.a,{item:!0,xs:1,classes:{item:r.item}},f.a.createElement(H.a,{className:r.boxCircle},f.a.createElement(H.a,{className:r.circle}))),f.a.createElement(we.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(H.a,{className:r.boxAction},f.a.createElement(H.a,{marginLeft:2,marginRight:2,className:r.iconAction},f.a.createElement(Ke.a,{fontSize:"small"})),f.a.createElement(H.a,{className:r.boxTextAction},f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},"".concat(e.title||"Azione"," "))))),e.subActions.map((function(e){return f.a.createElement(f.a.Fragment,{key:Object(_.uniqueId)("sub-action_")},f.a.createElement(we.a,{key:Object(_.uniqueId)("sub-action_"),item:!0,xs:1,classes:{item:r.item}}),f.a.createElement(we.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(H.a,{className:r.boxAction},f.a.createElement(H.a,{className:r.boxIconSubAction},f.a.createElement(Ge.a,{fontSize:"small"})),f.a.createElement(H.a,{marginRight:2,className:r.iconAction},f.a.createElement(Ke.a,{fontSize:"small"})),f.a.createElement(H.a,{className:r.boxTextAction},f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},"".concat(e.title))),f.a.createElement(H.a,{marginRight:2,className:r.iconAction},f.a.createElement(We.a,{fontSize:"small"})))))})),f.a.createElement(we.a,{item:!0,xs:1,classes:{item:r.item}}),f.a.createElement(we.a,{item:!0,xs:11,classes:{item:r.item}},f.a.createElement(H.a,{className:r.boxAddSubAction},f.a.createElement(Ae.a,{variant:"outlined",type:"button",className:r.buttonAddSubAction,startIcon:f.a.createElement(De.a,null),onMouseDown:function(){return function(e){a("subAction",e)}(t)},disabled:n},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},o("entities.creation.actions.addSubaction")))))))}))},Xe=a(791),$e=a(133),Qe=a.n($e),et=a(69),tt=a.n(et),at=a(787),nt=a(765),rt=a(766),ot=a(241),it=a(767),ct=a(785),lt=a(768),st=a(47),dt=a(764),ut=a(217),mt=a.n(ut),bt=a(81),pt=a.n(bt),ft=function(){var e=Object(M.a)(R.a.mark((function e(t){var a,n,r,o,i,c=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{page:0,pageSize:10},n=c.length>2?c[2]:void 0,r=c.length>3&&void 0!==c[3]&&c[3],o="".concat(t,"/").concat("users","?informedOrConsulted=").concat(r,"&sortBy=lastname,firstname,id"),a&&(o+="&page=".concat(a.page,"&size=").concat(a.pageSize)),n&&(o+="&globalSearch=".concat(n)),i=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(o,i));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("users","/fiscalCode/").concat(a),n&&(r+="?loadEdoTree=true"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(r,o));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ht={payload:[{id:13,firstname:"Massimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"AAAA",parent:{id:13,firstname:"BBBBBMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"BBB",parent:{id:13,firstname:"CCCCMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"CCC",parent:{id:13,firstname:"ESERCITOMassimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,shortName:"ESERCITO",active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:14,firstname:"Patrizio",lastname:"Antonucci",degree:"Maresciallo",active:!0,edo:{id:7,name:"Sezione 2",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:6,active:!0},fiscalCode:"pantonucci",entity:null,entityDenomination:null,email:"patrizio.antonucci@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:17,firstname:"Carmine",lastname:"Armelini",degree:"Ten. Col.",active:!0,edo:{id:10,name:"Nucleo 3",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:7,active:!0},fiscalCode:"carmelini",entity:null,entityDenomination:null,email:"carmine.armelini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:11,firstname:"Mario",lastname:"Bianchi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"user",entity:null,entityDenomination:null,email:"mario.bianchi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:7,firstname:"Carlo",lastname:"Bianchi",degree:"Ten. Col.",active:!1,edo:null,fiscalCode:"ddd1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:21,firstname:"Giovanni",lastname:"Biscetti",degree:"1\xb0 Luogotenente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"giovanni.biscetti@esercito.difesa.it",armedForce:null,dateOfBirth:"1983-01-14",phone:"1-844-658-0870",mobilePhone:"1-844-658-0870"},{id:10,firstname:"Pasquale",lastname:"Calogero",degree:"Mar.",active:!0,edo:null,fiscalCode:"eee4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:2,firstname:"Gabriele",lastname:"Cappio",degree:"Serg. Magg.",active:!0,edo:{id:2,name:"Reparto 1",headUser:1,defaultUser:1,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aaa4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:22,firstname:"Salvatore",lastname:"Di Bella",degree:"Sergente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"salvatore.dibella@esercito.difesa.it",armedForce:null,dateOfBirth:"1984-01-14",phone:"1-795-964-4892",mobilePhone:"1-285-703-1251"},{id:23,firstname:"Giuseppe Mario",lastname:"Di Stefano",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstgpp77t06z614k",entity:null,entityDenomination:null,email:"giuseppemario.distefano@esercito.difesa.it",armedForce:null,dateOfBirth:"1990-01-14",phone:"1-798-383-5696",mobilePhone:"1-258-640-7566"}],totalPages:15,totalElements:148,numberOfElements:10,number:0,size:10,first:!0,last:!1},vt=Object(p.createContext)([{},function(){}]),Et=function(){var e=Object(p.useContext)(vt),t=Object(P.a)(e,2),a=t[0],n=t[1],r=Object(y.c)().t,o=a.serviceUrl,i=a.useMock,c=a.logged,s=Y(),d=function(){var e=Object(M.a)(R.a.mark((function e(t,d,u){var m,b,p,f,g,h,v,E,O,y,k,j,C;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=7;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e(ht)}))}),100);case 4:m=e.sent,e.next=10;break;case 7:return e.next=9,ft(o,t,d,u);case 9:m=e.sent;case 10:p=(b=m).payload,f=b.totalPages,g=b.totalElements,h=b.numberOfElements,v=b.number,E=b.size,O=b.first,y=b.last,p&&(k=p.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r}),e}),{}),j=a.users&&a.users[c],C=Object.keys(k).find((function(e){var t;return(null===(t=k[e])||void 0===t?void 0:t.fiscalCode.toUpperCase())===c})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{users:C?k:Object(l.a)(Object(l.a)({},k),{},Object(x.a)({},null===j||void 0===j?void 0:j.fiscalCode.toUpperCase(),j)),pagination:{totalPages:f,totalElements:g,numberOfElements:h,number:v,size:E,first:O,last:y}})}))),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:r("error.dataLoading"),message:null})),s.setError(r("error.dataLoading"));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{logged:a.logged,vertexId:a.vertexId,vertexShortName:a.vertexShortName,users:a.users,serviceUrl:a.serviceUrl,useMock:a.useMock,setUsers:function(e){n((function(t){return Object(l.a)(Object(l.a)({},t),{},{users:e})}))},setPagination:function(e){return n(Object(l.a)(Object(l.a)({},a),{},{pagination:e}))},fetchUser:d,setError:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:e})}))},clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},setMessage:function(e){return n((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},xt=a(758),Ot=a(759),yt=a(760),kt=a(761),jt=a(762),Ct=a(763),wt=a(215),At=a(216),St=a.n(At),Nt=Object(Ee.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:St.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),Dt=function(e){var t=e.handleClick,a=e.search,n=e.usersSelected,r=e.role,o=Et(),i=o.logged,c=o.users,s=o.useMock,d=o.serviceUrl,u=o.setUsers,m=o.setError,b=Object(p.useState)([]),g=Object(P.a)(b,2),h=g[0],v=g[1],E=Object(p.useState)([]),O=Object(P.a)(E,2),k=O[0],j=O[1],C=Object(p.useRef)(),w=Object(y.c)().t,A=Nt(),S=Object(wt.a)({fetchSize:40,scroller:C,limit:1e5}),N=S.start,D=S.end,T=S.setIsFetching,I=S.forceDonefetching,B=function(){var e=Object(M.a)(R.a.mark((function e(t,n){var o,c,u,b,p,f,g;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=n/(o=n-t)-1,!s){e.next=9;break}return e.next=6,new Promise((function(e){return setTimeout((function(){return e(ht)}),500)}));case 6:u=e.sent,e.next=12;break;case 9:return e.next=11,ft(d,{page:c,pageSize:o},a,"consulted"===r||"informed"===r);case 11:u=e.sent;case 12:return p=(b=u).payload,f=b.totalPages,g=b.number,f<g&&I(),e.abrupt("return",p.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(l.a)(Object(l.a)({},t),{},{role:r,hidden:t.fiscalCode.toUpperCase()===i}),e}),{}));case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),m(w("error.dataLoading"));case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){return j([]),function(){u(Object(x.a)({},i,c[i]))}}),[]),Object(p.useEffect)((function(){N!==D&&(T(!0),B(N,D).then((function(e){u(Object(l.a)(Object(l.a)({},c),e)),T(!1)})))}),[N,D]),Object(p.useEffect)((function(){var e=Object.keys(c).reduce((function(e,t){return"undefined"!==t&&e.push(Object(l.a)({id:t},c[t])),e}),[]);v(function(e){var t=new Set;return e.filter((function(e){return"undefined"!==e.id})).filter((function(e){return!e.hidden})).filter((function(e){var a=e.lastname.charAt(0).toUpperCase(),n=t.has(a);return t.add(a),!n})).map((function(e){return e.lastname.charAt(0).toUpperCase()}))}(e)),j(e)}),[c]),f.a.createElement(xt.a,{className:A.list,subheader:f.a.createElement("li",null),ref:C},h.map((function(e,a){return f.a.createElement("li",{key:"section-".concat(e),className:A.listSection},f.a.createElement("ul",{className:"".concat(A.ul," ").concat(0===a?"first":"")},f.a.createElement(Ot.a,{classes:{root:A.subHeader}},e),k.filter((function(e){return!e.hidden})).filter((function(t){return t.lastname.charAt(0).toUpperCase()===e})).map((function(e){var a;return f.a.createElement(yt.a,{key:Object(_.uniqueId)("list-item"),disabled:e.selected},f.a.createElement(kt.a,null,f.a.createElement(Xe.a,null)),f.a.createElement(jt.a,{primary:"".concat(e.firstname," ").concat(e.lastname),secondary:e.role}),f.a.createElement(Ct.a,null,f.a.createElement(ct.a,{className:A.radio,checked:n&&(null===(a=n[r])||void 0===a?void 0:a.fiscalCode.toUpperCase())===e.fiscalCode.toUpperCase(),onClick:t,value:e.fiscalCode.toUpperCase(),name:"radio-button-".concat(e.id),inputProps:{"aria-label":e.id},disabled:!!Object.keys(n).map((function(e){return n[e].fiscalCode.toUpperCase()})).find((function(t){return t===e.fiscalCode.toUpperCase()}))})))}))))})))};Dt.defaultProps={role:""};var Tt=Dt,It=function(e){return f.a.createElement(pt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(U.a,e))},Rt=function(e){var t,a=e.open,n=e.handleClose,r=e.usersSelected,o=e.handleUserSelected,i=e.role,c=Object(y.c)().t,l=Object(p.useState)(null),s=Object(P.a)(l,2),d=s[0],u=s[1],m=Object(p.useState)(""),b=Object(P.a)(m,2),g=b[0],h=b[1],v=Object(st.a)(),E=Et(),x=E.logged,O=E.users,k=E.fetchUser,j=(Object(dt.a)(v.breakpoints.down("sm")),Nt()),C=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current}(g),w=function(e){var t=e.target.value;u(t.toUpperCase()),o&&o(O[t.toUpperCase()])},A=function(e){k(null,e,"consulted"===i||"informed"===i)},S=function(){return Object.keys(r).length>0&&!!Object.keys(r).map((function(e){return r[e].fiscalCode.toUpperCase()})).find((function(e){return e===x.toUpperCase()}))};return f.a.createElement(at.a,{fullWidth:!0,maxWidth:"sm",open:a,onClose:function(){return n()},PaperComponent:It,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:j.dialog},f.a.createElement(nt.a,{className:j.dialogTitle,id:"form-dialog-title",onClose:function(){return n()}},f.a.createElement("div",null,c("entities.creation.dialog.users.title")," ",f.a.createElement("span",{className:j.role},i)),f.a.createElement(pe.a,{"aria-label":"close",className:j.closeButton,onClick:function(){return n()}},f.a.createElement(ge.a,null))),f.a.createElement(rt.a,null,f.a.createElement(we.a,{container:!0,spacing:2},f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(H.a,{className:j.boxTools},f.a.createElement(H.a,{className:j.boxInput},f.a.createElement(ot.a,{id:"search",className:j.input,name:"search",value:g,placeholder:c("entities.creation.dialog.users.search"),inputProps:{"aria-label":c("entities.creation.dialog.users.search")},onKeyUp:function(e){var t=e.key,a=e.target.value;h(""),h(a),"Enter"===t&&A(a)}}),f.a.createElement(pe.a,{className:"".concat(j.iconButton," ").concat(g!==C?"active":""),"aria-label":"search",disabled:""===g,onClick:function(){return A(g)}},f.a.createElement(mt.a,null))),f.a.createElement(H.a,{className:j.boxAssign},f.a.createElement(it.a,{value:"start",disabled:S(),style:{pointerEvents:"".concat(S()?"none":"auto")},control:f.a.createElement(ct.a,{className:j.radio,disabled:S(),checked:r&&(null===(t=r[i])||void 0===t?void 0:t.fiscalCode.toUpperCase())===x.toUpperCase()}),label:c("entities.creation.dialog.users.assign"),labelPlacement:"start",onClick:function(){return w({target:{value:x}})}}))),f.a.createElement(H.a,null,O&&Object.keys(null!==O&&void 0!==O?O:{}).length>0?f.a.createElement(Tt,{selectedValue:d,handleClick:w,search:g,usersSelected:r,role:i}):null)))),f.a.createElement(lt.a,{className:j.dialogActions},f.a.createElement(Ae.a,{onClick:function(){return n()},className:j.buttonClose},c("entities.creation.dialog.users.buttonClose")),f.a.createElement(Ae.a,{onClick:function(){return n()},className:j.button,disabled:null===d},c("entities.creation.dialog.users.button"))))};Rt.defaultProps={role:"",usersSelected:void 0};var Mt=Rt,Pt=a(780),Bt=Object(Ee.a)({datePicker:{border:"0 solid red",marginTop:0,"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiInputBase-input":{textTransform:"capitalize"},"& .MuiInputAdornment-positionEnd":{marginLeft:"-5px"}}}),Ut=function(e){var t=e.control,a=e.name,n=e.rules,r=e.errors,o=e.format,i=e.setValue,c=e.initialValue,l=e.minDate,s=e.maxDate,d=e.invalidDateMessage,u=Bt();return Object(p.useEffect)((function(){c&&i(a,c)}),[c]),f.a.createElement(He.a,{error:!Object(_.isEmpty)(r[a]),render:function(e){var t=e.onChange,a=e.onBlur,n=e.value,r=e.ref;return f.a.createElement(Pt.a,{onBlur:a,onChange:t,inputRef:r,className:u.datePicker,value:n,inputVariant:"outlined",autoOk:!0,disableToolbar:!0,invalidDateMessage:d,variant:"inline",format:o,margin:"normal",id:"date-picker-inline",label:"",KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0,minDate:l,maxDate:s})},control:t,rules:n,name:a,defaultValue:new Date})};Ut.defaultProps={rules:{},format:"dd/MM/yyyy",initialValue:void 0,minDate:void 0,maxDate:void 0,invalidDateMessage:"Invalid Date Format"};var zt=Ut,Lt=function(e){var t=e.title,a=e.children,n=Object(T.a)(e,["title","children"]);return f.a.createElement(H.a,n,f.a.createElement(H.a,{border:0,textAlign:"left",p:1},f.a.createElement(Se.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(H.a,{border:0,textAlign:"left"},a))},Ft=a(774),Ht=a(219),Vt=a.n(Ht),Wt=a(755),qt=Object(Wt.a)((function(e){return{paper:{width:"180px",padding:e.spacing(1),backgroundColor:"#2d2b1f","& .MuiTypography-root":{color:"#fff"}},popper:{zIndex:1,'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.background.paper," transparent transparent transparent")}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}})),Gt=function(e){var t=e.title,a=e.children,n=e.contentPopper,r=Object(T.a)(e,["title","children","contentPopper"]),o=f.a.useState(!1),i=Object(P.a)(o,2),c=i[0],l=i[1],s=qt(),d=Object(p.useRef)(null),u=Object(p.useState)(null),m=Object(P.a)(u,2),b=m[0],g=m[1];return f.a.createElement(H.a,r,f.a.createElement(Ft.a,{open:c,anchorEl:d.current,className:s.popper,placement:"top",disablePortal:!0,modifiers:{flip:{enabled:!0},arrow:{enabled:!0,element:b},preventOverflow:{enabled:"true",boundariesElement:"scrollParent"}}},f.a.createElement("span",{className:s.arrow,ref:g}),f.a.createElement(U.a,{className:s.paper},f.a.createElement(Se.a,{variant:"body1"},n.title),f.a.createElement(Se.a,{variant:"body2"},n.description))),f.a.createElement(H.a,{border:0,textAlign:"left",p:1,display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(H.a,{marginRight:2},f.a.createElement(Se.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(H.a,{onClick:function(){l((function(e){return!e}))},ref:d,height:"20px"},f.a.createElement(Vt.a,{fontSize:"small"}))),f.a.createElement(H.a,{border:0,textAlign:"left"},a))},_t=a(772),Kt=a(220),Jt=a.n(Kt),Yt=Object(Ee.a)((function(e){return{boxSwitch:{border:1,borderRadius:4,borderStyle:"solid",borderColor:e.palette.action.disabled,width:"100%",minHeight:"54px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-around"},switch:{border:"0 solid red",margin:e.spacing(1)},checkedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2},uncheckedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2}}})),Zt=function(e){var t=e.label,a=e.on,n=e.off,r=e.onChange,o=Yt(),i=f.a.useState(!0),c=Object(P.a)(i,2),l=c[0],s=c[1];return f.a.createElement(_t.a,{variant:"outlined",fullWidth:!0},f.a.createElement(H.a,{position:"relative",width:1},f.a.createElement(H.a,{className:o.boxSwitch},f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},t)),f.a.createElement(Jt.a,{onChange:function(e){s(e),r&&r(e)},checked:l,className:o.switch,width:70,onColor:"#2d2b1f",checkedIcon:f.a.createElement("div",{className:o.checkedIcon},a),uncheckedIcon:f.a.createElement("div",{className:o.uncheckedIcon},n)}))))},Xt=a(792),$t=a(773),Qt=function(e){var t,a=e.register,n=e.errors,r=e.name,o=e.placeholder,i=e.watch,c=e.debug,l=e.showCountCaracthers,s=e.countCaracthers,d=e.multiline,u=e.rows,m=e.rowsMax,b=e.initialValue,g=e.setValue,h=e.cssClass,v=e.type;return c&&console.log("watch",i(r)),Object(p.useEffect)((function(){b&&g&&g(r,b)}),[b,g,r]),f.a.createElement(_t.a,{variant:"outlined",fullWidth:!0,error:!Object(_.isEmpty)(n[r])},f.a.createElement(H.a,{position:"relative",width:1},f.a.createElement(Xt.a,{type:v,fullWidth:!0,id:"component-".concat(r),placeholder:o,inputRef:a,name:r,multiline:d,rows:u,rowsMax:m,className:h}),l?f.a.createElement(H.a,{position:"absolute",bottom:0,right:"10px"},f.a.createElement(Se.a,{variant:"caption",color:"textSecondary"},i(r)?i(r).length:0," / ",s)):null),f.a.createElement($t.a,{id:"component-".concat(r,"-error-text")},null===(t=n[r])||void 0===t?void 0:t.message))};Qt.defaultProps={debug:!1,multiline:!1,showCountCaracthers:!1,countCaracthers:0,rows:2,rowsMax:4,initialValue:"",cssClass:"",type:"text"};var ea=Qt,ta=(Object(Ee.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"110px"}}})),Object(Ee.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"150px"}}}))),aa=Object(Ee.a)((function(e){return{boxGrid:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},gridContainer:{border:"0 solid red",padding:e.spacing(0)},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},boxActions:{border:"1px solid red",padding:e.spacing(1)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),textAlign:"center","& .boxIcon":{}},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},button:{margin:e.spacing(1),borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"75%",minHeight:"60px"}}})),na=function(e){var t,a=e.action,n=e.typeAction,r=e.register,o=e.watch,i=e.errors,c=e.control,s=e.setValue,d=e.clearErrors,u=Object(p.useMemo)((function(){return["responsible","accountable","consulted","informed"]}),[]),m=Object(p.useState)(!1),b=Object(P.a)(m,2),g=b[0],h=b[1],v=Object(p.useState)(null),E=Object(P.a)(v,2),O=E[0],k=E[1],j=Object(p.useState)({}),C=Object(P.a)(j,2),w=C[0],A=C[1],S=be().task,N=Object(y.c)().t,D=ta(),T=aa();Object(p.useEffect)((function(){A({}),r({name:"responsible"},{required:!0}),r({name:"endDate"}),r({name:"accountable"}),r({name:"consulted"}),r({name:"informed"}),r({name:"automaticComplete"})}),[r]);var I=function(e){h(!g),k(e)};return f.a.createElement(we.a,{container:!0},f.a.createElement(Mt,{open:g,handleClose:I,handleUserSelected:function(e){A((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(x.a)({},O,e))})),s(O,e.fiscalCode.toUpperCase()),d(O)},usersSelected:w,role:O}),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:N("action"===n?"entities.creation.actions.action":"entities.creation.actions.subAction")},f.a.createElement(ea,{name:"title",placeholder:N("action"===n?"entities.creation.actions.actionPlaceholder":"entities.creation.actions.subActionPlaceholder"),register:r({required:{value:!0,message:N("validation.required")},maxLength:{value:125,message:N("validation.maxLenght",{maxLength:125})}}),watch:o,setValue:s,errors:i,showCountCaracthers:!0,countCaracthers:125}))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:N("entities.creation.actions.description")},f.a.createElement(ea,{name:"description",placeholder:N("entities.creation.actions.descriptionPlaceholder"),register:r({required:{value:!0,message:N("validation.required")},maxLength:{value:500,message:N("validation.maxLenght",{maxLength:500})}}),watch:o,setValue:s,errors:i,multiline:!0,rows:5,rowsMax:20,showCountCaracthers:!0,countCaracthers:500}))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(H.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignContent:"flex-start",height:"120px"},f.a.createElement(H.a,{paddingRight:1,height:1,width:.5},f.a.createElement(Lt,{title:N("entities.creation.actions.end")},f.a.createElement(H.a,{border:0},f.a.createElement(zt,{control:c,name:"endDate",setValue:s,initialValue:null!==(t=S.startDate)&&void 0!==t?t:new Date,format:"dd MMMM yyyy",rules:{required:{value:!0,message:N("validation.required")}},errors:i,minDate:Object(ze.a)(S.startDate,{days:1}),maxDate:"action"===n?S.endDate:a.endDate,invalidDateMessage:N("error.invalidDateMessage")})))),"action"===n?f.a.createElement(H.a,{border:0,height:1,width:.5},f.a.createElement(Gt,{title:N("entities.creation.actions.completion"),contentPopper:{title:N("entities.creation.actions.popper.title"),description:N("entities.creation.actions.popper.description")}},f.a.createElement(H.a,{border:0},f.a.createElement(Zt,{label:N("entities.creation.actions.automatic"),on:N("entities.creation.actions.yes"),off:N("entities.creation.actions.no"),onChange:function(e){s("automaticComplete",e)}})))):null)),f.a.createElement(we.a,{item:!0,xs:12},u.map((function(e){var t,a;return f.a.createElement(we.a,{key:e,item:!0,xs:12,classes:D},f.a.createElement(Lt,{title:N("entities.creation.actions.".concat(e))},f.a.createElement(H.a,{className:T.boxContainer},f.a.createElement(H.a,{className:"".concat(T.borderBox," ").concat(i[e]?"error":""),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"flex-start",alignItems:"center"},f.a.createElement(H.a,{marginRight:2},o(e)?f.a.createElement(Xe.a,{className:T.avatar,alt:null===(t=w[e])||void 0===t?void 0:t.firstname,src:(null===(a=w[e])||void 0===a?void 0:a.image)||"",onClick:function(){return I(e)}}):f.a.createElement(pe.a,{fontSize:"large",className:T.boxAdd,onClick:function(){return I(e)},disableRipple:!0},f.a.createElement(De.a,{className:T.iconAdd}))),f.a.createElement(H.a,{flexGrow:1},o(e)?f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},"".concat(w[e].firstname," ").concat(w[e].lastname)):null,f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},o(e)?w[e].role:N("entities.creation.actions.assignRole"))),o(e)?f.a.createElement(H.a,null,f.a.createElement(pe.a,{fontSize:"large",onClick:function(){return I(e)},disableRipple:!0},f.a.createElement(Qe.a,{className:T.iconAdd})),"responsible"!==e?f.a.createElement(pe.a,{fontSize:"large",onClick:function(){return function(e){s(e,void 0),k(e);var t=Object(l.a)({},w);delete t[e],A(t)}(e)},disableRipple:!0},f.a.createElement(tt.a,{className:T.iconAdd})):null):null)),i[e]?f.a.createElement(H.a,{marginTop:"3px",marginLeft:"14px"},f.a.createElement(Se.a,{variant:"caption",color:"error",align:"left"},N("validation.required"))):null))}))))},ra={title:"Azione",description:"",startDate:null,automaticComplete:!0,responsible:null,accountable:null,consulted:null,informed:null,subActions:[]},oa=["title","description","endDate","responsible","accountable","consulted","informed"],ia=function(e){var t=e.onSubmit,a=e.changeTab,n=Object(p.useState)(!1),r=Object(P.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)(!1),s=Object(P.a)(c,2),d=s[0],u=s[1],m=Object(p.useState)([]),b=Object(P.a)(m,2),g=b[0],h=b[1],v=Object(p.useState)(null),E=Object(P.a)(v,2),x=E[0],O=E[1],k=Object(p.useState)(0),j=Object(P.a)(k,2),C=j[0],w=j[1],A=be(),S=A.task,N=A.contextActions,D=Object(He.b)({mode:"onChange",reValidateMode:"onBlur",defaultValues:{initAction:ra}}),T=D.register,I=D.handleSubmit,B=D.errors,U=D.watch,L=D.control,F=D.setValue,V=D.trigger,W=D.clearErrors,q=D.reset,G=Je(),K=Object(y.c)().t,J=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current},Y=J(U(oa)),Z=J(x),X=function(){var e=Object(M.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length>N.length||"subAction"===x)){e.next=3;break}return e.next=3,V(oa);case 3:Object(_.isEmpty)(B)&&(t=Object(_.cloneDeep)(g),O("action"),t.push(Object(l.a)({},ra)),h(t),g.length&&q(oa),F("endDate",Object(ze.a)(S.startDate,{days:1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(oa);case 2:Object(_.isEmpty)(B)&&(n=Object(_.cloneDeep)(g),w(a),q(oa),O(t),(r=Object(l.a)({},Object(_.omit)(Object(l.a)({},ra),"subActions","automaticComplete"))).title="Sottoazione",n[a].subActions.push(Object(l.a)(Object(l.a)({},r),{},{endDate:g[a].endDate})),h(n),u(!0),F("endDate",g[a].endDate));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){N.length&&h(N)}),[N]),Object(p.useEffect)((function(){if(Y&&Z===x){var e=U(oa),t=Object.keys(e).filter((function(t){return e[t]!==Y[t]}));if(t.length){var a=Object(_.cloneDeep)(g),n=a.length-1,r=t.reduce((function(t,a){return t[a]=e[a],t}),{});if(!Object(_.isEmpty)(r)){if("action"===x)a[n]=Object(l.a)(Object(l.a)({},a[n]),r);else if("subAction"===x){var o=a[n].subActions.length-1;a[n].subActions[o]=Object(l.a)(Object(l.a)({},a[n].subActions[o]),r)}h(a),i(!1),u(!1)}}}}),[U,Y,Z,x]);return Object(_.isEmpty)(B)||console.table(B),f.a.createElement(Ue.a,{utils:Ce.a,locale:Fe.a},f.a.createElement("form",{onSubmit:I((function(e,n){if(Object(_.isEmpty)(B)){var r=Object(l.a)(Object(l.a)({},Object(_.pick)(e,"step","target","action")),{},{actions:g});t(r,n)}else a(null,3)}))},f.a.createElement("input",{type:"hidden",name:"step",defaultValue:3,ref:T}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"task",ref:T}),f.a.createElement("input",{type:"hidden",name:"action",defaultValue:"submit",ref:T}),f.a.createElement(H.a,{className:G.boxGrid},f.a.createElement(we.a,{container:!0,className:G.gridContainer,spacing:1},f.a.createElement(we.a,{item:!0,xs:6,classes:{item:G.item}},f.a.createElement(H.a,{className:G.borderBox},f.a.createElement(Ae.a,{variant:"contained",type:"button",className:G.buttonAddAction,startIcon:f.a.createElement(De.a,null),onClick:function(){return X("new")},disabled:o,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},K("entities.creation.actions.add")))),g.length>0?f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:G.containerInfo},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:G.containerInfoScroll},f.a.createElement(H.a,{className:"".concat(G.borderBox," ").concat(G.borderBoxInfo)},f.a.createElement(H.a,{className:G.boxActions},f.a.createElement(Ze,{actions:g,handleClickAction:$,disabledButton:d}))))):null),f.a.createElement(we.a,{item:!0,xs:6,classes:{item:G.item}},g.length<=0?f.a.createElement(H.a,{className:G.boxEmptyActionContainer},f.a.createElement(H.a,{className:"boxIcon"},f.a.createElement(Be.a,null)),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},K("entities.creation.actions.addTaskAction"))),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textSecondary"},f.a.createElement(y.a,{t:K,i18nKey:"entities.creation.actions.addTaskActionDescription"},[f.a.createElement("span",{key:0,className:G.highlight})])))):f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:G.containerInfo},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:G.containerInfoScroll},f.a.createElement(H.a,{p:1,className:G.border},f.a.createElement(na,{action:g[C],typeAction:null!==x&&void 0!==x?x:"action",register:T,control:L,watch:U,errors:B,setValue:F,clearErrors:W})))))),f.a.createElement(H.a,{p:2,border:0,textAlign:"center",className:G.boxButtons},f.a.createElement(Ae.a,{size:"large",type:"button",onClick:function(e){return a(e,1)},startIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:G.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},K("entities.creation.buttons.previous"))),f.a.createElement(Ae.a,{size:"large",type:"submit",endIcon:f.a.createElement(Me.a,null),variant:"outlined",className:G.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},K("entities.creation.buttons.next")))))))},ca=a(98),la=a.n(ca),sa=function(){var e=Object(p.useContext)(Z),t=Object(P.a)(e,2),a=t[0],n=t[1],r=Et(),o=r.logged,i=r.vertexId,c=r.vertexShortName,s=ie().setLoading,d=Object(y.c)().t,u=a.serviceUrlAttachments,m=be().task,b=Y(),f=b.setError,g=b.setMessage,h=function(){var e=Object(M.a)(R.a.mark((function e(t,r,o){var i,c,b,p,h;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(u,"/").concat(t),c={data:r,referenceId:m.id,referenceType:o},e.prev=2,s(!0),e.next=6,X(i,c);case 6:if(!e.sent.payload.id){e.next=15;break}return e.next=10,Q(u,m.id,o);case 10:b=e.sent,p=b.payload.attachments,h=d("message.attachmentAdded")+(a.allReferenceType.TASK===o?" al task":""),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:p,message:h})})),g(h);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.dataLoading"),message:null})),f(d("error.dataLoading"));case 21:return e.prev=21,s(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(t,a,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(M.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("nextcloud",t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(M.a)(R.a.mark((function e(t,a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("adhoc",{items:t},a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(M.a)(R.a.mark((function e(t,r){var o,i,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,$(u,t);case 4:if(!e.sent.payload.id){e.next=13;break}return e.next=8,Q(u,m.id,r);case 8:o=e.sent,i=o.payload.attachments,c=d("message.attachmentDeleted")+(a.allReferenceType.TASK===r?" dal task":""),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:i,message:c})})),g(c);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.dataLoading"),message:null})),f(d("error.dataLoading"));case 20:return e.prev=20,s(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,15,20,23]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(e,t){var r="dataLoading";-1!==e.toString().toLowerCase().indexOf("time-out")?r="adhocTimeout":-1!==e.toString().toLowerCase().indexOf("bad request")?r="adhocLogin":-1!==e.toString().toLowerCase().indexOf("precondition failed")?r="adhocConnectionNotFound":-1!==e.toString().toLowerCase().indexOf("not found")&&(r="adhoc".concat(t));var o=d("error.".concat(r)).replace("{vertexId}",i).replace("{vertexShortName}",c);n(Object(l.a)(Object(l.a)({},a),{},{error:o,message:null})),f(o)},k=function(){var e=Object(M.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),a=Object(l.a)(Object(l.a)({},t),{},{cf:o,vertexId:i}),e.next=5,ee(u,a);case 5:return n=e.sent,e.abrupt("return",n.payload.items);case 9:return e.prev=9,e.t0=e.catch(0),O(e.t0,"Search"),e.abrupt("return",[]);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n){var r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),r={id:t,name:a,cf:o,vertexId:i},e.next=5,te(u,r,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O(e.t0,"Download");case 10:return e.prev=10,s(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(M.a)(R.a.mark((function e(t,r,o){var i,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,ne(u,t,r,m.id);case 4:if(!e.sent.payload){e.next=11;break}return e.next=8,Q(u,m.id,o);case 8:i=e.sent,c=i.payload.attachments,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{attachments:c,message:d("message.attachmentUpdated")})}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),"409"===e.t0.message?n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.attachment.codeAlreadyExists"),message:null})):n(Object(l.a)(Object(l.a)({},a),{},{error:d("error.dataLoading"),message:null}));case 17:return e.prev=17,s(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,13,17,20]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{attachments:a.attachments,postNextcloudAttachment:v,postAdhocAttachment:E,searchAdhocAttachment:k,deleteAttachment:x,downloadAdhocAttachment:j,updateAttachmentCode:C,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))},allClouds:a.allClouds,allReferenceType:a.allReferenceType}},da=a(776),ua=Object(Wt.a)({highlight:{color:"#efb868",fontWeight:600}}),ma=function(e){var t=e.onClose,a=e.open,n=function(e){t(e)},r=Object(y.c)().t,o=ua();return f.a.createElement(at.a,{onClose:t,"aria-labelledby":"dialog-choose-attachment",open:a},f.a.createElement(xt.a,null,f.a.createElement(yt.a,{button:!0,onClick:function(){return n("dhoc")},key:"dhoc"},f.a.createElement(jt.a,null,f.a.createElement(y.a,{t:r,i18nKey:"entities.creation.attachment.dhoc"},[f.a.createElement("span",{key:0,className:o.highlight})]))),f.a.createElement(da.a,null),f.a.createElement(yt.a,{button:!0,onClick:function(){return n("elcloud")},key:"elcloud"},f.a.createElement(jt.a,null,f.a.createElement(y.a,{t:r,i18nKey:"entities.creation.attachment.elcloud"},[f.a.createElement("span",{key:0,className:o.highlight})])))))},ba=a(786),pa=a(111),fa=a.n(pa),ga=a(784),ha=Object(Ee.a)((function(e){return{formControl:{backgroundColor:"#ffffff","& div":{height:"56px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.primary},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}}}})),va=function(e){var t,a=e.register,n=e.name,r=e.options,o=e.emptyOption,i=e.errors,c=e.initialValue,l=Object(p.useState)(""),s=Object(P.a)(l,2),d=s[0],u=s[1],m=ha(),b=function(e){u(e.target.value)};return Object(p.useEffect)((function(){c&&b({target:{value:c}})}),[c]),f.a.createElement(_t.a,{variant:"outlined",className:m.formControl,fullWidth:!0,error:!Object(_.isEmpty)(i[n])},f.a.createElement(ga.a,{native:!0,value:d,onChange:b,inputRef:a,name:n},f.a.createElement("option",{value:"",disabled:!0},o),r.map((function(e){return f.a.createElement("option",{key:e.id,value:e.id},e.value)}))),f.a.createElement($t.a,{id:"component-task-name-error-text"},null===(t=i[n])||void 0===t?void 0:t.message))};va.defaultProps={initialValue:""};var Ea=va,xa=a(75),Oa=a.n(xa),ya=Object(Ee.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:450,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:Oa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:Oa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},adhocItemsFound:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:".5rem",paddingLeft:"1rem",margin:".3rem",color:"#5a6470"},boxAdhocItemsFound:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between","& .Mui-checked":{color:"#b68902"}},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},uppercase:{"& input":{textTransform:"uppercase"}}}})),ka={LENGTH_TASK_ATTACHMENT_CODE:4,ADHOC_MIN_YEAR:2012,ADHOC_DEFAULT_REGISTRY:"REG"},ja=function(e){return f.a.createElement(pt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(U.a,e))},Ca=function(e){var t=e.onClose,a=e.open,n=e.referenceType,r=(new Date).getFullYear(),o=ya(),i=Object(y.c)().t,c=Object(p.useState)(!0),s=Object(P.a)(c,2),d=s[0],u=s[1],m=sa(),b=m.searchAdhocAttachment,g=m.postAdhocAttachment,h=m.downloadAdhocAttachment,v=Object(p.useState)(null),E=Object(P.a)(v,2),x=E[0],O=E[1],k=Object(p.useState)(new Set),j=Object(P.a)(k,2),C=j[0],w=j[1],A=Object(p.useState)(!0),S=Object(P.a)(A,2),N=S[0],D=S[1],T=Object(He.b)({mode:"all"}),I=T.register,B=T.handleSubmit,U=T.errors,z=T.setValue,L=T.watch,F=T.formState,V=function(){O(null),w(new Set),D(!0),t()},W=function(){var e=Object(M.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Array.from(C).forEach((function(e){return t.push(x[e])})),e.next=4,g(t,n);case 4:V();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),a.stopPropagation(),!F.isSubmitting){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,b(Object(l.a)(Object(l.a)({},t),{},{registry:null===(n=String(t.registry))||void 0===n?void 0:n.toUpperCase()}));case 6:r=e.sent,O(r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){if(!Object(_.isEmpty)(L())){var e=Object.keys(L()).filter((function(e){return""===L(e)}));u(0!==e.length)}}),[L]);var G=Object(p.useCallback)((function(){return Array(r-ka.ADHOC_MIN_YEAR+1).fill().map((function(e,t){return ka.ADHOC_MIN_YEAR+t})).map((function(e){return{id:e,value:e}}))}),[]),K=function(e,t){return f.a.createElement(H.a,{className:o.adhocItemsFound,textAlign:"left",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start",key:t+e.name},f.a.createElement(Se.a,{title:"Scarica ".concat(e.name),component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return h(e.id,e.name,!0)}},e.signature),f.a.createElement(Se.a,{variant:"body1",color:"textSecondary",title:"Scarica ".concat(e.name),style:{cursor:"pointer"},noWrap:!0,onClick:function(){return h(e.id,e.name,!0)}},e.name),f.a.createElement(H.a,{className:o.boxAdhocItemsFound},f.a.createElement(fa.a,{style:{marginRight:"1rem",cursor:"pointer"},onClick:function(){return h(e.id,e.name,!0)}}),f.a.createElement(ba.a,{onChange:function(e){return function(e,t){var a=C;t?a.add(e):a.delete(e),w(a),D(0===a.size)}(t,e.target.checked)}})))};return f.a.createElement(at.a,{fullWidth:!0,maxWidth:"sm",onClose:V,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:ja},f.a.createElement(nt.a,{className:o.dialogTitle,id:"form-dialog-title",onClose:V},f.a.createElement("div",null,f.a.createElement(y.a,{t:i,i18nKey:"entities.creation.dialog.attachment.titleDhoc"},[f.a.createElement("span",{key:0,className:o.highlight})])),f.a.createElement(pe.a,{"aria-label":"close",className:o.closeButton,onClick:V},f.a.createElement(ge.a,null))),f.a.createElement(rt.a,null,f.a.createElement("form",{onSubmit:B(q)},f.a.createElement(H.a,{className:o.boxEditor},f.a.createElement(we.a,{container:!0},f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:i("entities.creation.dialog.attachment.protocolDhOc")},f.a.createElement(ea,{type:"number",name:"protocol",placeholder:i("entities.creation.dialog.attachment.protocolDhOcPlaceholder"),register:I({required:{value:!0,message:i("validation.required")}}),watch:L,setValue:z,errors:U}))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:i("entities.creation.dialog.attachment.yearDhOc")},f.a.createElement(Ea,{register:I({required:{value:!0,message:i("validation.required")}}),name:"year",emptyOption:"",initialValue:r,options:G(),errors:U}))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:i("entities.creation.dialog.attachment.registryDhOc"),className:o.uppercase},f.a.createElement(ea,{name:"registry",placeholder:i("entities.creation.dialog.attachment.registryDhOcPlaceholder"),register:I({required:{value:!0,message:i("validation.required")}}),initialValue:ka.ADHOC_DEFAULT_REGISTRY,watch:L,setValue:z,errors:U}))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(H.a,{textAlign:"center"},f.a.createElement(Ae.a,{type:"submit",variant:"outlined",className:o.buttonSearch,disabled:d},i("entities.creation.dialog.attachment.searchDhOC"))))),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(H.a,{textAlign:"center"},null===x||void 0===x?f.a.createElement(f.a.Fragment,null):0===x.length?f.a.createElement(H.a,{className:o.boxAttachment},f.a.createElement(Se.a,{variant:"h6",component:"div",color:"textSecondary"},i("entities.creation.dialog.attachment.notFound"))):x.map((function(e,t){return K(e,t)}))))))),f.a.createElement(lt.a,{className:o.dialogActions},f.a.createElement(Ae.a,{disabled:N,onClick:W,className:o.button},i("entities.creation.dialog.attachment.add"))))};Ca.defaultProps={referenceType:null};var wa=Ca,Aa=a(236),Sa=Object(Ee.a)((function(e){return{dropZone:{"& .MuiDropzoneArea-root":{minHeight:160,position:"relative"},"& .MuiDropzoneArea-icon":{color:Oa.a[300]}},dropZoneArea:{"&.MuiDropzoneArea-root":{minHeight:160,position:"relative",background:"lightgrey",color:Oa.a[300],cursor:"default"},"& .MuiDropzoneArea-icon":{color:Oa.a[300]}},dialogTitle:{textAlign:"center"},boxEditor:{position:"relative",padding:e.spacing(2),border:1,borderStyle:"solid",borderColor:Oa.a[300],minHeight:300,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{},buttonSearch:{margin:[[e.spacing(2),0]],textTransform:"none",minHeight:"50px",width:"100%",backgroundColor:"#b68902",color:"#fff","&:hover":{backgroundColor:"#b68902"}},button:{backgroundColor:"#b68902",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:Oa.a[200]}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},highlight:{color:"#efb868",fontWeight:600},boxAttachment:{backgroundColor:"#eeeff3",display:"flex",flexWrap:"nowrap",justifyContent:"center",height:50,borderRadius:4,alignItems:"center"},iconClose:{color:"red",padding:e.spacing(1)},previewChip:{minWidth:160,maxWidth:210}}})),Na=function(e){return f.a.createElement(pt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(U.a,e))},Da=function(e){var t=e.onClose,a=e.open,n=e.referenceType,r=Sa(),o=Object(y.c)().t,i=sa(),c=i.attachments,l=i.postNextcloudAttachment,s=Object(p.useState)(!0),d=Object(P.a)(s,2),u=d[0],m=d[1],b=Object(He.b)({mode:"all"}),g=b.register,h=b.errors,v=b.setValue,E=b.watch;Object(p.useEffect)((function(){Object(_.isEmpty)(E())||(0===Object.keys(E()).filter((function(e){return""===E(e)})).length?m(!1):m(!0))}),[E]);var x=function(){var e=Object(M.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(Object.values(E())[0],n);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f.a.createElement(at.a,{fullWidth:!0,maxWidth:"sm",onClose:t,"aria-labelledby":"dialog-dhoc",open:a,disableEnforceFocus:!0,PaperComponent:Na},f.a.createElement(nt.a,{className:r.dialogTitle,id:"form-dialog-title",onClose:t},f.a.createElement("div",null,f.a.createElement(y.a,{t:o,i18nKey:"entities.creation.dialog.attachment.titleElCloud"},[f.a.createElement("span",{key:0,className:r.highlight})])),f.a.createElement(pe.a,{"aria-label":"close",className:r.closeButton,onClick:t},f.a.createElement(ge.a,null))),f.a.createElement(rt.a,null,f.a.createElement(Aa.a,{dropzoneClass:r.dropZoneArea,dialogProps:{"aria-labelledby":"dialog-elcloud",disableEnforceFocus:!0,PaperComponent:Na,className:r.dropZoneArea},dropzoneProps:{disabled:!0},maxWidth:"sm",fileObjects:c,cancelButtonText:"",submitButtonText:"",dropzoneText:o("entities.creation.dialog.attachment.dragAndDrop"),maxFileSize:5e6,filesLimit:1,open:a,onAdd:function(e){l(e),t(e)},onClose:t,showPreviews:!1,showFileNamesInPreview:!1,showAlerts:!1,showFileNames:!1,showPreviewsInDropzone:!1}),f.a.createElement(we.a,{item:!0,xs:12},f.a.createElement(Lt,{title:o("entities.creation.dialog.attachment.linkNextcloud")},f.a.createElement(ea,{name:"nextcloudLink",placeholder:o("entities.creation.dialog.attachment.linkNextcloudPlaceholder"),register:g({required:{value:!0,message:o("validation.required")}}),watch:E,setValue:v,errors:h})))),f.a.createElement(lt.a,{className:r.dialogActions},f.a.createElement(Ae.a,{className:r.button,disabled:u,onClick:x},o("entities.creation.dialog.attachment.add"))))};Da.defaultProps={referenceType:null};var Ta=Da,Ia=a(788),Ra=a(227),Ma=a.n(Ra),Pa=a(134),Ba=a.n(Pa),Ua=a(228),za=a.n(Ua),La=function(e){var t=e.attachmentCode,a=e.onConfirm,n=Object(y.c)().t,r=be().task,o=Object(p.useState)({active:!1,value:t,error:!1}),i=Object(P.a)(o,2),c=i[0],s=i[1];return f.a.createElement(f.a.Fragment,null,c.active?f.a.createElement(f.a.Fragment,null,f.a.createElement(pe.a,{"aria-label":"save",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1})})),a(c.value)},disableRipple:!0,disabled:c.error},f.a.createElement(Ba.a,null)),f.a.createElement(pe.a,{"aria-label":"delete",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1,error:!1,value:t})}))}},f.a.createElement(Ma.a,null)),f.a.createElement(Ia.a,{variant:"outlined",error:c.error,type:"text",id:"code",name:"name",value:c.value,inputProps:{maxLength:ka.LENGTH_TASK_ATTACHMENT_CODE},helperText:c.error?n("validation.length",{length:ka.LENGTH_TASK_ATTACHMENT_CODE}):"",onChange:function(e){e.target.value.toString().trim().length!==ka.LENGTH_TASK_ATTACHMENT_CODE?s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!0,value:e.target.value})})):s((function(t){return Object(l.a)(Object(l.a)({},t),{},{error:!1,value:e.target.value})}))}})):f.a.createElement(f.a.Fragment,null,f.a.createElement(pe.a,{"aria-label":"edit",onClick:function(){s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!0})}))}},f.a.createElement(za.a,null)),f.a.createElement("span",null,r.id,"-",t)))};La.defaultProps={};var Fa=La,Ha=Object(Ee.a)((function(e){return{boxAttachmentInfoContainer:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,display:"flex",flexWrap:"nowrap",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:e.spacing(1),marginBottom:e.spacing(1),borderRadius:4},boxAttachmentInfoAction:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between",color:e.palette.action.disabled},borderBox:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4},icon:{color:"#5a6470"},iconAndTextAction:{display:"flex",alignItems:"center",flexWrap:"nowrap",flexDirection:"row"},attachment:{width:"60%"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.54)"},marginBox:{marginBottom:"8px"}}})),Va=function(e){var t=e.attachment,a=e.handleDelete,n=e.allClouds,r=e.referenceType,o=Ha(),i=t.id,c=t.code,l=t.file,s=l.name,d=l.cloudType,u=l.signature,m=s,b=s;b.length>60&&(b="".concat(s.substring(0,17),"...").concat(s.substring(s.length-40)));var p=sa().downloadAdhocAttachment,g=sa().updateAttachmentCode;return f.a.createElement(H.a,{className:"".concat(o.borderBox," ").concat(o.marginBox),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},f.a.createElement(H.a,{p:1,className:o.icon},f.a.createElement(la.a,null)),f.a.createElement(H.a,{className:o.attachment},d===n.NEXTCLOUD?f.a.createElement(Se.a,{variant:"body1",color:"textSecondary",title:m,noWrap:!0},f.a.createElement("a",{target:"_blank",rel:"noreferrer",href:m,className:o.link},b)):f.a.createElement(f.a.Fragment,null,u?f.a.createElement(Se.a,{component:"div",variant:"subtitle2",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return p(i,null,!0)}},u):null,f.a.createElement(Se.a,{variant:"body1",color:"textSecondary",title:b,component:"div",noWrap:!0,style:{cursor:"pointer"},onClick:function(){return p(i,null,!0)}},b))),f.a.createElement(H.a,{className:"".concat(o.icon," ").concat(o.iconAndTextAction)},f.a.createElement(Fa,{attachmentId:i,attachmentCode:c,onConfirm:function(e){return g(i,e,r)}})),f.a.createElement(H.a,{p:1,className:o.icon},d===n.NEXTCLOUD?f.a.createElement("a",{target:"_blank",rel:"noreferrer",href:m,className:o.link},f.a.createElement(fa.a,null)):f.a.createElement(fa.a,{style:{cursor:"pointer"},onClick:function(){return p(i,null,!0)}})),f.a.createElement(H.a,{className:o.boxAttachmentInfoAction},f.a.createElement(pe.a,{"aria-label":"delete",onClick:function(){return a(i)},disableRipple:!0},f.a.createElement(tt.a,null))))},Wa=Object(Ee.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{border:"0 solid black",height:"726px"},border:{border:1,borderTop:0,borderRight:0,borderStyle:"solid",borderColor:e.palette.action.disabled},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},gridContainer:{border:"0 solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxAttachment:{padding:e.spacing(1)},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},boxButtonAttachment:{},buttonAttachment:{width:"100%",marginTop:e.spacing(2),height:"50px",textTransform:"none"},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},highlight:{color:"#efb868",fontWeight:600}}})),qa=function(e){var t=e.changeTab,a=Object(y.c)().t,n=Object(p.useState)(!1),r=Object(P.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)(!1),l=Object(P.a)(c,2),s=l[0],d=l[1],u=Object(p.useState)(!1),m=Object(P.a)(u,2),b=m[0],g=m[1],h=sa(),v=h.attachments,E=h.deleteAttachment,x=h.allClouds,O=h.allReferenceType,k=v.filter((function(e){return e.file.cloudType===x.NEXTCLOUD})),j=v.filter((function(e){return e.file.cloudType===x.ADHOC})),C=Wa(),w=O.TASK,A=function(e){E(e,w)};return f.a.createElement(f.a.Fragment,null,f.a.createElement(K.a,{maxSnack:10,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:B.a}),f.a.createElement(Ue.a,{utils:Ce.a},f.a.createElement(wa,{onClose:function(){return d(!1)},open:s,referenceType:w}),f.a.createElement(Ta,{onClose:function(){return g(!1)},open:b,referenceType:w}),f.a.createElement(H.a,{className:C.boxGrid},f.a.createElement(we.a,{container:!0,className:C.gridContainer,spacing:1},f.a.createElement(we.a,{item:!0,xs:6,classes:{item:C.item}},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:C.containerInfo},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:C.containerInfoScroll},f.a.createElement(H.a,{p:1},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.einetAttachments",{count:k.length}))),f.a.createElement(H.a,{className:C.boxAttachment},null===k||void 0===k?void 0:k.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(Va,{key:e.id,referenceType:w,attachment:e,index:t+1,size:v.length,handleDelete:A,allClouds:x})}))),f.a.createElement(H.a,{p:1},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.adhocAttachments",{count:j.length}))),f.a.createElement(H.a,{className:C.boxAttachment},null===j||void 0===j?void 0:j.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(Va,{key:e.id,attachment:e,index:t+1,size:j.length,handleDelete:A,allClouds:x})})))))),f.a.createElement(we.a,{item:!0,xs:6,classes:{item:C.item}},f.a.createElement(ma,{onClose:function(e){i(!o),"dhoc"===e?d(!0):"elcloud"===e&&g(!0)},open:o}),f.a.createElement(H.a,{className:C.boxEmptyActionContainer},f.a.createElement(H.a,{className:"boxIcon"},f.a.createElement(la.a,null)),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},a("entities.creation.attachment.addAttachment"))),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textSecondary"},f.a.createElement(y.a,{t:a,i18nKey:"entities.creation.attachment.addAttachmentDescription"},[f.a.createElement("span",{key:0,className:C.highlight})]))),f.a.createElement(H.a,{className:C.boxButtonAttachment},f.a.createElement(Ae.a,{size:"large",startIcon:f.a.createElement(De.a,null),variant:"contained",className:C.buttonAttachment,onClick:function(){return i(!0)},disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},a("entities.creation.attachment.addButton"))))))),f.a.createElement(H.a,{p:2,border:0,textAlign:"center",className:C.boxButtons},f.a.createElement(Ae.a,{size:"large",type:"button",onClick:function(e){return t(e,0)},startIcon:f.a.createElement(Ie.a,null),variant:"outlined",disabled:!0,disableRipple:!0,className:C.button},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},a("entities.creation.buttons.previous"))),f.a.createElement(Ae.a,{size:"large",onClick:function(e){return t(e,4)},endIcon:f.a.createElement(Me.a,null),variant:"outlined",className:C.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},a("entities.creation.buttons.next")))))))},Ga=a(233),_a=a.n(Ga),Ka=a(39),Ja=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),r=Object(l.a)(Object(l.a)({},V()),{},{method:"GET"}),e.abrupt("return",W(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(M.a)(R.a.mark((function e(t,a,n){var r,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/notes"),o=Object(l.a)(Object(l.a)({},V()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",W(r,o));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Za=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/notes/").concat(a),r=Object(l.a)(Object(l.a)({},V()),{},{method:"DELETE"}),e.abrupt("return",W(n,r,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Xa=function(){var e=Object(p.useContext)(ce),t=Object(P.a)(e,2),a=t[0],n=t[1],r=ie().setLoading,o=Object(y.c)().t,i=a.serviceUrl,c=a.useMock,s=be().task,d=Y(),u=d.setError,m=d.setMessage,b=function(){var e=Object(M.a)(R.a.mark((function e(t){var d,b,p,f;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=8;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(t)}))}),1500);case 5:return d=e.sent,n((function(e){return{notes:[].concat(Object(Ka.a)(e.notes),[d]),message:o("message.noteCreated",{id:99})}})),e.abrupt("return",99);case 8:return e.next=10,Ya(i,s.id,t.description);case 10:if(!(b=e.sent).payload.id){e.next=18;break}return e.next=14,Ja(i,s.id);case 14:p=e.sent,(f=p.payload).forEach((function(e){return console.table(e)})),n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:f,message:o("message.noteCreated",{id:b.payload.id})})}));case 18:return m(o("message.noteCreated",{id:b.payload.id})),e.abrupt("return",b.payload.id);case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),u(o("error.dataLoading"));case 27:return e.prev=27,r(!1),e.finish(27);case 30:return e.abrupt("return",null);case 31:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(M.a)(R.a.mark((function e(t){var d,b,p;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(!0),!c){e.next=9;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e(a.notes.filter((function(e){return e.id!==t})))}))}),1500);case 5:return d=e.sent,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:d,message:o("message.noteDeleted",{id:t})})})),m(o("message.noteDeleted",{id:t})),e.abrupt("return",99);case 9:return e.next=11,Za(i,t);case 11:return e.next=13,Ja(i,s.id);case 13:return b=e.sent,p=b.payload,n((function(e){return Object(l.a)(Object(l.a)({},e),{},{notes:p,message:o("message.noteDeleted",{id:t})})})),m(o("message.noteDeleted",{id:t})),e.abrupt("return",null);case 20:e.prev=20,e.t0=e.catch(0),console.error("error",e.t0),n(Object(l.a)(Object(l.a)({},a),{},{error:o("error.dataLoading"),message:null})),u(o("error.dataLoading"));case 25:return e.prev=25,r(!1),e.finish(25);case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[0,20,25,28]])})));return function(t){return e.apply(this,arguments)}}();return{notes:a.notes,postNote:b,deleteNote:f,error:a.error,message:a.message,clearError:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:null})}))},clearMessage:function(){return n((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:null})}))}}},$a=a(229),Qa=a.n($a),en=Object(Ee.a)((function(e){return{dialog:{"& .MuiDialog-paper":{minHeight:500,position:"absolute",top:"20%"}},dialogTitle:{textAlign:"left",textTransform:"capitalize"},dialogContent:{overflow:"hidden","& .MuiDialogContent-root":{overflow:"hidden"}},boxEditor:{position:"relative",minHeight:400,borderRadius:4,outline:"none","& .se-toolbar.sun-editor-common":{border:1,borderStyle:"solid",borderColor:"#f6f7f9",position:"absolute",bottom:-60,width:200,backgroundColor:"#f6f7f9",borderRadius:4,outline:"none",padding:0},"& .sun-editor":{borderRadius:4},"& .sun-editor .se-container":{borderRadius:4,outline:"none"},"& .sun-editor .se-wrapper":{borderRadius:4},"& .sun-editor .se-resizing-bar":{borderBottomLeftRadius:4,borderBottomRightRadius:4}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},iconButton:{padding:e.spacing(1)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},dialogActions:{border:"0 solid red",padding:0,position:"relative",top:-90,paddingRight:10},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),tn=function(e){return f.a.createElement(pt.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(U.a,e))},an={mode:"classic",defaultTag:"div",height:"auto",minHeight:"100px",maxHeight:"250px",showPathLabel:!1,toolbarContainer:"#custom_toolbar",rtl:!1,charCounter:!0,charCounterType:"char",maxCharCount:"500",imageResizing:!1,imageHeightShow:!1,imageFileInput:!1,imageUrlInput:!1,videoResizing:!1,videoHeightShow:!1,videoFileInput:!1,videoUrlInput:!1,videoRatioShow:!1,audioUrlInput:!1,tabDisable:!1,shortcutsHint:!1,buttonList:[["bold","underline","italic","align","link"]]},nn=function(e){var t=e.open,a=e.handleClose,n=e.handleAddNote,r=Object(y.c)().t,o=Object(st.a)(),i=(Object(dt.a)(o.breakpoints.down("sm")),en()),c=Object(p.useRef)(null),l=Object(p.useState)(""),s=Object(P.a)(l,2),d=s[0],u=s[1];return f.a.createElement(at.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:function(){return a()},PaperComponent:tn,disableEnforceFocus:!0,"aria-labelledby":"form-dialog-title",className:i.dialog},f.a.createElement(nt.a,{className:i.dialogTitle,id:"form-dialog-title",onClose:function(){return a()}},f.a.createElement("div",null,r("entities.creation.dialog.note.title")),f.a.createElement(pe.a,{"aria-label":"close",className:i.closeButton,onClick:function(){return a()}},f.a.createElement(ge.a,null))),f.a.createElement(rt.a,{className:i.dialogContent},f.a.createElement(H.a,{className:i.boxEditor},f.a.createElement(Qa.a,{height:400,name:"nota",ref:c,placeholder:r("entities.creation.dialog.note.placeholder"),lang:"it",autoFocus:!0,setOptions:an,onChange:function(e){u(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}}))),f.a.createElement(lt.a,{className:i.dialogActions},f.a.createElement(Ae.a,{onClick:function(){if(n){var e=d.replaceAll("<p>","<div>").replaceAll("</p>","</div>");n(e.replace(/[\u200B\u0000-\u001F\u007F-\u009F]/g,""))}a()},className:i.button},r("entities.creation.dialog.note.buttonPublish"))))},rn=a(794),on=a(779),cn=a(232),ln=a(230),sn=Object(Ee.a)((function(e){return{boxNoteInfoContainer:{border:"0 solid red"},boxNoteInfoAction:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between",color:e.palette.action.disabled},boxNoteInfoText:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:4,padding:e.spacing(1)},boxNoteInfoUser:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start",alignContent:"flex-start"}}})),dn=function(e){var t=e.note,a=e.index,n=e.size,r=e.handleDelete,o=Object(y.c)().t,i=sn(),c=t.id,l=t.createdDate,s=t.createdBy;return f.a.createElement(H.a,{className:i.boxNoteInfoContainer},f.a.createElement(H.a,{className:i.boxNoteInfoAction},f.a.createElement(Se.a,{variant:"body1"},o("entities.creation.note.info",{index:a,size:n})),f.a.createElement(pe.a,{"aria-label":"delete",onClick:function(){return r(c)},disableRipple:!0},f.a.createElement(tt.a,null))),f.a.createElement(H.a,{className:i.boxNoteInfoText},f.a.createElement(Se.a,{variant:"body2",component:"div"},f.a.createElement(ln.a,{content:t.description}))),f.a.createElement(H.a,{className:i.boxNoteInfoUser},f.a.createElement(H.a,{p:1,marginRight:2},f.a.createElement(Xe.a,{alt:s})),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"caption",color:"textSecondary"},Object(rn.a)(new Date,new Date(l))<60?o("entities.creation.note.now"):Object(on.a)(new Date(l),"dd MMMM yyyy: kk:mm:ss",{locale:cn.it})),f.a.createElement(Se.a,{variant:"body2",color:"textPrimary"},s))))},un=Object(Ee.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:e.spacing(.5)},item:{border:"0 solid black",height:"726px"},boxNote:{border:"0 solid black",padding:e.spacing(1)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},gridContainer:{border:"0 solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},boxButtonNote:{cursor:"not-allowed"},buttonNote:{width:"100%",marginTop:e.spacing(2),height:"50px",textTransform:"none"},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},buttonPublish:{color:"#fff",backgroundColor:"#b68902",borderColor:"#b68902","&:hover":{backgroundColor:"#b68902"}},highlight:{color:"#efb868",fontWeight:600}}})),mn=function(e){var t=e.changeTab,a=e.callback,n=Object(y.c)().t,r=Object(p.useState)(!1),o=Object(P.a)(r,2),i=o[0],c=o[1],l=un(),s=Et(),d=s.logged,u=s.users,m=be().task,b=Xa(),g=b.postNote,h=b.deleteNote,v=b.notes,E=function(){c((function(e){return!e}))},x=function(e){h(e)};return f.a.createElement(Ue.a,{utils:Ce.a},f.a.createElement(nn,{open:i,handleClose:E,handleAddNote:function(e){return function(e){var t,a,n={id:v.length+1,createdDate:"2020-12-16T09:49:05.331Z",createdBy:"".concat(null===(t=u[d])||void 0===t?void 0:t.firstname," ").concat(null===(a=u[d])||void 0===a?void 0:a.lastname),description:e};g(n)}(e)}}),f.a.createElement(H.a,{className:l.boxGrid},f.a.createElement(we.a,{container:!0,className:l.gridContainer,spacing:1},f.a.createElement(we.a,{item:!0,xs:6,classes:{item:l.item}},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:l.containerInfo},f.a.createElement(z.a,{fixed:!0,disableGutters:!0,className:l.containerInfoScroll},f.a.createElement(H.a,{className:l.boxNote},v.sort((function(e,t){return e.id>t.id?-1:1})).map((function(e,t){return f.a.createElement(dn,{key:e.id,note:e,index:t+1,size:v.length,handleDelete:x})})))))),f.a.createElement(we.a,{item:!0,xs:6,classes:{item:l.item}},f.a.createElement(H.a,{className:l.boxEmptyActionContainer},f.a.createElement(H.a,{className:"boxIcon"},f.a.createElement(_a.a,null)),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},n("entities.creation.note.addNote"))),f.a.createElement(H.a,null,f.a.createElement(Se.a,{variant:"body1",color:"textSecondary"},f.a.createElement(y.a,{t:n,i18nKey:"entities.creation.note.addNoteDescription"},[f.a.createElement("span",{key:0,className:l.highlight})]))),f.a.createElement(H.a,{className:l.boxButtonNote},f.a.createElement(Ae.a,{size:"large",startIcon:f.a.createElement(De.a,null),variant:"contained",className:l.buttonNote,onClick:E,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},n("entities.creation.note.addButton"))))))),f.a.createElement(H.a,{p:2,border:0,textAlign:"center",className:l.boxButtons},f.a.createElement(Ae.a,{size:"large",type:"button",onClick:function(e){return t(e,3)},startIcon:f.a.createElement(Ie.a,null),variant:"outlined",disabled:!0,className:l.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},n("entities.creation.buttons.previous"))),f.a.createElement(Ae.a,{size:"large",onClick:function(){a&&a(m.id)},variant:"outlined",className:"".concat(l.button," ").concat(l.buttonPublish),disableRipple:!0},f.a.createElement(Se.a,{variant:"body2"},n("entities.creation.buttons.publish"))))))};mn.defaultProps={callback:function(){}};var bn=mn,pn=Object(Ee.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled},formControl:{margin:e.spacing(1),backgroundColor:"#ffffff","& div":{height:"40px",border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},"& select":{paddingRight:[24,"!important"],color:e.palette.text.disabled},"& select option":{color:e.palette.text.primary},"& select option:first-child":{color:e.palette.text.disabled},"& select:focus":{backgroundColor:"transparent"},"& fieldset":{border:0}},selectEmpty:{marginTop:e.spacing(2)},button:{textTransform:"none",color:e.palette.text.secondary,height:"45px"}}})),fn=function(e){var t=e.store,a=e.onSubmit,n=(e.useMock,e.processModels),r=Object(p.useState)([]),o=Object(P.a)(r,2),i=o[0],c=o[1],l=Object(y.c)().t,s=Object(He.b)({mode:"all"}),d=s.register,u=s.handleSubmit,m=s.errors,b=s.setValue,g=s.formState,h=pn(),v=t.processDefinitionId;return Object(p.useEffect)((function(){c(n.map((function(e){return{id:e,value:e}}))),v&&b("processDefinitionId",v)}),[b,v]),f.a.createElement("form",{onSubmit:u(a)},f.a.createElement("input",{type:"hidden",name:"step",defaultValue:1,ref:d}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"task",ref:d}),f.a.createElement(H.a,{className:h.boxGrid},f.a.createElement(H.a,{border:0,width:1,my:20},f.a.createElement(H.a,{border:0,py:2,width:"50%",mx:"auto"},f.a.createElement(H.a,{p:4,border:0},f.a.createElement(Se.a,{variant:"subtitle2",color:"textPrimary"},l("entities.creation.setup.title"))),f.a.createElement(H.a,{p:2},f.a.createElement(H.a,{px:2,border:0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},l("entities.creation.setup.processModel"))),f.a.createElement(H.a,null,f.a.createElement(Ea,{register:d({required:{value:!0,message:l("validation.required")}}),name:"processDefinitionId",initialValue:Object(_.get)(t,"processDefinitionId",""),emptyOption:l("entities.creation.setup.processModelPlaceholder"),options:i,errors:m}))))),f.a.createElement(H.a,{borderTop:1,width:1,borderColor:"rgba(0, 0, 0, 0.12)"},f.a.createElement(H.a,{border:0,py:2,paddingRight:"32px",width:"50%",mx:"auto",textAlign:"right"},f.a.createElement(Ae.a,{size:"large",type:"submit",endIcon:f.a.createElement(Me.a,null),variant:"outlined",className:h.button,disabled:g.isSubmitting,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},l("entities.creation.buttons.next")))))))};fn.defaultProps={useMock:!1};var gn=fn,hn=Object(Ee.a)((function(e){return{boxGrid:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative",padding:[[e.spacing(.5),e.spacing(1)]]},item:{height:"726px"},itemContainer:{minHeight:"500px"},containerRole:{border:"0 solid black"},gridContainer:{border:"0px solid red"},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid black",marginBottom:e.spacing(2)},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},boxButtons:{border:"0 solid black",margin:0,bottom:0},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4),height:"45px"},avatar:{width:e.spacing(7),height:e.spacing(7)},inputMultiline:{paddingTop:24,paddingBottom:24,paddingLeft:14,paddingRight:14}}})),vn=["responsible","accountable","consulted","informed"],En=function(e){var t=e.onSubmit,a=e.changeTab,n=e.store,r=Object(y.c)().t,o=Object(He.b)({mode:"all",reValidateMode:"onChange"}),i=o.register,c=o.unregister,s=o.handleSubmit,d=o.errors,u=o.watch,m=o.control,b=o.setValue,g=o.clearErrors,h=hn(),v=Et(),E=v.users,O=v.fetchUser,k=Object(p.useMemo)((function(){return[{id:"low",value:r("entities.creation.taskDefinition.low")},{id:"medium",value:r("entities.creation.taskDefinition.medium")},{id:"high",value:r("entities.creation.taskDefinition.high")}]})),j=Object(p.useState)(!1),C=Object(P.a)(j,2),w=C[0],A=C[1],S=Object(p.useState)(null),N=Object(P.a)(S,2),D=N[0],T=N[1],I=Object(p.useState)(),R=Object(P.a)(I,2),M=R[0],B=R[1];Object(p.useEffect)((function(){return vn.forEach((function(e){i({name:e},{required:"responsible"===e})})),function(){vn.forEach((function(e){return c(e)}))}}),[i]);var U=function(e){e&&T(e),A((function(e){return!e}))};return Object(p.useEffect)((function(){O()}),[]),Object(p.useEffect)((function(){if(n){var e=vn.filter((function(e){return n[e]})).reduce((function(e,t){return T(t),b(t,n[t]),e[t]=Object(l.a)({id:n[t],selected:!0},E[n[t]]),e}),{});B((function(t){return Object(l.a)(Object(l.a)({},t),e)}))}}),[n]),Object(p.useEffect)((function(){if(u("startDate")){var e=Object(ze.a)(u("startDate"),{days:15});b("endDate",e)}}),[u("startDate")]),f.a.createElement(Ue.a,{utils:Ce.a,locale:Fe.a},f.a.createElement("form",{onSubmit:s(t)},w?f.a.createElement(Mt,{open:w,handleClose:U,handleUserSelected:function(e){B((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(x.a)({},D,Object(l.a)(Object(l.a)({},e),{},{selected:!0})))})),b(D,e.fiscalCode.toUpperCase()),g(D)},usersSelected:M,role:D}):null,f.a.createElement("input",{type:"hidden",name:"step",defaultValue:2,ref:i}),f.a.createElement("input",{type:"hidden",name:"target",defaultValue:"actions",ref:i}),f.a.createElement(H.a,{className:h.boxGrid},f.a.createElement(we.a,{container:!0,className:h.gridContainer,spacing:1},f.a.createElement(we.a,{item:!0,xs:6,classes:{item:h.item}},f.a.createElement(we.a,{container:!0},f.a.createElement(we.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.task")},f.a.createElement(ea,{name:"title",placeholder:r("entities.creation.taskDefinition.taskPlaceholder"),unregister:c,register:i({required:{value:!0,message:r("validation.required")},maxLength:{value:125,message:r("validation.maxLenght",{maxLength:125})}}),watch:u,setValue:b,errors:d,showCountCaracthers:!0,countCaracthers:125,initialValue:Object(_.get)(n,"title")}))),f.a.createElement(we.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(H.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",alignContent:"flex-start"},f.a.createElement(H.a,{paddingRight:1},f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.startDate")},f.a.createElement(H.a,{border:0},f.a.createElement(zt,{control:m,name:"startDate",setValue:b,format:"dd MMMM yyyy",rules:{required:{value:!0,message:r("validation.required")}},errors:d,initialValue:Object(_.get)(n,"startDate")})))),f.a.createElement(H.a,null,f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.endDate")},f.a.createElement(H.a,{border:0},f.a.createElement(zt,{control:m,name:"endDate",setValue:b,format:"dd MMMM yyyy",rules:{required:{value:!0,message:r("validation.required")}},errors:d,initialValue:Object(_.get)(n,"endDate"),minDate:Object(ze.a)(u("startDate"),{days:1})})))))),f.a.createElement(we.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.priority")},f.a.createElement(Ea,{register:i({required:{value:!0,message:r("validation.required")}}),emptyOption:r("entities.creation.taskDefinition.priorityPlaceholder"),name:"priority",options:k,errors:d,initialValue:Object(_.get)(n,"priority")}))),f.a.createElement(we.a,{item:!0,xs:12,className:h.boxContainer},f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.description")},f.a.createElement(ea,{name:"description",placeholder:r("entities.creation.taskDefinition.descriptionPlaceholder"),register:i({required:{value:!0,message:r("validation.required")},maxLength:{value:500,message:r("validation.maxLength",{maxLength:500})}}),watch:u,setValue:b,errors:d,multiline:!0,rows:6,rowsMax:20,showCountCaracthers:!0,countCaracthers:500,initialValue:Object(_.get)(n,"description"),cssClass:h.inputMultiline}))))),f.a.createElement(we.a,{item:!0,xs:6,classes:{item:h.item}},f.a.createElement(we.a,{container:!0},vn.map((function(e){var t,a,n,o,i;return f.a.createElement(we.a,{key:e,item:!0,xs:12,className:h.boxContainer},f.a.createElement(Lt,{title:r("entities.creation.taskDefinition.".concat(e))},f.a.createElement(H.a,{className:"".concat(h.borderBox," ").concat(d[e]?"error":""),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"flex-start",alignItems:"center"},f.a.createElement(H.a,{marginRight:2},u(e)?f.a.createElement(Xe.a,{className:h.avatar,alt:null===(t=M[e])||void 0===t?void 0:t.name,src:(null===(a=M[e])||void 0===a?void 0:a.image)||""}):f.a.createElement(pe.a,{fontSize:"large",className:h.boxAdd,onClick:function(){return U(e)}},f.a.createElement(De.a,{className:h.iconAdd}))),f.a.createElement(H.a,{flexGrow:1},u(e)?f.a.createElement(Se.a,{variant:"body1",color:"textPrimary"},"".concat(null===(n=M[e])||void 0===n?void 0:n.firstname," ").concat(null===(o=M[e])||void 0===o?void 0:o.lastname)):null,f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},u(e)?null===(i=M[e])||void 0===i?void 0:i.role:r("entities.creation.taskDefinition.assignRole"))),u(e)?f.a.createElement(H.a,null,f.a.createElement(pe.a,{fontSize:"large",onClick:function(){return U(e)}},f.a.createElement(Qe.a,{className:h.iconAdd})),"responsible"!==e?f.a.createElement(pe.a,{fontSize:"large",onClick:function(){return function(e){b(e,void 0),T(e);var t=Object(l.a)({},M);delete t[e],B(t)}(e)}},f.a.createElement(tt.a,{className:h.iconAdd})):null):null),d[e]?f.a.createElement(H.a,{marginTop:"3px",marginLeft:"14px"},f.a.createElement(Se.a,{variant:"caption",color:"error",align:"left"},r("validation.required"))):null))}))))),f.a.createElement(H.a,{p:2,border:0,textAlign:"center",className:h.boxButtons},f.a.createElement(Ae.a,{size:"large",type:"button",onClick:function(e){return a(e,0)},startIcon:f.a.createElement(Ie.a,null),variant:"outlined",className:h.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},r("entities.creation.buttons.previous"))),f.a.createElement(Ae.a,{size:"large",type:"submit",endIcon:f.a.createElement(Me.a,null),variant:"outlined",className:h.button,disableRipple:!0},f.a.createElement(Se.a,{variant:"body2",color:"textSecondary"},r("entities.creation.buttons.next")))))))},xn=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},On=function(e){var t=e.keycloak,a=e.serviceUrl,n=e.serviceUrlAttachments,r=e.useMock,o=e.callback,i=Object(p.useState)([]),c=Object(P.a)(i,2),s=c[0],d=c[1],u=Object(p.useState)(-1),m=Object(P.a)(u,2),b=m[0],g=m[1],h=Object(y.c)().t,v=be(),E=v.task,x=v.createTask,O=v.updateTask,k=Y(),j=k.error,C=k.message,w=k.clearError,A=k.clearMessage,S=ye(),N=je(),D=ke(),T=function(e,t){g(t)},I=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,o,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&(a.preventDefault(),a.stopPropagation()),n=t.target,r=t.action,o=Object(_.omit)(t,"step","target","action"),O(o),"submit"!==r){e.next=22;break}e.t0=n,e.next="task"===e.t0?8:"note"===e.t0?17:19;break;case 8:return(i=Object(l.a)(Object(l.a)({},E),{},{actions:t.actions})).accountable=i.accountable||null,i.consulted=i.consulted||null,i.informed=i.informed||null,e.next=14,x(i);case 14:return e.sent&&g(parseInt(t.step,10)),e.abrupt("break",20);case 17:return g(parseInt(t.step,10)),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:e.next=23;break;case 22:g(parseInt(t.step,10));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),H=ie().isLoading;return Object(p.useEffect)((function(){G(a).then(function(){var e=Object(M.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.payload),1===t.payload.length?(O({processDefinitionId:t.payload[0]}),g(1)):g(0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),f.a.createElement(f.a.Fragment,null,f.a.createElement(K.a,{maxSnack:10,anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:B.a},f.a.createElement(ve,{message:C,callback:A,status:"success"}),f.a.createElement(ve,{message:j,callback:w,status:"error"})),f.a.createElement(U.a,{elevation:5},H?f.a.createElement(Oe,null):null,f.a.createElement(z.a,{maxWidth:"xl",disableGutters:!0,className:S.container},f.a.createElement(L.a,{value:b,onChange:T,variant:"fullWidth","aria-label":"tabs creation",classes:D},f.a.createElement(F.a,Object.assign({label:h("entities.creation.tabs.0")},xn(0),{classes:N,disabled:b>0})),f.a.createElement(F.a,Object.assign({label:h("entities.creation.tabs.1")},xn(1),{classes:N,disabled:b<=0||b>1})),f.a.createElement(F.a,Object.assign({label:h("entities.creation.tabs.2")},xn(2),{classes:N,disabled:b<=1||b>2})),f.a.createElement(F.a,Object.assign({label:h("entities.creation.tabs.3")},xn(2),{classes:N,disabled:b<=2||b>2})),f.a.createElement(F.a,Object.assign({label:h("entities.creation.tabs.4")},xn(2),{classes:N,disabled:b<=3}))),f.a.createElement(yn,{value:b,index:0},f.a.createElement(gn,{store:E,processModels:s,onSubmit:I,useMock:!0})),f.a.createElement(yn,{value:b,index:1},f.a.createElement(En,{store:E,onSubmit:I,changeTab:T})),f.a.createElement(yn,{value:b,index:2},f.a.createElement(ia,{onSubmit:I,changeTab:T})),f.a.createElement(yn,{value:b,index:3},f.a.createElement(re,{keycloak:t,serviceUrl:a,serviceUrlAttachments:n,useMock:r},f.a.createElement(qa,{changeTab:T}))),f.a.createElement(yn,{value:b,index:4},f.a.createElement(se,{keycloak:t,serviceUrl:a,useMock:r},f.a.createElement(bn,{changeTab:T,callback:o}))))))};On.defaultProps={keycloak:{},useMock:!1,callback:function(){}};var yn=function(e){var t=e.children,a=e.value,n=e.index,r=Object(T.a)(e,["children","value","index"]);return f.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),a===n&&f.a.createElement(H.a,{p:0},t))},kn=On,jn=function(e){var t=e.children,a=Object(p.useState)({loading:!1}),n=Object(P.a)(a,2),r=n[0],o=n[1];return f.a.createElement(oe.Provider,{value:[r,o]},t)},Cn=function(e){var t=e.children,a=Object(p.useState)({error:null,message:null}),n=Object(P.a)(a,2),r=n[0],o=n[1];return f.a.createElement(J.Provider,{value:[r,o]},t)},wn=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.useMock,o=Object(p.useState)({task:{},actions:[],error:null,message:null,keycloak:a,serviceUrl:n,useMock:r}),i=Object(P.a)(o,2),c=i[0],s=i[1];return Object(p.useEffect)((function(){a.initialized&&a.authenticated&&s((function(e){return Object(l.a)(Object(l.a)({},e),{},{keycloak:a})}))}),[a]),f.a.createElement(me.Provider,{value:[c,s]}," ",t," ")},An=function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.useMock,o=Object(p.useState)({logged:null,users:null,vertexId:null,vertexShortName:null,pagination:{totalPages:0,totalElements:0,numberOfElements:0,number:0,size:0,first:!0,last:!0},useMock:r,serviceUrl:n,error:null,message:null}),i=Object(P.a)(o,2),c=i[0],s=i[1],d=function e(t){return t?t.type&&1===t.type.id?{vertexId:t.id,vertexShortName:t.shortName}:e(t.parentEdo):null};return Object(p.useEffect)((function(){var e=a.initialized,t=a.authenticated;e&&t&&function(){var e=Object(M.a)(R.a.mark((function e(){var t,o,i,c,u,m,b;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r?(i=ht.payload[0],c="".concat(i.degree," ").concat(i.edo?"-":""," ").concat(null!==(t=null===i||void 0===i||null===(o=i.edo)||void 0===o?void 0:o.name)&&void 0!==t?t:""),u=d(i.edo),m=u.vertexId,b=u.vertexShortName,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:"malessandrini",vertexId:m,vertexShortName:b,isAdmin:!0,userIdLogged:i.id,users:Object(x.a)({},i.fiscalCode.toUpperCase(),Object(l.a)(Object(l.a)({},i),{},{role:c}))})}))):Promise.resolve(a.loadUserInfo()).then((function(e){var t=e.preferred_username;gt(n,t,!0).then((function(e){var a,n,r=e.payload,o="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:""),i=d(r.edo),c=i.vertexId,u=i.vertexShortName;s((function(e){return Object(l.a)(Object(l.a)({},e),{},{logged:t.toUpperCase(),vertexId:c,vertexShortName:u,users:Object(x.a)({},r.fiscalCode.toUpperCase(),Object(l.a)(Object(l.a)({},r),{},{role:o,hidden:!0}))})}))}))}))}catch(p){console.error("error",p)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,r]),f.a.createElement(vt.Provider,{value:[c,s]},t)};An.defaultProps={keycloak:{initialized:!1,authenticated:!1},useMock:!1};var Sn=An,Nn=function(){return window&&window.entando&&window.entando.keycloak&&Object(l.a)(Object(l.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Dn={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",serviceUrlUser:"service-url-user",serviceUrlAttachments:"service-url-attachments",cssUrl:"css-url",useMock:"use-mock",refresh:"refresh"},Tn=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).keycloak=Nn(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(Dn).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===Dn.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.getAttribute(Dn.cssUrl),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href","".concat(t,"/suneditor.min.css"));var n=this.attachShadow({mode:"open"});n.appendChild(a),n.appendChild(this.container),this.jss=Object(w.b)(Object(l.a)(Object(l.a)({},Object(u.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},d.itIT),this.keycloak=Object(l.a)(Object(l.a)({},Nn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=E("keycloak",(function(){e.keycloak=Object(l.a)(Object(l.a)({},Nn()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=E(v,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),D()(n)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(Dn.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(Dn.serviceUrl)||"",t=this.getAttribute(Dn.serviceUrlUser)||"",a=this.getAttribute(Dn.serviceUrlAttachments)||"",n="true"===this.getAttribute(Dn.hidden),r="true"===this.getAttribute(Dn.useMock);if(n)S.a.render(f.a.createElement(f.a.Fragment,null));else{var o=this.getAttribute(Dn.locale)||"it";C(o),S.a.render(f.a.createElement(g.Provider,{value:this.keycloak},f.a.createElement(jn,null,f.a.createElement(Cn,null,f.a.createElement(Sn,{keycloak:this.keycloak,useMock:r,serviceUrl:t},f.a.createElement(m.b,{jss:this.jss},f.a.createElement(b.a,{theme:this.muiTheme},f.a.createElement(wn,{keycloak:this.keycloak,serviceUrl:e,useMock:r},f.a.createElement(h,{keycloak:this.keycloak},f.a.createElement(kn,{keycloak:this.keycloak,serviceUrl:e,serviceUrlAttachments:a,useMock:r,callback:this.callback}))))))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(Dn)}}]),a}(Object(c.a)(HTMLElement));customElements.define("task-creation",Tn)}},[[260,1,2]]]);
//# sourceMappingURL=main.c4f1be5d.chunk.js.map