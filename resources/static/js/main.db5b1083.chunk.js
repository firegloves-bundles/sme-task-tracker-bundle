(this["webpackJsonptask-update-widget"]=this["webpackJsonptask-update-widget"]||[]).push([[0],{125:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore durante la connessione al server","invalidDateMessage":"Formato della data non valido"},"message":{"actionUpdated":"L\'Azione e\' stata aggiornata"},"common":{"save":"Salva","dataSaved":"Task salvato/a con successo","dataDeleted":"Task eliminato/a con successo","notAuthenticated":"L\'utente non \xe8 autenticato.","selectFile":"Carica nuovo file","selectImageFile":"Carica nuova immagine","download":"Scarica","cancel":"Annulla","select":"Seleziona","delete":"Elimina","yes":"Si","no":"No"},"validation":{"required":"Il campo \xe8 obbligatorio","maxLength":"La lunghezza massima \xe8 di {{maxLength}}","maxLenght":""},"entities":{"update":{"actions":{"task":"Aggiornamento Task - <0>{{count}}</0>","add":"Aggiungi Azione","addSubaction":"Aggiungi Sottoazione","updateTaskAction":"Visualizza o Aggiungi Azioni al Task","updateTaskActionDescription":"Seleziona un azione o sotto azione oppure clicca sui bottoni per aggiungerne","action":"Azione","actionPlaceholder":"Dai un nome all\'azione...","subAction":"Sottoazione","subActionPlaceholder":"Dai un nome alla sottoazione...","description":"Descrizione","descriptionPlaceholder":"Inserisci una descrizione ...","end":"Entro","automatic":"Automatico","yes":"Si","no":"No","completion":"Completamento","assignRole":"Assegna il Ruolo","responsible":"RESPONSIBLE","accountable":"ACCOUNTABLE","consulted":"CONSULTED","informed":"INFORMED","popper":{"title":"Completamento","description":"Se automatico e\' settato su \'Si\'\\n l\'azione principale si completa non\\n appena le sottoazioni vengono completate."}},"buttons":{"update":"Aggiorna","next":"Avanti","previous":"Indietro"},"dialog":{"users":{"title":"Assegna","button":"Assegna ruolo","buttonClose":"Chiudi","search":"Cerca un utente...","assign":"Assegna a me"}}},"table":{"rowSelected":"","empty":"","pagination":{"rows":"","rowsPerPage":"","previous":"","next":""}}}}')},126:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"save":"Save","dataSaved":"Task successfully saved","dataDeleted":"Task successfully deleted","notAuthenticated":"User is not authenticated.","selectFile":"Upload new file","selectImageFile":"Upload new image","download":"Download","cancel":"Cancel","delete":"Delete","yes":"Yes","no":"No"},"validation":{"required":"{{field}} is required"},"entities":{"task":{"deleteDialog":{"title":"Delete task","description":"Are you sure?"},"notFound":"Task not found","deleted":"Task deleted","id":"ID","name":"entities.task.name","tabs":["I miei task","Monitora Task","Task Completati"]},"filter":{"all":"Tutti ({{count}})","creator":"Creator ({{count}})","responsible":"Responsible ({{count}})","accountable":"Accountable ({{count}})","consulted":"Consulted ({{count}})","informed":"Informed ({{count}})"},"table":{"empty":"Tabella vuota"},"priority":{"low":"Bassa","medium":"Media","high":"Alta"}}}')},171:function(e,t,a){e.exports=a(196)},196:function(e,t,a){"use strict";a.r(t);var n=a(116),r=a(117),i=a(118),o=a(148),l=a(149),c=a(4),s=a(146),d=a(144),u=a(247),m=a(255),b=a(244),p=a(0),f=a.n(p),h=f.a.createContext(null),g="task.detail",v=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},O=a(19),E=a(102),y=a(21),j={it:a(125),en:a(126)},x=Object.keys(j).reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},Object(O.a)({},t,Object(O.a)({},"translation",j[t])))}),{}),k=(E.a.t,function(e){!function(e,t){E.a.use(y.b).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:x,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"it")}),C=a(27),w=a(18),A=a.n(w),S=a(127),D=a.n(S),U=a(9),P=a.n(U),I=a(15),N=a(199),T=a(243),R=a(246),M=a(70),z=function(e){var t=e.children,a=e.keycloak;return a&&a.initialized&&a.authenticated?t:null},B=a(17),F=a(11),L=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},V=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r,i=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>2&&void 0!==i[2])||i[2],e.next=3,fetch(t,a);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",{});case 6:if(!(r.status>=200&&r.status<300)){e.next=10;break}if(!n){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.abrupt("return",{});case 10:return e.abrupt("return",Promise.reject(new Error(r.statusText||r.status)));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a),r=Object(c.a)(Object(c.a)({},L()),{},{method:"GET"}),e.abrupt("return",V(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(P.a.mark((function e(t,a,n){var r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat("tasks","/").concat(a,"/actions/bulk"),i=Object(c.a)(Object(c.a)({},L()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",V(r,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("tasks","/").concat(a,"/actions"),r=Object(c.a)(Object(c.a)({},L()),{},{method:"GET"}),e.abrupt("return",V(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r,i,o,l=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:"action",r=a.id,i="".concat(t,"/").concat("subAction"===n?"subactions":"actions","/").concat(r),o=Object(c.a)(Object(c.a)({},L()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",V(i,o,!1));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=Object(p.createContext)([{},function(){}]),J=function(){var e=Object(p.useContext)(K),t=Object(F.a)(e,1)[0];return{keycloak:t.keycloak,serviceUrl:t.serviceUrl,useMock:t.useMock}},_=Object(p.createContext)([{loading:!1},function(){}]),Y=function(){var e=Object(p.useContext)(_),t=Object(F.a)(e,2),a=t[0],n=t[1];return{isLoading:a.loading,setLoading:function(e){n({loading:e})}}},$=Object(p.createContext)([{},function(e){}]),X=function(e,t){var a=Object(p.useContext)($),n=Object(F.a)(a,2),r=n[0],i=n[1],o=Y().setLoading,l=J().useMock,s=Object(y.c)().t,d=function(){var a=Object(I.a)(P.a.mark((function a(n){var d,u,m;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o(!0),!e.initialized||!e.authenticated){a.next=19;break}if(!l){a.next=10;break}return a.next=6,new Promise((function(e){return setTimeout((function(){return e(n.flatMap((function(e){return e.id?e:Object(c.a)(Object(c.a)({},e),{},{id:99})})))}))}),1500);case 6:d=a.sent,i((function(e){return Object(c.a)(Object(c.a)({},e),{},{actions:Object(B.a)(d),message:s("message.actionUpdated")})})),a.next=19;break;case 10:return a.next=12,q(t,r.task.id,n);case 12:if(!a.sent){a.next=19;break}return a.next=16,G(t,r.task.id);case 16:u=a.sent,m=u.payload.flatMap((function(e){return e.subActions?e:Object(c.a)(Object(c.a)({},e),{},{subActions:[]})})),i((function(e){return Object(c.a)(Object(c.a)({},e),{},{actions:Object(B.a)(m),message:s("message.actionUpdated")})}));case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(0),console.error(a.t0),i(Object(c.a)(Object(c.a)({},r),{},{error:s("error.dataLoading"),message:null}));case 25:return a.prev=25,o(!1),a.finish(25);case 28:return a.abrupt("return",null);case 29:case"end":return a.stop()}}),a,null,[[0,21,25,28]])})));return function(e){return a.apply(this,arguments)}}(),u=function(){var a=Object(I.a)(P.a.mark((function a(n,l){var d,u,m;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,o(!0),!e.initialized||!e.authenticated){a.next=13;break}return a.next=5,W(t,l,n);case 5:if(!(d=a.sent)){a.next=12;break}return a.next=9,G(t,r.task.id);case 9:u=a.sent,m=u.payload.flatMap((function(e){return e.subActions?e:Object(c.a)(Object(c.a)({},e),{},{subActions:[]})})),i((function(e){return Object(c.a)(Object(c.a)({},e),{},{actions:Object(B.a)(m),message:s("message.actionUpdated")})}));case 12:return a.abrupt("return",d);case 13:a.next=19;break;case 15:a.prev=15,a.t0=a.catch(0),console.error(a.t0),i(Object(c.a)(Object(c.a)({},r),{},{error:s("error.dataLoading"),message:null}));case 19:return a.prev=19,o(!1),a.finish(19);case 22:return a.abrupt("return",null);case 23:case"end":return a.stop()}}),a,null,[[0,15,19,22]])})));return function(e,t){return a.apply(this,arguments)}}();return{task:r.task,contextActions:r.actions,addAction:d,updateAction:u,error:r.error,message:r.message,clearError:function(){return i((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:null})}))},clearMessage:function(){return i((function(e){return Object(c.a)(Object(c.a)({},e),{},{message:null})}))}}},Q=a(3),Z=a(251),ee=a(224),te=a(97),ae=a(7),ne=a(225),re=a(129),ie=a.n(re),oe=a(130),le=a.n(oe),ce=a(128),se=a.n(ce),de=a(89),ue=a.n(de),me={success:se.a,error:ie.a,info:le.a},be={success:3e3,error:5e3,info:5e3},pe=function e(t){var a=t.className,n=t.classes,r=t.status,i=t.message,o=t.onClose,l=t.anchorOrigin,c=!!i,s=r||e.INFO,d=me[s],u=be[s],m=f.a.createElement("span",{className:n.message},f.a.createElement(d,{className:Object(Q.a)(n.icon,n.iconStatus)}),i);return f.a.createElement(Z.a,{open:c,onClose:o,autoHideDuration:u,anchorOrigin:l},f.a.createElement(ee.a,{className:Object(Q.a)(n[s],a),message:m,action:[f.a.createElement(ne.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},f.a.createElement(ue.a,{className:n.icon}))]}))};pe.SUCCESS="success",pe.ERROR="error",pe.defaultProps={message:null,className:"",status:pe.INFO="info",onClose:function(){},anchorOrigin:{vertical:"bottom",horizontal:"center"}};var fe=Object(ae.a)((function(e){return{message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconStatus:{opacity:.9,marginRight:e.spacing(1)},success:{backgroundColor:te.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(pe),he=a(201),ge=Object(he.a)({spinner:{zIndex:99999,display:"inline-block",position:"absolute",top:"30%",left:"50%",width:"80px",height:"80px","& div":{transformOrigin:"40px 40px",animation:"$spinner 1.2s linear infinite"},"& div::after":{content:'" "',display:"block",position:"absolute",top:"3px",left:"37px",width:"5px",height:"18px",borderRadius:"20%",background:"currentColor"},"& div:nth-child(1)":{transform:"rotate(0deg)",animationDelay:"-1.1s"},"& div:nth-child(2)":{transform:"rotate(30deg)",animationDelay:" -1s"},"& div:nth-child(3)":{transform:"rotate(60deg)",animationDelay:" -0.9s"},"& div:nth-child(4)":{transform:"rotate(90deg)",animationDelay:" -0.8s"},"& div:nth-child(5)":{transform:"rotate(120deg)",animationDelay:" -0.7s"},"& div:nth-child(6)":{transform:"rotate(150deg)",animationDelay:" -0.6s"},"& div:nth-child(7)":{transform:"rotate(180deg)",animationDelay:" -0.5s"},"& div:nth-child(8)":{transform:"rotate(210deg)",animationDelay:" -0.4s"},"& div:nth-child(9)":{transform:"rotate(240deg)",animationDelay:" -0.3s"},"& div:nth-child(10)":{transform:"rotate(270deg)",animationDelay:" -0.2s"},"& div:nth-child(11)":{transform:"rotate(300deg)",animationDelay:" -0.1s"},"& div:nth-child(12)":{transform:"rotate(330deg)",animationDelay:" 0s"}},"@keyframes spinner":{from:{opacity:0},to:{opacity:1}}}),ve=function(){var e=ge();return f.a.createElement("div",{className:e.spinner},f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null),f.a.createElement("div",null))},Oe=a(145),Ee=a(226),ye=a(227),je=a(67),xe=a.n(je),ke=a(143),Ce=a.n(ke),we=a(142),Ae=a.n(we),Se=a(28),De=a(147),Ue=a(22),Pe=a(95),Ie=function(){var e=Object(I.a)(P.a.mark((function e(t){var a,n,r,i,o,l=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:{page:0,pageSize:10},n=l.length>2?l[2]:void 0,r=l.length>3&&void 0!==l[3]&&l[3],i="".concat(t,"/").concat("users","?informedOrConsulted=").concat(r,"&sortBy=lastname,firstname,id"),a&&(i+="&page=".concat(a.page,"&size=").concat(a.pageSize)),n&&(i+="&globalSearch=".concat(n)),o=Object(c.a)(Object(c.a)({},L()),{},{method:"GET"}),e.abrupt("return",V(i,o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("users","/fiscalCode/").concat(a),r=Object(c.a)(Object(c.a)({},L()),{},{method:"GET"}),e.abrupt("return",V(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Te={payload:{id:"426",title:"testmail103",description:"testmail100",startDate:"2021-03-11T16:35:23.272",endDate:"2021-03-26T16:35:23.272",priority:"high",responsible:"ADMIN",accountable:null,consulted:null,informed:null,creator:"ADMIN",status:"CREATED",completionPercentage:null,canComplete:!1},metadata:{canChangeTaskRoles:!0,canRemoveAttachments:!0,canRemoveNotes:!0,canChangeCompletionStatus:!0}},Re={payload:[{id:"263",title:"asd",description:"das",startDate:null,endDate:null,responsible:"ADMIN",accountable:null,consulted:null,informed:null,automaticComplete:!0,status:"CREATED",canComplete:!0,subActions:[]}],metadata:{}},Me={payload:[{id:1,firstname:"Fabrizio",lastname:"Trollo",degree:"Ten. Col.",active:!1,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"aaa1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:2,firstname:"Gabriele",lastname:"Cappio",degree:"Serg. Magg.",active:!0,edo:{id:2,name:"Reparto 1",headUser:1,defaultUser:1,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aaa4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:3,firstname:"Antonio",lastname:"Neri",degree:"Col.",active:!0,edo:{id:3,name:"Ufficio 1",headUser:1,defaultUser:1,type:{id:3,name:"Ufficio"},parentId:2,active:!0},fiscalCode:"bbb1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:4,firstname:"Gianluca",lastname:"Svedesi",degree:"Ten. Col.",active:!0,edo:{id:4,name:"Sezione 1",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:3,active:!0},fiscalCode:"bbb4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:5,firstname:"Christian",lastname:"Torquato",degree:"Serg. Magg.",active:!0,edo:{id:5,name:"Nucleo 1",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:4,active:!0},fiscalCode:"ccc1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:7,firstname:"Carlo",lastname:"Bianchi",degree:"Ten. Col.",active:!1,edo:null,fiscalCode:"ddd1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:8,firstname:"Marco",lastname:"Rossi",degree:"Cap.",active:!1,edo:null,fiscalCode:"ddd4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:9,firstname:"Davide",lastname:"Madonna",degree:"Cap.",active:!1,edo:null,fiscalCode:"eee1234",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:10,firstname:"Pasquale",lastname:"Calogero",degree:"Mar.",active:!0,edo:null,fiscalCode:"eee4321",entity:null,entityDenomination:null,email:null,armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:11,firstname:"Mario",lastname:"Bianchi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"user",entity:null,entityDenomination:null,email:"mario.bianchi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:12,firstname:"Patrizio",lastname:"Rossi",degree:"Maresciallo",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"admin",entity:null,entityDenomination:null,email:"patrizio.rossi@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:13,firstname:"Massimiliano",lastname:"Alessandrini",degree:"Ten. Col.",active:!0,edo:{id:1,name:"Vertice 1",headUser:1,defaultUser:1,type:{id:1,name:"Vertice"},parentId:null,active:!0},fiscalCode:"malessandrini",entity:null,entityDenomination:null,email:"massimiliano.alessandrini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:14,firstname:"Patrizio",lastname:"Antonucci",degree:"Maresciallo",active:!0,edo:{id:7,name:"Sezione 2",headUser:1,defaultUser:1,type:{id:4,name:"Sezione"},parentId:6,active:!0},fiscalCode:"pantonucci",entity:null,entityDenomination:null,email:"patrizio.antonucci@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:15,firstname:"Alessandro",lastname:"Iello",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"aiello",entity:null,entityDenomination:null,email:"alessandro.aiello@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:16,firstname:"Andrea",lastname:"Melia",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"amelia",entity:null,entityDenomination:null,email:"andrea.amelia@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:17,firstname:"Carmine",lastname:"Armelini",degree:"Ten. Col.",active:!0,edo:{id:10,name:"Nucleo 3",headUser:1,defaultUser:1,type:{id:5,name:"Nucleo"},parentId:7,active:!0},fiscalCode:"carmelini",entity:null,entityDenomination:null,email:"carmine.armelini@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:18,firstname:"Carlo",lastname:"Otti",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"cotti",entity:null,entityDenomination:null,email:"carlo.cotti@esercito.difesa.it",armedForce:null,dateOfBirth:null,phone:null,mobilePhone:null},{id:19,firstname:"Paolo Alberto",lastname:"Giorgi",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"grgplb66m01h501w",entity:null,entityDenomination:null,email:"paoloalberto.giorgi@esercito.difesa.it",armedForce:null,dateOfBirth:"1985-01-14",phone:"1-183-426-0757",mobilePhone:"1-302-819-5781"},{id:20,firstname:"Francesco",lastname:"Pino",degree:"Ten. Col.",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"pnifnc83l20f158q",entity:null,entityDenomination:null,email:"francesco.pino1@esercito.difesa.it",armedForce:null,dateOfBirth:"1981-01-14",phone:"1-322-644-4695",mobilePhone:"1-900-186-6912"},{id:21,firstname:"Giovanni",lastname:"Biscetti",degree:"1\xb0 Luogotenente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"giovanni.biscetti@esercito.difesa.it",armedForce:null,dateOfBirth:"1983-01-14",phone:"1-844-658-0870",mobilePhone:"1-844-658-0870"},{id:22,firstname:"Salvatore",lastname:"Di Bella",degree:"Sergente",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dblsvt87d02g273s",entity:null,entityDenomination:null,email:"salvatore.dibella@esercito.difesa.it",armedForce:null,dateOfBirth:"1984-01-14",phone:"1-795-964-4892",mobilePhone:"1-285-703-1251"},{id:23,firstname:"Giuseppe Mario",lastname:"Di Stefano",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstgpp77t06z614k",entity:null,entityDenomination:null,email:"giuseppemario.distefano@esercito.difesa.it",armedForce:null,dateOfBirth:"1990-01-14",phone:"1-798-383-5696",mobilePhone:"1-258-640-7566"},{id:24,firstname:"Domenico",lastname:"Di Stolfo",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"dstdnc63d08f631b",entity:null,entityDenomination:null,email:"domenico.distolfo@esercito.difesa.it",armedForce:null,dateOfBirth:"1988-01-14",phone:"1-218-782-9720",mobilePhone:"1-140-892-0517"},{id:25,firstname:"Giovanni",lastname:"Pirro",degree:"Sergente Maggiore",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"prrgnn83a20f839l",entity:null,entityDenomination:null,email:"giovanni.pirro@esercito.difesa.it",armedForce:null,dateOfBirth:"1980-01-14",phone:"1-552-798-4714",mobilePhone:"1-374-458-3607"},{id:26,firstname:"Fabio",lastname:"Ubaldi",degree:"Tenente Colonnello",active:!0,edo:{id:11,name:"Reparto  V - Alpini",headUser:11,defaultUser:11,type:{id:2,name:"Reparto"},parentId:1,active:!0},fiscalCode:"bldfba63b22h501q",entity:null,entityDenomination:null,email:"fabio.ubaldi@esercito.difesa.it",armedForce:null,dateOfBirth:"1986-01-14",phone:"1-839-254-4819",mobilePhone:"1-890-595-8375"}],totalPages:1,totalElements:25,numberOfElements:25,number:0,size:30,first:!0,last:!0},ze=Object(p.createContext)([{},function(){}]),Be=function(){var e=Object(p.useContext)(ze),t=Object(F.a)(e,2),a=t[0],n=t[1],r=Object(y.c)().t,i=J().useMock,o=a.serviceUrl,l=a.logged,s=a.usersPresent,d=function(e){n((function(t){return Object(c.a)(Object(c.a)({},t),{},{users:e})}))},u=function(){var e=Object(I.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?(a=Me.payload.reduce((function(e,t){var a,n,r=t,i="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[r.fiscalCode.toUpperCase()]=Object(c.a)(Object(c.a)({},r),{},{role:i}),e}),{}),d(a)):(n=s.map((function(e){return Ne(o,e,e===t)})),Promise.all(n).then((function(e){var t=e.reduce((function(e,t){var a,n,r=t.payload,i="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[r.fiscalCode.toUpperCase()]=Object(c.a)(Object(c.a)({},r),{},{role:i}),e}),{});d(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(I.a)(P.a.mark((function e(t,s,d){var u,m,b,p,f,h,g,v,E,y,j,x,k;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=7;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e(Me)}))}),100);case 4:u=e.sent,e.next=10;break;case 7:return e.next=9,Ie(o,t,s,d);case 9:u=e.sent;case 10:b=(m=u).payload,p=m.totalPages,f=m.totalElements,h=m.numberOfElements,g=m.number,v=m.size,E=m.first,y=m.last,b&&(j=b.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(c.a)(Object(c.a)({},t),{},{role:r}),e}),{}),x=a.users[l],k=Object.keys(j).find((function(e){var t;return(null===(t=j[e])||void 0===t?void 0:t.fiscalCode.toUpperCase())===l})),n((function(e){return Object(c.a)(Object(c.a)({},e),{},{users:k?j:Object(c.a)(Object(c.a)({},j),{},Object(O.a)({},null===k||void 0===k?void 0:k.fiscalCode.toUpperCase(),x)),pagination:{totalPages:p,totalElements:f,numberOfElements:h,number:g,size:v,first:E,last:y}})}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),n(Object(c.a)(Object(c.a)({},a),{},{error:r("error.dataLoading"),message:null}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a,n){return e.apply(this,arguments)}}();return{logged:a.logged,users:a.users,serviceUrl:a.serviceUrl,useMock:a.useMock,setUsers:d,setUsersPresent:function(e){n((function(t){return Object(c.a)(Object(c.a)({},t),{},{usersPresent:Object(B.a)(new Set(t.usersPresent.concat(e)))})}))},setPagination:function(e){return n(Object(c.a)(Object(c.a)({},a),{},{pagination:e}))},fetchUserPresent:u,fetchUser:m,setError:function(e){return n((function(t){return Object(c.a)(Object(c.a)({},t),{},{error:e})}))},clearError:function(){return n((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:null})}))},setMessage:function(e){return n((function(t){return Object(c.a)(Object(c.a)({},t),{},{message:e})}))},clearMessage:function(){return n((function(e){return Object(c.a)(Object(c.a)({},e),{},{message:null})}))}}},Fe=a(132),Le=a.n(Fe),Ve=a(131),He=a.n(Ve),qe=a(101),Ge=a.n(qe),We=Object(he.a)((function(e){return{item:{height:"726px"},border:{border:1,borderTop:0,borderRight:0,borderStyle:"solid",borderColor:e.palette.action.disabled},borderButton:{border:1,borderRight:0,borderLeft:0,borderTop:0,borderStyle:"solid",borderColor:e.palette.action.disabled},containerInfo:{height:"634px",border:0,borderColor:"green",borderStyle:"solid",overflow:"hidden",paddingRight:e.spacing(.5)},containerInfoScroll:{border:0,borderColor:"blue",borderStyle:"solid",height:"100%",overflowY:"scroll",overflowX:"hidden",boxSizing:"content-box","&::-webkit-scrollbar":{width:5},"&::-webkit-scrollbar-track":{background:"#f9fafb",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#e0e3e8",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},boxGrid:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"800px",position:"relative"},gridContainer:{border:"0 solid red",padding:e.spacing(0)},inputInfo:{border:"0 solid red"},borderBox:{minHeight:"50px",padding:e.spacing(2)},borderBoxInfo:{paddingRight:e.spacing(1)},boxActions:{border:"0 solid red",padding:e.spacing(0),"&:hover":{cursor:"pointer"}},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),marginTop:e.spacing(10),textAlign:"center","& .boxIcon":{"& .MuiSvgIcon-root":{fontSize:"3rem",color:"#aeb6c2"}}},buttonAddAction:{borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"100%",minHeight:"60px",border:"0 solid blue"},boxButtons:{border:"0 solid black",margin:0,bottom:0},button:{marginRight:e.spacing(4),marginLeft:e.spacing(4)}}})),Ke=Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled},boxCircle:{border:"0 solid red",minHeight:"60px",position:"relative"},circle:{width:"10px",height:"10px",borderRadius:"50%",border:1,borderStyle:"solid",margin:0,position:"absolute",top:"50%",left:0,transform:"translate(0, -50%)",color:"#b2b6b9"},circleSelect:{backgroundColor:"#b2b6b9"},boxAction:{width:"100%",backgroundColor:"#f4f4ec",color:"#86660b",minHeight:"60px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"center",marginBottom:e.spacing(2)},boxActionSelected:{backgroundColor:"#f5f4dc"},iconAction:{border:"0 solid red"},boxIconSubAction:{backgroundColor:"#ffffff",color:e.palette.action.disabled,marginRight:e.spacing(2),paddingLeft:e.spacing(1),minHeight:"60px","& .MuiSvgIcon-root":{paddingTop:"15px"}},boxTextAction:{border:"0 solid blue",width:"100%",textAlign:"left"},boxAddSubAction:{border:"0 solid blue",height:"50px",marginBottom:e.spacing(2)},buttonAddSubAction:{height:"100%",width:"100%",textTransform:"none"}}})),Je=function(e){var t=e.actions,a=e.handleClickAction,n=e.disabledButton,r=e.loadInfo,i=e.infoSelected,o=e.disabledEvents,l=Ke(),c=Object(y.c)().t;return t.map((function(e,t){var s,d;return f.a.createElement(R.a,{key:Object(Ue.uniqueId)("action-info_")},f.a.createElement(Ee.a,{container:!0},f.a.createElement(Ee.a,{item:!0,xs:1,classes:{item:l.item}},f.a.createElement(R.a,{className:l.boxCircle},f.a.createElement(R.a,{className:"".concat(l.circle," ")}))),f.a.createElement(Ee.a,{item:!0,xs:11,classes:{item:l.item}},f.a.createElement(R.a,{className:"".concat(l.boxAction," ").concat((null===i||void 0===i||null===(s=i.action)||void 0===s?void 0:s.id)===e.id?l.boxActionSelected:"")},f.a.createElement(R.a,{marginLeft:2,marginRight:2,className:l.iconAction},f.a.createElement(Ge.a,{fontSize:"small"})),f.a.createElement(R.a,{className:l.boxTextAction,onClick:function(){return r("action",e,t)},style:{pointerEvents:"".concat(o?"none":"auto")}},f.a.createElement(M.a,{variant:"body1",color:"textPrimary"},"".concat(e.title||"Azione"," "))))),null===e||void 0===e||null===(d=e.subActions)||void 0===d?void 0:d.map((function(e){var a;return f.a.createElement(f.a.Fragment,{key:Object(Ue.uniqueId)("sub-action_")},f.a.createElement(Ee.a,{key:Object(Ue.uniqueId)("sub-action_"),item:!0,xs:1,classes:{item:l.item}}),f.a.createElement(Ee.a,{item:!0,xs:11,classes:{item:l.item}},f.a.createElement(R.a,{className:"".concat(l.boxAction," ").concat((null===i||void 0===i||null===(a=i.action)||void 0===a?void 0:a.id)===e.id?l.boxActionSelected:"")},f.a.createElement(R.a,{className:l.boxIconSubAction},f.a.createElement(He.a,{fontSize:"small"})),f.a.createElement(R.a,{marginRight:2,className:l.iconAction},f.a.createElement(Ge.a,{fontSize:"small"})),f.a.createElement(R.a,{className:l.boxTextAction,onClick:function(){return r("subAction",e,t)},style:{pointerEvents:"".concat(o?"none":"auto")}},f.a.createElement(M.a,{variant:"body1",color:"textPrimary"},"".concat(e.title))),f.a.createElement(R.a,{marginRight:2,className:l.iconAction},f.a.createElement(Le.a,{fontSize:"small"})))))})),f.a.createElement(Ee.a,{item:!0,xs:1,classes:{item:l.item}}),f.a.createElement(Ee.a,{item:!0,xs:11,classes:{item:l.item}},f.a.createElement(R.a,{className:l.boxAddSubAction},f.a.createElement(ye.a,{variant:"outlined",type:"button",className:l.buttonAddSubAction,startIcon:f.a.createElement(xe.a,null),onMouseDown:function(){return function(e){a("subAction",e)}(t)},disabled:n},f.a.createElement(M.a,{variant:"body2",color:"textSecondary"},c("entities.update.actions.addSubaction")))))))}))},_e=a(252),Ye=a(140),$e=a.n(Ye),Xe=a(141),Qe=a.n(Xe),Ze=a(250),et=a(235),tt=a(236),at=a(253),nt=a(237),rt=a(248),it=a(238),ot=a(58),lt=a(234),ct=a(136),st=a.n(ct),dt=a(133),ut=a.n(dt),mt=a(228),bt=a(229),pt=a(230),ft=a(231),ht=a(232),gt=a(233),vt=a(134),Ot=a(135),Et=a.n(Ot),yt=Object(he.a)((function(e){return{dialog:{"& .MuiDialog-paper":{maxHeight:550}},dialogTitle:{textAlign:"center",textTransform:"capitalize"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},role:{color:"#86660b",textTransform:"capitalize"},boxTools:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",marginBottom:e.spacing(2)},boxAssign:{marginRight:e.spacing(2)},boxInput:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderRadius:"4px",backgroundColor:"#f6f7f9"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:e.spacing(1),"&.active":{color:Et.a[500]}},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300,border:1,borderStyle:"solid",borderRadius:"4px",borderColor:e.palette.action.disabled,"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0,"&.first li.MuiListSubheader-root":{borderTop:0}},subHeader:{borderBottom:1,borderBottomStyle:"solid",borderBottomColor:e.palette.action.disabled,borderTop:1,borderTopStyle:"solid",borderTopColor:e.palette.action.disabled},radio:{"&.MuiIconButton-colorSecondary:hover":{backgroundColor:"rgba(182,137,0,0.04)"},"&.MuiRadio-colorSecondary.Mui-checked":{color:"#b68900"},"&.MuiRadio-colorSecondary.Mui-disabled":{pointerEvents:"none"}},dialogActions:{justifyContent:"space-between"},button:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}},buttonClose:{backgroundColor:"#b68900",color:"#fff",margin:e.spacing(2),textTransform:"none",minHeight:"50px",minWidth:"150px","&:disabled":{backgroundColor:"#e0e3e8"},"&:hover":{backgroundColor:"#b68900"}}}})),jt=function(e){var t=e.handleClick,a=e.search,n=e.usersSelected,r=e.role,i=Be(),o=i.logged,l=i.users,s=i.serviceUrl,d=i.setUsers,u=i.setError,m=J().useMock,b=Object(p.useState)([]),h=Object(F.a)(b,2),g=h[0],v=h[1],E=Object(p.useState)([]),j=Object(F.a)(E,2),x=j[0],k=j[1],C=Object(p.useRef)(),w=Object(y.c)().t,A=yt(),S=Object(vt.a)({fetchSize:10,scroller:C,limit:1e5}),D=S.start,U=S.end,N=S.setIsFetching,T=S.forceDonefetching,R=function(){var e=Object(I.a)(P.a.mark((function e(t,n){var i,l,d,b,p,f,h;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=n/(i=n-t)-1,!m){e.next=9;break}return e.next=6,new Promise((function(e){return setTimeout((function(){return e(Me)}),500)}));case 6:d=e.sent,e.next=12;break;case 9:return e.next=11,Ie(s,{page:l,pageSize:i},a,"consulted"===r||"informed"===r);case 11:d=e.sent;case 12:return p=(b=d).payload,f=b.totalPages,h=b.number,f<h&&T(),e.abrupt("return",p.reduce((function(e,t){var a,n,r="".concat(t.degree," ").concat(t.edo?"-":""," ").concat(null!==(a=null===t||void 0===t||null===(n=t.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");return e[t.fiscalCode.toUpperCase()]=Object(c.a)(Object(c.a)({},t),{},{role:r,hidden:t.fiscalCode.toUpperCase()===o}),e}),{}));case 17:e.prev=17,e.t0=e.catch(0),u(w("error.dataLoading"));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){return k([]),function(){d(Object(O.a)({},o,l[o]))}}),[]),Object(p.useEffect)((function(){D!==U&&(N(!0),R(D,U).then((function(e){d(Object(c.a)(Object(c.a)({},l),e)),N(!1)})))}),[D,U]),Object(p.useEffect)((function(){var e=Object.keys(l).reduce((function(e,t){return"undefined"!==t&&e.push(Object(c.a)({id:t},l[t])),e}),[]);v(function(e){var t=new Set;return e.filter((function(e){return"undefined"!==e.id})).filter((function(e){return!e.hidden})).filter((function(e){var a=e.lastname.charAt(0).toUpperCase(),n=t.has(a);return t.add(a),!n})).map((function(e){return e.lastname.charAt(0).toUpperCase()}))}(e)),k(e)}),[l]),f.a.createElement(mt.a,{className:A.list,subheader:f.a.createElement("li",null),ref:C},g.map((function(e,a){return f.a.createElement("li",{key:"section-".concat(e),className:A.listSection},f.a.createElement("ul",{className:"".concat(A.ul," ").concat(0===a?"first":"")},f.a.createElement(bt.a,{classes:{root:A.subHeader}},e),x.filter((function(e){return!e.hidden})).filter((function(t){return t.lastname.charAt(0).toUpperCase()===e})).map((function(e){var a;return f.a.createElement(pt.a,{key:Object(Ue.uniqueId)("list-item"),disabled:e.selected},f.a.createElement(ft.a,null,f.a.createElement(_e.a,null)),f.a.createElement(ht.a,{primary:"".concat(e.firstname," ").concat(e.lastname),secondary:e.role}),f.a.createElement(gt.a,null,f.a.createElement(rt.a,{className:A.radio,checked:n&&(null===(a=n[r])||void 0===a?void 0:a.fiscalCode.toUpperCase())===e.fiscalCode.toUpperCase(),onClick:t,value:e.fiscalCode.toUpperCase(),name:"radio-button-".concat(e.id),inputProps:{"aria-label":e.id},disabled:!!Object.keys(n).map((function(e){var t;return null===(t=n[e])||void 0===t?void 0:t.fiscalCode.toUpperCase()})).find((function(t){return t===(null===e||void 0===e?void 0:e.fiscalCode.toUpperCase())}))})))}))))})))};jt.defaultProps={role:""};var xt=jt,kt=function(e){return f.a.createElement(ut.a,{handle:"#draggable-dialog-users",cancel:'[class*="MuiDialogContent-root"]'},f.a.createElement(N.a,e))},Ct=function(e){var t,a=e.open,n=e.handleClose,r=e.usersSelected,i=e.handleUserSelected,o=e.role,l=Object(y.c)().t,c=Object(p.useState)(null),s=Object(F.a)(c,2),d=s[0],u=s[1],m=Object(p.useState)(""),b=Object(F.a)(m,2),h=b[0],g=b[1],v=Object(ot.a)(),O=Be(),E=O.logged,j=O.users,x=O.fetchUser,k=(Object(lt.a)(v.breakpoints.down("sm")),yt()),C=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current}(h),w=function(e){var t=e.target.value;u(t.toUpperCase()),i&&i(j[t.toUpperCase()])},A=function(){u(null),g(""),n()},S=function(e){x(null,e,"consulted"===o||"informed"===o)},D=function(){return Object.keys(r).length>0&&!!Object.keys(r).map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.fiscalCode.toUpperCase()})).find((function(e){return e===E}))};return f.a.createElement(Ze.a,{fullWidth:!0,maxWidth:"sm",open:a,PaperComponent:kt,disableEnforceFocus:!0,onClose:function(){return n()},"aria-labelledby":"form-dialog-title",className:k.dialog},f.a.createElement(et.a,{className:k.dialogTitle,id:"form-dialog-title",onClose:A},f.a.createElement("div",null,l("entities.update.dialog.users.title")," ",f.a.createElement("span",{className:k.role},o)),f.a.createElement(ne.a,{"aria-label":"close",className:k.closeButton,onClick:A},f.a.createElement(ue.a,null))),f.a.createElement(tt.a,null,f.a.createElement(Ee.a,{container:!0,spacing:2},f.a.createElement(Ee.a,{item:!0,xs:12},f.a.createElement(R.a,{className:k.boxTools},f.a.createElement(R.a,{className:k.boxInput},f.a.createElement(at.a,{id:"search",className:k.input,name:"search",value:h,placeholder:l("entities.update.dialog.users.search"),inputProps:{"aria-label":l("entities.update.dialog.users.search")},onKeyUp:function(e){var t=e.key,a=e.target.value;g(""),g(a),"Enter"===t&&S(a)}}),f.a.createElement(ne.a,{className:"".concat(k.iconButton," ").concat(h!==C?"active":""),"aria-label":"search",disabled:""===h,onClick:function(){return S(h)}},f.a.createElement(st.a,null))),f.a.createElement(R.a,{className:k.boxAssign},f.a.createElement(nt.a,{value:"start",disabled:D(),style:{pointerEvents:"".concat(D()?"none":"auto")},control:f.a.createElement(rt.a,{className:k.radio,disabled:D(),checked:r&&(null===(t=r[o])||void 0===t?void 0:t.fiscalCode.toUpperCase())===E}),label:l("entities.update.dialog.users.assign"),labelPlacement:"start",onClick:function(){return w({target:{value:E}})}}))),f.a.createElement(R.a,null,j&&Object.keys(null!==j&&void 0!==j?j:{}).length>0?f.a.createElement(xt,{selectedValue:d,handleClick:w,search:h,usersSelected:r,role:o}):null)))),f.a.createElement(it.a,{className:k.dialogActions},f.a.createElement(ye.a,{onClick:A,className:k.buttonClose},l("entities.update.dialog.users.buttonClose")),f.a.createElement(ye.a,{onClick:A,className:k.button,disabled:null===d},l("entities.update.dialog.users.button"))))};Ct.defaultProps={role:"",usersSelected:void 0};var wt=Ct,At=a(245),St=Object(he.a)({datePicker:{border:"0 solid red",marginTop:0,"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiInputBase-input":{textTransform:"capitalize"},"& .MuiInputAdornment-positionEnd":{marginLeft:"-5px"}}}),Dt=function(e){var t=e.control,a=e.name,n=e.rules,r=e.errors,i=e.format,o=e.setValue,l=e.initialValue,c=e.disabled,s=e.minDate,d=e.maxDate,u=e.invalidDateMessage,m=St();return Object(p.useEffect)((function(){l&&o(a,l)}),[l]),f.a.createElement(Pe.a,{error:!Object(Ue.isEmpty)(r[a]),render:function(e){var t=e.onChange,a=e.onBlur,n=e.value,r=e.ref;return f.a.createElement(At.a,{onBlur:a,onChange:t,inputRef:r,className:m.datePicker,value:n,inputVariant:"outlined",autoOk:!0,disableToolbar:!0,invalidDateMessage:u,variant:"inline",format:i,margin:"normal",id:"date-picker-inline",label:"",KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0,minDate:s,maxDate:d,disabled:c})},control:t,rules:n,name:a,defaultValue:new Date})};Dt.defaultProps={rules:{},format:"dd/MM/yyyy",initialValue:void 0,disabled:!1,minDate:void 0,maxDate:void 0,invalidDateMessage:"Invalid Date Format"};var Ut=Dt,Pt=a(96),It=function(e){var t=e.title,a=e.children,n=Object(Pt.a)(e,["title","children"]);return f.a.createElement(R.a,n,f.a.createElement(R.a,{border:0,textAlign:"left",p:1},f.a.createElement(M.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(R.a,{border:0,textAlign:"left"},a))},Nt=a(242),Tt=a(138),Rt=a.n(Tt),Mt=a(239),zt=Object(Mt.a)((function(e){return{paper:{width:"180px",padding:e.spacing(1),backgroundColor:"#2d2b1f","& .MuiTypography-root":{color:"#fff"}},popper:{zIndex:1,'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"".concat(e.palette.background.paper," transparent transparent transparent")}}},arrow:{position:"absolute",fontSize:7,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}})),Bt=function(e){var t=e.title,a=e.children,n=e.contentPopper,r=Object(Pt.a)(e,["title","children","contentPopper"]),i=f.a.useState(!1),o=Object(F.a)(i,2),l=o[0],c=o[1],s=zt(),d=Object(p.useRef)(null),u=Object(p.useState)(null),m=Object(F.a)(u,2),b=m[0],h=m[1];return f.a.createElement(R.a,r,f.a.createElement(Nt.a,{open:l,anchorEl:d.current,className:s.popper,placement:"top",disablePortal:!0,modifiers:{flip:{enabled:!0},arrow:{enabled:!0,element:b},preventOverflow:{enabled:"true",boundariesElement:"scrollParent"}}},f.a.createElement("span",{className:s.arrow,ref:h}),f.a.createElement(N.a,{className:s.paper},f.a.createElement(M.a,{variant:"body1"},n.title),f.a.createElement(M.a,{variant:"body2"},n.description))),f.a.createElement(R.a,{border:0,textAlign:"left",p:1,display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(R.a,{marginRight:2},f.a.createElement(M.a,{variant:"subtitle2",color:"textSecondary"},t)),f.a.createElement(R.a,{onClick:function(){c((function(e){return!e}))},ref:d,height:"20px"},f.a.createElement(Rt.a,{fontSize:"small"}))),f.a.createElement(R.a,{border:0,textAlign:"left"},a))},Ft=a(240),Lt=a(139),Vt=a.n(Lt),Ht=Object(he.a)((function(e){return{boxSwitch:{border:1,borderRadius:4,borderStyle:"solid",borderColor:e.palette.action.disabled,width:"100%",minHeight:"54px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-around"},switch:{border:"0 solid red",margin:e.spacing(1)},checkedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2},uncheckedIcon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:15,color:"#86660b",paddingRight:2}}})),qt=function(e){var t=e.label,a=e.on,n=e.off,r=e.onChange,i=e.disabled,o=Ht(),l=f.a.useState(!0),c=Object(F.a)(l,2),s=c[0],d=c[1];return f.a.createElement(Ft.a,{variant:"outlined",fullWidth:!0},f.a.createElement(R.a,{position:"relative",width:1},f.a.createElement(R.a,{className:o.boxSwitch},f.a.createElement(R.a,null,f.a.createElement(M.a,{variant:"body2",color:"textSecondary"},t)),f.a.createElement(Vt.a,{onChange:function(e){d(e),r&&r(e)},checked:s,className:o.switch,width:70,onColor:"#2d2b1f",checkedIcon:f.a.createElement("div",{className:o.checkedIcon},a),uncheckedIcon:f.a.createElement("div",{className:o.uncheckedIcon},n),disabled:i}))))};qt.defaultProps={disabled:!1};var Gt=qt,Wt=a(254),Kt=a(241),Jt=function(e){var t,a=e.register,n=e.errors,r=e.name,i=e.placeholder,o=e.watch,l=e.debug,c=e.showCountCaracthers,s=e.countCaracthers,d=e.multiline,u=e.rows,m=e.rowsMax,b=e.initialValue,h=e.setValue,g=e.readOnly,v=e.disabled;return l&&console.log("watch",o(r)),Object(p.useEffect)((function(){b&&h&&h(r,b)}),[b,h,r]),f.a.createElement(Ft.a,{variant:"outlined",fullWidth:!0,error:!Object(Ue.isEmpty)(n[r])},f.a.createElement(R.a,{position:"relative",width:1},f.a.createElement(Wt.a,{fullWidth:!0,id:"component-".concat(r),placeholder:i,inputRef:a,name:r,multiline:d,rows:u,rowsMax:m,readOnly:g,disabled:v}),c?f.a.createElement(R.a,{position:"absolute",bottom:0,right:"10px"},f.a.createElement(M.a,{variant:"caption",color:"textSecondary"},o(r)?o(r).length:0," / ",s)):null),f.a.createElement(Kt.a,{id:"component-".concat(r,"-error-text")},null===(t=n[r])||void 0===t?void 0:t.message))};Jt.defaultProps={debug:!1,multiline:!1,showCountCaracthers:!1,countCaracthers:0,rows:2,rowsMax:4,initialValue:"",readOnly:!1,disabled:!1};var _t=Jt,Yt=(Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"110px"}}})),Object(he.a)((function(e){return{item:{border:0,borderStyle:"solid",borderColor:e.palette.action.disabled,minHeight:"150px"}}}))),$t=Object(he.a)((function(e){return{boxGrid:{border:1,borderStyle:"solid",borderColor:e.palette.action.disabled},gridContainer:{border:"0 solid red",padding:e.spacing(0)},inputInfo:{border:"0 solid red"},borderBox:{border:"1px solid",borderColor:e.palette.action.disabled,borderRadius:4,minHeight:"50px","&.error":{borderColor:e.palette.error.main}},boxContainer:{border:"0 solid red"},boxActions:{border:"1px solid red",padding:e.spacing(1)},boxEmptyActionContainer:{border:"0 solid red",padding:e.spacing(4),textAlign:"center","& .boxIcon":{}},boxAdd:{marginRight:e.spacing(2),border:0,borderRadius:"50%",borderColor:e.palette.action.disabled,borderStyle:"solid",backgroundColor:"#eeeff3",width:"40px",height:"40px",position:"relative"},iconAdd:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"#586473"},button:{margin:e.spacing(1),borderRadius:"4px",backgroundColor:"#eeeff3",color:"#1b1d22",textTransform:"none",width:"75%",minHeight:"60px"}}})),Xt=["responsible","accountable","consulted","informed"],Qt=function(e){var t=e.typeAction,a=e.register,n=e.watch,r=e.errors,i=e.control,o=e.setValue,l=e.clearErrors,s=e.initialValue,d=e.disabled,u=Object(p.useMemo)((function(){return Xt}),[]),m=Object(p.useState)(!1),b=Object(F.a)(m,2),h=b[0],g=b[1],v=Object(p.useState)(null),E=Object(F.a)(v,2),j=E[0],x=E[1],k=Object(p.useState)({}),C=Object(F.a)(k,2),w=C[0],A=C[1],S=Object(y.c)().t,D=Be().users,U=X().task,P=Yt(),I=$t();Object(p.useEffect)((function(){A({}),Xt.forEach((function(e){return a({name:e},{required:"responsible"===e})})),a({name:"automaticComplete"}),o("automaticComplete",!0)}),[a]),Object(p.useEffect)((function(){if(!Object(Ue.isEmpty)(s)){var e=s.action;o("title",e.title),o("description",e.description),o("automaticComplete",e.automaticComplete),o("endDate",e.endDate);var t=Xt.reduce((function(t,a){return t[a]=D[e[a]],t}),{});A(t),Xt.forEach((function(t){return o(t,e[t])}))}}),[s]);var N=function(e){x(e),g(!h)};return f.a.createElement(Ee.a,{container:!0},d?null:f.a.createElement(wt,{open:h,handleClose:N,handleUserSelected:function(e){A((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(O.a)({},j,e))})),o(j,e.fiscalCode.toUpperCase()),l(j)},usersSelected:w,role:j}),f.a.createElement(Ee.a,{item:!0,xs:12},f.a.createElement(It,{title:S("action"===t?"entities.update.actions.action":"entities.update.actions.subAction")},f.a.createElement(_t,{name:"title",placeholder:S("action"===t?"entities.update.actions.actionPlaceholder":"entities.update.actions.subActionPlaceholder"),register:a({required:{value:!0,message:S("validation.required")},maxLength:{value:125,message:S("validation.maxLenght",{maxLength:125})}}),watch:n,setValue:o,errors:r,showCountCaracthers:!0,countCaracthers:125,disabled:d}))),f.a.createElement(Ee.a,{item:!0,xs:12},f.a.createElement(It,{title:S("entities.update.actions.description")},f.a.createElement(_t,{name:"description",placeholder:S("entities.update.actions.descriptionPlaceholder"),register:a({required:{value:!0,message:S("validation.required")},maxLength:{value:500,message:S("validation.maxLenght",{maxLength:500})}}),watch:n,setValue:o,errors:r,multiline:!0,rows:5,rowsMax:20,showCountCaracthers:!0,countCaracthers:500,disabled:d}))),f.a.createElement(Ee.a,{item:!0,xs:12},f.a.createElement(R.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignContent:"flex-start",height:"120px"},f.a.createElement(R.a,{paddingRight:1,height:1,width:.5},f.a.createElement(It,{title:S("entities.update.actions.end")},f.a.createElement(R.a,{border:0},f.a.createElement(Ut,{control:i,initialValue:U.startDate,name:"endDate",setValue:o,format:"dd MMMM yyyy",rules:{required:{value:!0,message:S("validation.required")}},errors:r,disabled:d,minDate:U.startDate,maxDate:U.endDate,invalidDateMessage:S("error.invalidDateMessage")})))),"action"===t?f.a.createElement(R.a,{border:0,height:1,width:.5},f.a.createElement(Bt,{title:S("entities.update.actions.completion"),contentPopper:{title:S("entities.update.actions.popper.title"),description:S("entities.update.actions.popper.description")}},f.a.createElement(R.a,{border:0},f.a.createElement(Gt,{label:S("entities.update.actions.automatic"),on:S("entities.update.actions.yes"),off:S("entities.update.actions.no"),onChange:function(e){o("automaticComplete",e)},disabled:d})))):null)),f.a.createElement(Ee.a,{item:!0,xs:12},u.map((function(e){var t,a,i,l,s;return f.a.createElement(Ee.a,{key:e,item:!0,xs:12,classes:P},f.a.createElement(It,{title:S("entities.update.actions.".concat(e))},f.a.createElement(R.a,{className:I.boxContainer},f.a.createElement(R.a,{className:"".concat(I.borderBox," ").concat(r[e]?"error":""),textAlign:"left",p:2,display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignContent:"flex-start",alignItems:"center"},f.a.createElement(R.a,{marginRight:2},n(e)?f.a.createElement(_e.a,{className:I.avatar,alt:null===(t=w[e])||void 0===t?void 0:t.firstname,src:null===(a=w[e])||void 0===a?void 0:a.image,onClick:function(){return N(e)}}):f.a.createElement(ne.a,{fontSize:"large",className:I.boxAdd,onClick:function(){return N(e)},disabled:d},f.a.createElement(xe.a,{className:I.iconAdd}))),f.a.createElement(R.a,{flexGrow:1},n(e)?f.a.createElement(M.a,{variant:"body1",color:"textPrimary"},"".concat(null===(i=w[e])||void 0===i?void 0:i.firstname," ").concat(null===(l=w[e])||void 0===l?void 0:l.lastname)):null,f.a.createElement(M.a,{variant:"body2",color:"textSecondary"},n(e)?null===(s=w[e])||void 0===s?void 0:s.role:S("entities.update.actions.assignRole"))),n(e)?f.a.createElement(R.a,null,d?null:f.a.createElement(ne.a,{fontSize:"large",onClick:function(){return N(e)}},f.a.createElement($e.a,{className:I.iconAdd})),"responsible"!==e?f.a.createElement(ne.a,{fontSize:"large",onClick:function(){return function(e){o(e,null),x(e);var t=Object(c.a)({},w);delete t[e],A(t)}(e)}},f.a.createElement(Qe.a,{className:I.iconAdd})):null):null)),r[e]?f.a.createElement(R.a,{marginTop:"3px",marginLeft:"14px"},f.a.createElement(M.a,{variant:"caption",color:"error",align:"left"},S("validation.required"))):null))}))))};Qt.defaultProps={initialValue:{}};var Zt=Qt,ea={title:"Azione",description:"",startDate:null,automaticComplete:!0,responsible:"",accountable:null,consulted:null,informed:null,subActions:[],status:"CREATED"},ta=["title","description","startDate","endDate","responsible","accountable","consulted","informed"],aa=function(e){var t=e.onSubmit,a=Object(p.useState)(!1),n=Object(F.a)(a,2),r=n[0],i=n[1],o=Object(p.useState)(!1),l=Object(F.a)(o,2),s=l[0],d=l[1],u=Object(p.useState)([]),m=Object(F.a)(u,2),b=m[0],h=m[1],g=Object(p.useState)(null),v=Object(F.a)(g,2),O=v[0],E=v[1],j=Object(p.useState)({}),x=Object(F.a)(j,2),k=x[0],C=x[1],w=Object(p.useState)(!0),A=Object(F.a)(w,2),S=A[0],D=A[1],U=Object(p.useState)(!1),N=Object(F.a)(U,2),z=N[0],B=N[1],L=Object(p.useState)(!0),V=Object(F.a)(L,2),H=V[0],q=V[1],G=Object(p.useState)(0),W=Object(F.a)(G,2),K=W[0],_=W[1],Y=Object(p.useState)(!1),$=Object(F.a)(Y,2),Q=$[0],Z=$[1],ee=J().useMock,te=X(),ae=te.task,ne=te.contextActions,re=Be(),ie=re.fetchUser,oe=re.fetchUserPresent,le=Object(Pe.b)({mode:"onChange",reValidateMode:"onBlur",defaultValues:{initAction:ea}}),ce=le.register,se=le.handleSubmit,de=le.errors,ue=le.watch,me=le.control,be=le.setValue,pe=le.trigger,fe=le.clearErrors,he=le.reset,ge=We(),ve=Object(y.c)().t,je=function(e){var t=Object(p.useRef)();return Object(p.useEffect)((function(){t.current=e})),t.current}(ue(ta)),ke=function(){var e=Object(I.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z||B(!0),D(!1),C({}),!(b.length>ne.length||"subAction"===O)){e.next=6;break}return e.next=6,pe(ta);case 6:Object(Ue.isEmpty)(de)&&(t=Object(Ue.cloneDeep)(b),_(t.length),E("action"),t.push(Object(c.a)({},ea)),h(t),b.length&&he(ta),be("startDate",ae.startDate));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(I.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z||B(!0),D(!1),C({}),!Q){e.next=6;break}return e.next=6,pe(ta);case 6:Object(Ue.isEmpty)(de)&&(_(a),n=Object(Ue.cloneDeep)(b),he(ta),E(t),(r=Object(c.a)({},Object(Ue.omit)(Object(c.a)({},ea),"subActions","automaticComplete"))).title="Sottoazione",n[a].subActions.push(Object(c.a)(Object(c.a)({},r),{},{endDate:b[a].endDate})),h(n),q(!1),d(!0),be("endDate",b[a].endDate),Z(!0));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){ie()}),[]),Object(p.useEffect)((function(){ne.length&&(oe(),h(ne))}),[ne]),Object(p.useEffect)((function(){if(je&&!S){if("subAction"===O&&H)return;var e=ue(ta),t=Object.keys(e).filter((function(t){return e[t]!==je[t]}));if(t.length){var a=Object(Ue.cloneDeep)(b),n=t.reduce((function(t,a){return t[a]=e[a],t}),{});if(!Object(Ue.isEmpty)(n)){if("action"===O)a[K]=Object(c.a)(Object(c.a)({},a[K]),n);else if("subAction"===O){var r,o,l=(null===(r=a[K])||void 0===r||null===(o=r.subActions)||void 0===o?void 0:o.length)-1;a[K].subActions[l]=Object(c.a)(Object(c.a)({},a[K].subActions[l]),n)}h(a),i(!1),d(!1)}}}}),[ue,je,O,S]);return Object(Ue.isEmpty)(de)||console.log("errors",de),f.a.createElement(Se.a,{utils:Oe.a,locale:De.a},f.a.createElement("form",{onSubmit:se((function(e,a){Object(Ue.isEmpty)(de)&&b.length&&(t(b,a),C({}),D(!0))}))},f.a.createElement(R.a,{className:ge.boxGrid},f.a.createElement(Ee.a,{container:!0,className:ge.gridContainer},f.a.createElement(Ee.a,{item:!0,xs:6,classes:{item:ge.item}},f.a.createElement(R.a,{className:ge.borderBox},f.a.createElement(ye.a,{variant:"contained",type:"button",className:ge.buttonAddAction,startIcon:f.a.createElement(xe.a,null),onClick:function(){return ke("new")},disabled:r},f.a.createElement(M.a,{variant:"body2",color:"textSecondary"},ve("entities.update.actions.add")))),b&&b.length>0?f.a.createElement(T.a,{fixed:!0,disableGutters:!0,className:ge.containerInfo},f.a.createElement(T.a,{fixed:!0,disableGutters:!0,className:ge.containerInfoScroll},f.a.createElement(R.a,{className:"".concat(ge.borderBox," ").concat(ge.borderBoxInfo)},f.a.createElement(R.a,{className:ge.boxActions},f.a.createElement(Je,{actions:b,handleClickAction:we,disabledButton:s,loadInfo:function(e,t,a){B(!0),S||D(!0),C({type:e,action:t,index:a})},disabledEvents:!S,infoSelected:k}))))):null),f.a.createElement(Ee.a,{item:!0,xs:6,classes:{item:ge.item}},z?f.a.createElement(T.a,{fixed:!0,disableGutters:!0,className:ge.containerInfo},f.a.createElement(T.a,{fixed:!0,disableGutters:!0,className:ge.containerInfoScroll},f.a.createElement(R.a,{p:1,className:ge.border},f.a.createElement(Zt,{typeAction:null!==O&&void 0!==O?O:"action",register:ce,control:me,watch:ue,errors:de,setValue:be,clearErrors:fe,useMock:ee,initialValue:k,disabled:S})))):f.a.createElement(R.a,{className:ge.boxEmptyActionContainer},f.a.createElement(R.a,{className:"boxIcon"},f.a.createElement(Ae.a,null)),f.a.createElement(R.a,null,f.a.createElement(M.a,{variant:"body1",color:"textPrimary"},ve("entities.update.actions.updateTaskAction"))),f.a.createElement(R.a,null,f.a.createElement(M.a,{variant:"body1",color:"textSecondary"},f.a.createElement(y.a,{t:ve,i18nKey:"entities.update.actions.updateTaskActionDescription"},[f.a.createElement("span",{key:0,className:ge.highlight})]))))),f.a.createElement(Ee.a,{item:!0,xs:12},f.a.createElement(R.a,{p:2,border:0,textAlign:"center",className:ge.boxButtons},f.a.createElement(ye.a,{size:"large",type:"submit",endIcon:f.a.createElement(Ce.a,null),variant:"outlined",className:ge.button,disabled:S},f.a.createElement(M.a,{variant:"body2",color:"textSecondary"},ve("entities.update.buttons.update")))))))))},na=Object(he.a)({container:{border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:4,padding:"16px 0"}}),ra=function(e){var t=e.taskId,a=J(),n=a.keycloak,r=a.serviceUrl,i=X(n,r),o=i.addAction,l=i.error,c=i.clearError,s=i.message,d=i.clearMessage,u=na(),m=function(){var e=Object(I.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.forEach((function(e){return console.table(e)})),a&&(a.preventDefault(),a.stopPropagation()),e.next=4,o(t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b=Y().isLoading,p=Object(y.c)().t;return f.a.createElement(z,{keycloak:n},f.a.createElement(N.a,{elevation:5},b?f.a.createElement(ve,null):null,f.a.createElement(T.a,{maxWidth:"xl",disableGutters:!0,className:u.container},f.a.createElement(R.a,{p:2},f.a.createElement(M.a,{variant:"h6"},f.a.createElement(y.a,{t:p,i18nKey:"entities.update.actions.task",count:t},[f.a.createElement("b",{key:1}," ",{taskId:t}," ")]))),f.a.createElement(aa,{onSubmit:m}),null===s&&null===l?null:f.a.createElement(fe,{message:s||l,onClose:function(){return s?d():c()},status:s?"success":"error",anchorOrigin:{vertical:"top",horizontal:"center"}}))))},ia=a(8),oa=a.n(ia),la=(oa.a.shape({initialized:oa.a.bool,authenticated:oa.a.bool}),function(e){var t=e.children,a=e.keycloak,n=e.serviceUrl,r=e.useMock,i=Object(p.useState)({serviceUrl:n,useMock:r}),o=Object(F.a)(i,2),l=o[0],s=o[1];return Object(p.useEffect)((function(){s((function(e){return Object(c.a)(Object(c.a)({},e),{},{keycloak:a})}))}),[a]),f.a.createElement(K.Provider,{value:[l,s]},t)}),ca=function(e){var t=e.children,a=Object(p.useState)({loading:!1}),n=Object(F.a)(a,2),r=n[0],i=n[1];return f.a.createElement(_.Provider,{value:[r,i]},t)},sa=["responsible","accountable","consulted","informed"],da=function e(t){var a=[];return t.forEach((function(t){var n=function(e){return Array.from(sa).reduce((function(t,a){return e[a]&&t.push(e[a].toUpperCase()),t}),[])}(t);if(a=[].concat(Object(B.a)(a),Object(B.a)(n)),null===t||void 0===t?void 0:t.subActions){var r=e(t.subActions);a=[].concat(Object(B.a)(a),Object(B.a)(r))}})),Object(B.a)(new Set(a))},ua=function(e){var t=e.children,a=e.taskId,n=Object(p.useState)({taskId:a,task:{},actions:[],error:null,message:null,load:!1}),r=Object(F.a)(n,2),i=r[0],o=r[1],l=Object(p.useState)(!1),s=Object(F.a)(l,2),d=s[0],u=s[1],m=J(),b=m.keycloak,h=m.serviceUrl,g=m.useMock,v=Y().setLoading,O=Object(y.c)().t,E=Be().setUsersPresent;return Object(p.useEffect)((function(){var e=function(){var e=Object(I.a)(P.a.mark((function e(){var t,n,r,i,l,s,d;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),!g){e.next=11;break}return e.next=5,new Promise((function(e){return setTimeout((function(){return e([Te,Re])}),100)}));case 5:r=e.sent,i=Object(F.a)(r,2),t=i[0],n=i[1],e.next=17;break;case 11:return e.next=13,Promise.all([H(h,a),G(h,a)]);case 13:l=e.sent,s=Object(F.a)(l,2),t=s[0],n=s[1];case 17:d=da(n.payload),E(d),n=n.payload.map((function(e){return e.subActions?e:Object(c.a)(Object(c.a)({},e),{},{subActions:[]})})),o((function(e){return Object(c.a)(Object(c.a)({},e),{},{task:t.payload,actions:n})})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.error(e.t0),o((function(e){return Object(c.a)(Object(c.a)({},e),{},{error:O("error.dataLoading")})}));case 27:return e.prev=27,v(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30]])})));return function(){return e.apply(this,arguments)}}();b&&b.initialized&&b.authenticated&&!d&&(e(),u(!0))}),[b,g]),f.a.createElement($.Provider,{value:[i,o]}," ",t," ")},ma=function(e){var t=e.children,a=e.serviceUrl,n=Object(p.useState)({logged:null,users:null,usersPresent:[],pagination:{totalPages:0,totalElements:0,numberOfElements:0,number:0,size:0,first:!0,last:!0},serviceUrl:a,error:null,message:null}),r=Object(F.a)(n,2),i=r[0],o=r[1],l=J(),s=l.keycloak,d=l.useMock;return Object(p.useEffect)((function(){s&&s.initialized&&s.authenticated&&function(){var e=Object(I.a)(P.a.mark((function e(){var t,n,r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d?(r=Me.payload[0],i="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(t=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==t?t:""),o((function(e){return Object(c.a)(Object(c.a)({},e),{},{logged:"malessandrini",userIdLogged:r.id,users:Object(O.a)({},r.fiscalCode.toUpperCase(),Object(c.a)(Object(c.a)({},r),{},{role:i}))})}))):Promise.resolve(s.loadUserInfo()).then((function(e){var t=e.preferred_username;Ne(a,t).then((function(e){var a,n,r=e.payload,i="".concat(r.degree," ").concat(r.edo?"-":""," ").concat(null!==(a=null===r||void 0===r||null===(n=r.edo)||void 0===n?void 0:n.name)&&void 0!==a?a:"");o((function(e){return Object(c.a)(Object(c.a)({},e),{},{logged:t.toUpperCase(),users:Object(O.a)({},r.fiscalCode.toUpperCase(),Object(c.a)(Object(c.a)({},r),{},{role:i,hidden:!0}))})}))}))}))}catch(l){console.error("error",l)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[s,d]),f.a.createElement(ze.Provider,{value:[i,o]},t)},ba=function(){return window&&window.entando&&window.entando.keycloak&&Object(c.a)(Object(c.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},pa={hidden:"hidden",locale:"locale",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url",serviceUrlUser:"service-url-user",useMock:"use-mock",taskId:"task-id"},fa=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).keycloak=ba(),e}return Object(r.a)(a,[{key:"attributeChangedCallback",value:function(e,t,a){if(this.container&&t!==a){if(!Object.values(pa).includes(e))throw new Error("Untracked changed attribute: ".concat(e));e===pa.disableDefaultEventHandler&&this.onToggleDisableDefaultEvent(),this.render()}}},{key:"connectedCallback",value:function(){var e=this;this.container=document.createElement("div"),this.mountPoint=document.createElement("div"),this.container.appendChild(this.mountPoint);var t=this.attachShadow({mode:"open"});t.appendChild(this.container),this.jss=Object(C.b)(Object(c.a)(Object(c.a)({},Object(u.a)()),{},{insertionPoint:this.container})),this.muiTheme=Object(s.a)({props:{MuiDialog:{container:this.mountPoint},MuiPopover:{container:this.mountPoint}}},d.itIT),this.keycloak=Object(c.a)(Object(c.a)({},ba()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=v("keycloak",(function(){e.keycloak=Object(c.a)(Object(c.a)({},ba()),{},{initialized:!0}),e.render()})),this.unsubscribeFromTaskEvent=v(g,(function(e){console.log("detail Task",e)})),this.onToggleDisableDefaultEvent(),this.render(),D()(t)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent(),this.unsubscribeFromTaskEvent&&this.unsubscribeFromTaskEvent()}},{key:"onToggleDisableDefaultEvent",value:function(){var e="true"===this.getAttribute(pa.disableDefaultEventHandler);e!==this.defaultEventHandlerDisabled&&(e&&(this.unsubscribeFromWidgetEvents&&this.unsubscribeFromWidgetEvents(),this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()),this.defaultEventHandlerDisabled=e)}},{key:"render",value:function(){var e=this.getAttribute(pa.serviceUrl)||"",t=this.getAttribute(pa.serviceUrlUser)||"",a="true"===this.getAttribute(pa.hidden),n="true"===this.getAttribute(pa.useMock),r=this.getAttribute(pa.taskId)||null;if(a)A.a.render(f.a.createElement(f.a.Fragment,null));else{var i=this.getAttribute(pa.locale)||"it";k(i),A.a.render(f.a.createElement(h.Provider,{value:this.keycloak},f.a.createElement(la,{keycloak:this.keycloak,serviceUrl:e,useMock:n},f.a.createElement(ca,null,f.a.createElement(ma,{serviceUrl:t},f.a.createElement(m.b,{jss:this.jss},f.a.createElement(b.a,{theme:this.muiTheme},f.a.createElement(ua,{taskId:r},f.a.createElement(ra,{taskId:r})))))))),this.mountPoint)}}}],[{key:"observedAttributes",get:function(){return Object.values(pa)}}]),a}(Object(l.a)(HTMLElement));customElements.define("task-update",fa)}},[[171,1,2]]]);
//# sourceMappingURL=main.db5b1083.chunk.js.map